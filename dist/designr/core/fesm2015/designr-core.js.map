{"version":3,"file":"designr-core.js","sources":["ng://@designr/core/lib/auth/auth.ts","ng://@designr/core/lib/logger/logger.ts","ng://@designr/core/lib/config/core.config.ts","ng://@designr/core/lib/config/core.service.ts","ng://@designr/core/lib/logger/logger.service.ts","ng://@designr/core/lib/api/api.service.ts","ng://@designr/core/lib/storage/storage.service.ts","ng://@designr/core/lib/auth/auth.service.ts","ng://@designr/core/lib/bundle/bundle.ts","ng://@designr/core/lib/bundle/bundle.directive.ts","ng://@designr/core/lib/content/default-content.directive.ts","ng://@designr/core/lib/core-module.component.ts","ng://@designr/core/lib/disposable/disposable.component.ts","ng://@designr/core/lib/disposable/disposable.directive.ts","ng://@designr/core/lib/highlight/highlight.pipe.ts","ng://@designr/core/lib/pipes/segment.pipe.ts","ng://@designr/core/lib/models/identity.service.ts","ng://@designr/core/lib/translate/translate.service.ts","ng://@designr/core/lib/route/route.service.ts","ng://@designr/core/lib/http/http-status-code.service.ts","ng://@designr/core/lib/http/http-response.interceptor.ts","ng://@designr/core/lib/json-formatter/json-formatter.component.ts","ng://@designr/core/lib/label/label.service.ts","ng://@designr/core/lib/label/label.directive.ts","ng://@designr/core/lib/label/label.pipe.ts","ng://@designr/core/lib/logger/logger.component.html","ng://@designr/core/lib/logger/logger.component.ts","ng://@designr/core/lib/outlet/outlet.ts","ng://@designr/core/lib/outlet/outlet-default.component.ts","ng://@designr/core/lib/outlet/outlet-resolver.service.ts","ng://@designr/core/lib/outlet/outlet.component.ts","ng://@designr/core/lib/outlet/outlet-repeater.component.ts","ng://@designr/core/lib/pipes/asset.pipe.ts","ng://@designr/core/lib/pipes/custom-async.pipe.ts","ng://@designr/core/lib/models/image.ts","ng://@designr/core/lib/pipes/image-url.pipe.ts","ng://@designr/core/lib/pipes/image.pipe.ts","ng://@designr/core/lib/pipes/public.pipe.ts","ng://@designr/core/lib/route/route.pipe.ts","ng://@designr/core/lib/models/entity.service.ts","ng://@designr/core/lib/slug/slug.service.ts","ng://@designr/core/lib/slug/slug.pipe.ts","ng://@designr/core/lib/translate/translate.directive.ts","ng://@designr/core/lib/translate/translate.pipe.ts","ng://@designr/core/lib/trust/safe-style.pipe.ts","ng://@designr/core/lib/trust/safe-url.pipe.ts","ng://@designr/core/lib/trust/trust.pipe.ts","ng://@designr/core/lib/core.module.ts","ng://@designr/core/lib/label/label.ts","ng://@designr/core/lib/models/document.ts","ng://@designr/core/lib/models/document.service.ts","ng://@designr/core/lib/models/entity.ts","ng://@designr/core/lib/models/event-dispatcher.service.ts","ng://@designr/core/lib/models/feature.ts","ng://@designr/core/lib/models/identity.ts","ng://@designr/core/lib/models/menu-item.ts","ng://@designr/core/lib/models/menu.service.ts","ng://@designr/core/lib/models/taxonomy.ts","ng://@designr/core/lib/once/once.service.ts","ng://@designr/core/lib/translate/translate.ts","ng://@designr/core/public_api.ts","ng://@designr/core/designr-core.ts"],"sourcesContent":["\nexport enum AuthStrategy {\n\tBearer = 0,\n\tCookie = 1,\n}\n\nexport class AuthToken {\n\tconstructor(\n\t\tpublic accessToken: string,\n\t\tpublic expiresIn: number = 0\n\t) { }\n}\n","import { HttpErrorResponse, HttpResponse } from '@angular/common/http';\n\nexport enum LoggerErrorStrategy {\n\tInformational = 100,\n\tSuccess = 200,\n\tRedirect = 300,\n\tClient = 400,\n\tServer = 500,\n\tNone = 999,\n}\n\nexport class LoggerError extends HttpErrorResponse {\n\tbody?: any;\n\n\tconstructor(response?: HttpErrorResponse | HttpResponse<any>) {\n\t\tsuper({\n\t\t\terror: response instanceof HttpErrorResponse ? response.error : response.statusText,\n\t\t\theaders: response.headers,\n\t\t\tstatus: response.status,\n\t\t\tstatusText: response.statusText,\n\t\t\turl: response.url,\n\t\t});\n\t}\n\n\tget statusType(): string {\n\t\treturn Object.keys(LoggerErrorStrategy).reduce((type: string, key: string) => {\n\t\t\tif (this.status >= LoggerErrorStrategy[key]) {\n\t\t\t\ttype = key.toLowerCase();\n\t\t\t}\n\t\t\treturn type;\n\t\t}, null);\n\t}\n\n}\n","import { InjectionToken } from '@angular/core';\nimport { AuthStrategy } from '../auth/auth';\nimport { LoggerErrorStrategy } from '../logger/logger';\n\nexport class Language {\n\tid?: number;\n\tname?: string;\n\tlang?: string;\n}\n\nexport class CoreTransitionConfig {\n\tappId: string;\n\n\tconstructor(options?: CoreTransitionConfig) {\n\t\t// console.log('CoreTransitionConfig', options);\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n}\n\nexport class CoreConfig {\n\tassets?: string = '';\n\tauthStrategy?: AuthStrategy = AuthStrategy.Cookie;\n\tdefaultLanguage?: string = 'it';\n\tdefaultMarket?: string = 'it';\n\tloggerErrorStrategy?: LoggerErrorStrategy = LoggerErrorStrategy.Server;\n\tlanguages?: Language[] = [{ id: 1, name: 'Italiano', lang: 'it' }];\n\torigin?: string = '';\n\tproduction?: boolean = false;\n\tpublic?: string = '';\n\ttransition?: CoreTransitionConfig;\n\turlStrategy?: string = '';\n\tuseLang?: boolean = false;\n\tuseMarket?: boolean = false;\n\tuseServiceWorker?: boolean;\n\trouting?: any; // ExtraOptions\n\n\tconstructor(options?: CoreConfig) {\n\t\t// console.log('CoreConfig', options);\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t\tthis.transition = new CoreTransitionConfig(options.transition);\n\t\t} else {\n\t\t\tthis.transition = new CoreTransitionConfig();\n\t\t}\n\t}\n}\n\nexport const CORE_CONFIG = new InjectionToken<CoreConfig>('core.config');\n","\nimport { Inject, Injectable } from '@angular/core';\nimport { CoreConfig, CORE_CONFIG } from './core.config';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CoreService {\n\n\tpublic options: CoreConfig;\n\n\tconstructor(\n\t\t@Inject(CORE_CONFIG) options: CoreConfig\n\t) {\n\t\t// console.log('CoreService', options);\n\t\toptions = options || {};\n\t\t// options.defaultPage = (options.defaultPage || PageNotFoundComponent) as Type<PageComponent>;\n\t\t// options.notFoundPage = (options.notFoundPage || PageNotFoundComponent) as Type<PageComponent>;\n\t\tthis.options = new CoreConfig(options);\n\t}\n\n}\n","import { HttpErrorResponse, HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { CoreService } from '../config/core.service';\nimport { LoggerError } from './logger';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class Logger {\n\n\thttpError: LoggerError;\n\tlogs: string[] = [];\n\n\tconstructor(\n\t\tprivate coreService: CoreService,\n\t) {\n\t\t//\n\t}\n\n\trequest(...args: any[]) {\n\t\tif (!this.coreService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\t// console.log.apply(this, ['%c %s', 'background: #dddddd; color: #111'].concat(args));\n\t\t}\n\t}\n\n\tlog(...args: any[]) {\n\t\tif (!this.coreService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #1976d2; color: #fff; border-radius: 3px; padding: 4px 8px; margin-bottom: 4px;'].concat(args));\n\t\t}\n\t}\n\n\twarn(...args: any[]) {\n\t\tif (!this.coreService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #ff5500; color: #fff'].concat(args));\n\t\t}\n\t}\n\n\terror(...args: any[]) {\n\t\tif (!this.coreService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.error.apply(console, args);\n\t\t}\n\t}\n\n\thttp(response: HttpErrorResponse | HttpResponse<any>) {\n\t\tthis.httpError = new LoggerError(response);\n\t\tif (!this.coreService.options.production) {\n\t\t\tthis.logs.push(this.httpError.message);\n\t\t}\n\t\tconsole.warn('Logger.http.response', response.status, response.statusText, response.url);\n\t}\n\n\tclear() {\n\t\tthis.httpError = null;\n\t\tthis.logs = [];\n\t}\n}\n","import { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { makeStateKey, StateKey, TransferState } from '@angular/platform-browser';\nimport { Observable, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { CoreConfig } from '../config/core.config';\nimport { CoreService } from '../config/core.service';\nimport { Logger } from '../logger/logger.service';\n\nexport class ApiRequestOptions {\n\theaders?: HttpHeaders;\n\tparams?: HttpParams;\n\tconstructor(params?: {}) {\n\t\tthis.headers = new HttpHeaders({\n\t\t\t'Content-Type': 'application/json'\n\t\t});\n\t\tthis.params = params as HttpParams;\n\t}\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ApiService<T> {\n\n\tget collection(): string {\n\t\treturn '/api';\n\t}\n\n\tprivate _logger: Logger;\n\tget logger(): Logger {\n\t\tif (!this._logger) {\n\t\t\tthis._logger = this.injector.get(Logger);\n\t\t}\n\t\treturn this._logger;\n\t}\n\n\tprivate _http: HttpClient;\n\tget http(): HttpClient {\n\t\tif (!this._http) {\n\t\t\tthis._http = this.injector.get(HttpClient);\n\t\t}\n\t\treturn this._http;\n\t}\n\n\tprivate _state: TransferState;\n\tget state(): TransferState {\n\t\tif (!this._state) {\n\t\t\tthis._state = this.injector.get(TransferState);\n\t\t}\n\t\treturn this._state;\n\t}\n\n\tprivate _platformId: string;\n\tget platformId(): string {\n\t\tif (!this._platformId) {\n\t\t\tthis._platformId = this.injector.get<string>(PLATFORM_ID);\n\t\t}\n\t\treturn this._platformId;\n\t}\n\n\tprivate _config: CoreConfig;\n\tget config(): CoreConfig {\n\t\tif (!this._config) {\n\t\t\tthis._config = this.injector.get(CoreService).options;\n\t\t}\n\t\treturn this._config;\n\t}\n\n\tprivate _origin: string;\n\tget origin(): string {\n\t\tif (!this._origin) {\n\t\t\tthis._origin = this.config.origin;\n\t\t}\n\t\treturn this._origin;\n\t}\n\n\tget url(): string {\n\t\tlet base: string = this.origin;\n\t\tconst collection = this.collection.toLowerCase();\n\t\tif (collection.indexOf('http') === 0) {\n\t\t\tbase = '';\n\t\t}\n\t\treturn `${base}${collection}`;\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) { }\n\n\tgetUrl(method: string = ''): string {\n\t\treturn `${this.url}${method}`;\n\t}\n\n\tget(first?: string | {}, second?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.get<T[]>(url, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tpost(first: string | {}, second?: {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.post<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tput(first: string | T, second?: T | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.put<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tpatch(first: string | T, second?: T | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.patch<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tdelete(first: string | T | number, second?: T | number | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst identity: T | number = (typeof first !== 'string' ? first : second) as T | number;\n\t\tconst id = identity ? (typeof identity === 'number' ? identity : (identity as any).id) : null;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = id !== null ? this.getUrl(`${method}/${id}`) : this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.delete<T[]>(url, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\ttoCamelCase(input: any): any {\n\t\tlet output, key, keyCamelCase, value;\n\t\tif (input instanceof Array) {\n\t\t\treturn input.map((value: any) => {\n\t\t\t\tif (typeof value === 'object') {\n\t\t\t\t\tvalue = this.toCamelCase(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t} else {\n\t\t\toutput = {};\n\t\t\tfor (key in input) {\n\t\t\t\tif (input.hasOwnProperty(key)) {\n\t\t\t\t\tkeyCamelCase = (key.charAt(0).toLowerCase() + key.slice(1) || key).toString();\n\t\t\t\t\tvalue = input[key];\n\t\t\t\t\tif (value instanceof Array || (value !== null && value.constructor === Object)) {\n\t\t\t\t\t\tvalue = this.toCamelCase(value);\n\t\t\t\t\t}\n\t\t\t\t\toutput[keyCamelCase] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// TRANSFER STATE\n\n\tgetStateKey(url: string, model: {}): StateKey<any> {\n\t\tconst flatMap = (s: string, x: any) => {\n\t\t\tif (typeof x === 'number') {\n\t\t\t\ts += x.toString();\n\t\t\t} else if (typeof x === 'string') {\n\t\t\t\ts += x.substr(0, 10);\n\t\t\t} else if (x && typeof x === 'object') {\n\t\t\t\ts += '_' + Object.keys(x).map(k => k + '_' + flatMap('', x[k])).join('_');\n\t\t\t}\n\t\t\treturn s;\n\t\t};\n\t\turl = flatMap(url, model);\n\t\t// console.log('ApiService.getStateKey.url', url);\n\t\tconst key: string = url.replace(/(\\W)/gm, '_');\n\t\t// this.logger.log('ApiService.getStateKey.key', key);\n\t\treturn makeStateKey(key);\n\t}\n\n\tstateGet(first?: string | {}, second?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\tconst stateKey = this.getStateKey(url, params);\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\n\t\t\tconst cached = this.state.get(stateKey, null);\n\t\t\tthis.state.remove(stateKey);\n\t\t\treturn of(cached);\n\t\t} else {\n\t\t\treturn this.http.get<any>(url, options).pipe(\n\t\t\t\ttap(x => {\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\n\tstatePost(first: string | {}, second?: {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\tconst stateKey = this.getStateKey(url, model);\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\n\t\t\tconst cached = this.state.get(stateKey, null);\n\t\t\tthis.state.remove(stateKey);\n\t\t\treturn of(cached);\n\t\t} else {\n\t\t\treturn this.http.post<T>(url, model, options).pipe(\n\t\t\t\ttap(x => {\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { Observable, of } from 'rxjs';\n\nconst TIMEOUT = 5 * 60 * 1000; // five minutes\n\n/*\nexport class StorageEvent extends Event {}\n\nexport class CookieStorageEvent extends StorageEvent { }\n\nexport class SessionStorageEvent extends StorageEvent { }\n\nexport class LocalStorageEvent extends StorageEvent { }\n*/\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class StorageService {\n\tpublic delete(name: string): void { }\n\tpublic exist(name: string): boolean { return false; }\n\tpublic get(name: string): any { return null; }\n\tpublic set(name: string, value: any, days?: number): void { }\n\tpublic on(): Observable<any> { return of(null); }\n\tpublic tryGet(): StorageService {\n\t\t// console.log('no StorageService available...');\n\t\treturn this;\n\t}\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CookieStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate storageService: StorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('CookieStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.storageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\tthis.setter(name, '', -1);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn document.cookie.indexOf(';' + name + '=') !== -1 || document.cookie.indexOf(name + '=') === 0;\n\t}\n\n\tpublic get(name: string): any {\n\t\tconst cookieName = name + '=';\n\t\tconst ca = document.cookie.split(';');\n\t\tfor (let i = 0; i < ca.length; i++) {\n\t\t\tlet c = ca[i];\n\t\t\twhile (c.charAt(0) === ' ') {\n\t\t\t\tc = c.substring(1, c.length);\n\t\t\t}\n\t\t\tif (c.indexOf(cookieName) === 0) {\n\t\t\t\tconst value = c.substring(cookieName.length, c.length);\n\t\t\t\tlet model = null;\n\t\t\t\ttry {\n\t\t\t\t\tmodel = JSON.parse(decodeURIComponent(atob(value)));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log('Cookie.get.error parsing', name, e);\n\t\t\t\t}\n\t\t\t\treturn model;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic set(name: string, value: any, days?: number) {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\tthis.setter(name, btoa(encodeURIComponent(json)), days);\n\t\t} catch (e) {\n\t\t\tconsole.log('CookieSet.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t// todo\n\t\tconst interval: number = 1000, timeout: number = TIMEOUT;\n\t\tlet i, elapsed: number = 0;\n\t\tfunction checkCookie() {\n\t\t\tif (elapsed > timeout) {\n\t\t\t\t// promise.reject('timeout');\n\t\t\t} else {\n\t\t\t\tconst c: any = this.get(name);\n\t\t\t\tif (c) {\n\t\t\t\t\t// promise.resolve(c);\n\t\t\t\t} else {\n\t\t\t\t\telapsed += interval;\n\t\t\t\t\ti = setTimeout(checkCookie, interval);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcheckCookie();\n\t\treturn of(null);\n\t}\n\n\tprivate setter(name: string, value: any, days?: number) {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tconst date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = '; expires=' + date.toUTCString();\n\t\t} else {\n\t\t\texpires = '';\n\t\t}\n\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\n\t}\n\n\tprivate isSupported(): boolean {\n\t\treturn isPlatformBrowser(this.platformId);\n\t}\n\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SessionStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate cookieStorageService: CookieStorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('SessionStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.cookieStorageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\twindow.sessionStorage.removeItem(name);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn window.sessionStorage[name] !== undefined;\n\t}\n\n\tpublic get(name: string): any {\n\t\tlet value = null;\n\t\tif (window.sessionStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('SessionStorage.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t/*\n\t\treturn $promise(function (promise) {\n\t\t\tconst timeout = TIMEOUT;\n\t\t\tlet i;\n\t\t\tfunction storageEvent(e) {\n\t\t\t\tif (i) {\n\t\t\t\t\tclearTimeout(i);\n\t\t\t\t}\n\t\t\t\tif (e.originalEvent.key === name) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\n\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log('SessionStorage.on.error parsing', name, error);\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return fromEvent(window, 'storage');\n\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\ti = setTimeout(function () {\n\t\t\t\tpromise.reject('timeout');\n\t\t\t}, timeout);\n\t\t});\n\t\t*/\n\t\treturn of(null);\n\t}\n\n\tpublic set(name: string, value: any, days?: number): void {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\twindow.sessionStorage.setItem(name, json);\n\t\t} catch (e) {\n\t\t\tconsole.log('SessionStorage.set.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tprivate isSupported(): boolean {\n\t\tlet supported: boolean = false;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\ttry {\n\t\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.sessionStorage.setItem('test', '1');\n\t\t\t\t\twindow.sessionStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t}\n\t\treturn supported;\n\t}\n\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LocalStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate cookieStorageService: CookieStorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('LocalStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.cookieStorageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\twindow.localStorage.removeItem(name);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn window.localStorage[name] !== undefined;\n\t}\n\n\tpublic get(name: string): any {\n\t\tlet value = null;\n\t\tif (window.localStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('LocalStorage.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t/*\n\t\treturn $promise(function (promise) {\n\t\t\tconst timeout = TIMEOUT;\n\t\t\tlet i;\n\t\t\tfunction storageEvent(e) {\n\t\t\t\tif (i) {\n\t\t\t\t\tclearTimeout(i);\n\t\t\t\t}\n\t\t\t\tif (e.originalEvent.key === name) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\n\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log('LocalStorage.on.error parsing', name, error);\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return fromEvent(window, 'storage');\n\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\ti = setTimeout(function () {\n\t\t\t\tpromise.reject('timeout');\n\t\t\t}, timeout);\n\t\t});\n\t\t*/\n\t\treturn of(null);\n\t}\n\n\tpublic set(name: string, value: any, days?: number): void {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\twindow.localStorage.setItem(name, json);\n\t\t} catch (e) {\n\t\t\tconsole.log('LocalStorage.set.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tprivate isSupported(): boolean {\n\t\tlet supported: boolean = false;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\ttry {\n\t\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.localStorage.setItem('test', '1');\n\t\t\t\t\twindow.localStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t}\n\t\treturn supported;\n\t}\n\n}\n","import { HttpRequest } from '@angular/common/http';\nimport { Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { AuthToken } from './auth';\nimport { LocalStorageService } from '../storage/storage.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class AuthService {\n\n\tprivate cachedRequests: Array<HttpRequest<any>> = [];\n\tprivate paths: string[] = [];\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate injector: Injector,\n\t\tprivate localStorageService: LocalStorageService,\n\t) { }\n\n\tsetToken(authToken: AuthToken): void {\n\t\tthis.localStorageService.set('authToken', authToken);\n\t\tthis.retryFailedRequests();\n\t}\n\n\tgetToken(): AuthToken {\n\t\treturn this.localStorageService.get('authToken') as AuthToken;\n\t}\n\n\tgetFakeToken(): AuthToken {\n\t\treturn new AuthToken('fakeToken');\n\t}\n\n\tisValid(authToken: AuthToken): boolean {\n\t\t// return a boolean reflecting whether or not the token is expired\n\t\treturn authToken && (authToken.expiresIn > Date.now() || authToken.expiresIn === 0);\n\t}\n\n\tisAuthenticated(): boolean {\n\t\tconst authToken = this.getToken();\n\t\treturn this.isValid(authToken);\n\t}\n\n\tcollectFailedRequest(request): void {\n\t\tthis.cachedRequests.push(request);\n\t}\n\n\tretryFailedRequests(): void {\n\t\t// this method can be called after the token is refreshed\n\t\t// console.log('AuthService.retryFailedRequests');\n\t\t// retry the requests.\n\t}\n\n}\n","import { InjectionToken } from '@angular/core';\n\nexport interface Bundles { [key: string]: () => any; }\n\nexport const BUNDLES = new InjectionToken<Bundles>('core.bundles');\n","import { ComponentRef, Directive, Inject, Injector, Input, NgModuleFactory, NgModuleFactoryLoader, NgModuleRef, OnDestroy, OnInit, Type, ViewContainerRef } from '@angular/core';\nimport { Bundles, BUNDLES } from './bundle';\n\nexport type ModuleWithRoot = Type<any> & { rootComponent: Type<any> };\n\n@Directive({\n\tselector: '[bundle]'\n})\nexport class BundleDirective implements OnInit, OnDestroy {\n\n\t@Input() bundle: keyof Bundles;\n\t@Input() data?: any;\n\tprivate moduleRef_: NgModuleRef<any>;\n\tprivate componentRef_: ComponentRef<any>;\n\n\tconstructor(\n\t\t@Inject(BUNDLES) private bundles,\n\t\tprivate injector: Injector,\n\t\tprivate loader: NgModuleFactoryLoader,\n\t\tprivate container: ViewContainerRef,\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tthis.loader.load(this.bundles[this.bundle]).then((moduleFactory: NgModuleFactory<any>) => {\n\t\t\tconst moduleRef = moduleFactory.create(this.injector);\n\t\t\tthis.moduleRef_ = moduleRef;\n\t\t\tconst rootComponentType = moduleRef.injector.get('LAZY_ROOT_COMPONENT');\n\t\t\t// console.log(rootComponentType);\n\t\t\tconst factory = moduleRef.componentFactoryResolver.resolveComponentFactory(rootComponentType);\n\t\t\tconst componentRef = this.container.createComponent(factory);\n\t\t\tconst instance = componentRef.instance;\n\t\t\t// instance.data = this.data; // !!!\n\t\t\tthis.componentRef_ = componentRef;\n\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.componentRef_) {\n\t\t\tthis.componentRef_.destroy();\n\t\t}\n\t\tif (this.moduleRef_) {\n\t\t\tthis.moduleRef_.destroy();\n\t\t}\n\t}\n\n}\n","import { AfterContentChecked, Directive, ElementRef, Input, Renderer2, TemplateRef, ViewContainerRef } from '@angular/core';\n\n@Directive({\n\tselector: '[default]',\n})\nexport class DefaultContentDirective implements AfterContentChecked {\n\n\t@Input() default: TemplateRef<any>;\n\tprivate element: HTMLElement;\n\tprivate hasContent = true;\n\n\tconstructor(\n\t\telement: ElementRef,\n\t\tprivate container: ViewContainerRef,\n\t\tprivate renderer: Renderer2) {\n\t\tthis.element = element.nativeElement;\n\t}\n\n\tngAfterContentChecked(): void {\n\t\tlet hasContent = false;\n\t\tconsole.log('DefaultContentDirective', this.element.childNodes);\n\t\tfor (let i = this.element.childNodes.length - 1; i >= 0; --i) {\n\t\t\tconst node = this.element.childNodes[i];\n\t\t\tif (node.nodeType === 1 || node.nodeType === 3) {\n\t\t\t\thasContent = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (hasContent !== this.hasContent) {\n\t\t\tthis.hasContent = hasContent;\n\t\t\tif (hasContent) {\n\t\t\t\t// this.renderer.removeClass(this.element, 'is-empty');\n\t\t\t\tthis.container.clear();\n\t\t\t} else {\n\t\t\t\t// this.renderer.addClass(this.element, 'is-empty');\n\t\t\t\tthis.container.createEmbeddedView(this.default);\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n\tselector: 'core-module',\n\ttemplate: `<span class=\"core-module\">core {{version}}</span>`,\n\tstyles: []\n})\nexport class CoreModuleComponent implements OnInit {\n\n\tversion: string = '0.0.12';\n\n\tconstructor() { }\n\n\tngOnInit() {\n\t}\n\n}\n","\nimport { Component, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Component({\n\ttemplate: ''\n})\nexport class DisposableComponent implements OnDestroy {\n\n\tprotected unsubscribe: any = new Subject();\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe.next();\n\t\tthis.unsubscribe.complete();\n\t\t// console.log('DisposableComponent.ngOnDestroy', this);\n\t}\n\n}\n","\nimport { Directive, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Directive({\n\tselector: '[disposable-directive]'\n})\nexport class DisposableDirective implements OnDestroy {\n\n\tprotected unsubscribe: any = new Subject();\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe.next();\n\t\tthis.unsubscribe.complete();\n\t\t// console.log('DisposableDirective.ngOnDestroy', this);\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'highlight',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HighlightPipe implements PipeTransform {\n\n\ttransform(text: string, query: string): string {\n\t\tif (!query) {\n\t\t\treturn text;\n\t\t}\n\t\ttext = this.encodeHTML(text);\n\t\tquery = this.encodeHTML(query);\n\t\tconst regExp = new RegExp('&[^;]+;|' + this.escapeRegexChars(query), 'gi');\n\t\treturn text.replace(regExp, function (match) {\n\t\t\treturn match.toLowerCase() === query.toLowerCase() ? '<strong>' + match + '</strong>' : match;\n\t\t});\n\t}\n\n\tescapeRegexChars(text: string) {\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n\t}\n\n\tsafeToString(text: string) {\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\n\t}\n\n\tencodeHTML(text: string) {\n\t\treturn this.safeToString(text)\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;');\n\t}\n\n}\n","\nimport { Location } from '@angular/common';\nimport { Injectable, Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'segment',\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SegmentPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate location: Location\n\t) { }\n\n\ttransform(segments: any[] | string): any[] {\n\t\tsegments = segments != null ? (Array.isArray(segments) ? segments : segments.split('/')) : [];\n\t\tlet path: string = segments.join('/');\n\t\tpath = this.location.normalize(path);\n\t\tif (path.indexOf('/') !== 0) {\n\t\t\tpath = `/${path}`;\n\t\t}\n\t\tsegments = path.split('/');\n\t\treturn segments;\n\t}\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ApiService } from '../api/api.service';\nimport { Identity } from './identity';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class IdentityService<T extends Identity> extends ApiService<T> {\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t}\n\n\tget collection(): string {\n\t\treturn '/api/identity';\n\t}\n\n\tgetDetailById(id: number | string): Observable<T> {\n\t\treturn this.get({ id });\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { EventEmitter, Injectable, Injector } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { filter, map, switchMap } from 'rxjs/operators';\nimport { IdentityService } from '../models/identity.service';\nimport { Translate } from './translate';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class TranslateService<T extends Translate> extends IdentityService<T> {\n\n\tstatic cache: {} = {};\n\tstatic lang_: string = null;\n\n\tget collection(): string {\n\t\treturn '/api/translate';\n\t}\n\n\tpublic events: EventEmitter<any> = new EventEmitter();\n\tpublic missingHandler?: Function;\n\n\tprivate language_: any = new BehaviorSubject<any>(undefined);\n\tprivate languages_: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\n\n\tpublic get lang(): string {\n\t\treturn TranslateService.lang_;\n\t}\n\tpublic set lang(lang: string) {\n\t\tif (lang !== TranslateService.lang_) {\n\t\t\tTranslateService.lang_ = lang;\n\t\t\tconst languages = this.languages_.getValue();\n\t\t\tif (languages.length) {\n\t\t\t\tconst language = languages.find(x => x.lang === lang);\n\t\t\t\tthis.language_.next(language);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get language() {\n\t\treturn this.language_.getValue();\n\t}\n\n\tpublic get languages() {\n\t\treturn this.languages_.getValue();\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t\tthis.languages_.next(this.config.languages);\n\t}\n\n\tpublic observe$(): Observable<{}> {\n\t\t// console.log(new Error().stack);\n\t\treturn this.language_.pipe(\n\t\t\tfilter(x => x !== undefined),\n\t\t\tswitchMap((language: any) => this.getTranslation(language.lang)),\n\t\t);\n\t}\n\n\tpublic getTranslation(lang: string): Observable<{}> {\n\t\tif (!lang || !lang.trim()) {\n\t\t\treturn of(null);\n\t\t}\n\t\tTranslateService.lang_ = lang;\n\t\tif (TranslateService.cache[lang]) {\n\t\t\treturn of(TranslateService.cache[lang]);\n\t\t} else {\n\t\t\treturn this.get(`?lang=${lang}`, { lang }).pipe(\n\t\t\t\t// take(1),\n\t\t\t\tmap((x: Translate[]) => {\n\t\t\t\t\tif (x.length && x[0]) {\n\t\t\t\t\t\tconst labels = x[0].labels;\n\t\t\t\t\t\tTranslateService.cache[lang] = labels;\n\t\t\t\t\t\tthis.events.emit(labels);\n\t\t\t\t\t\treturn labels;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn of(null);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\t// tap(x => this.logger.log(`found label matching \"${lang}\"`))\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic getTranslate(key: string, defaultValue?: string, params?: any): string | any {\n\t\t// console.log('TranslateService.getTranslate', key, TranslateService.cache, TranslateService.lang_);\n\t\tif (key) {\n\t\t\tlet value: string | null = null;\n\t\t\tlet labels: any = TranslateService.cache[TranslateService.lang_];\n\t\t\t// console.log('labels', TranslateService.lang_, TranslateService.cache, labels);\n\t\t\tif (labels) {\n\t\t\t\tconst keys: string[] = key.split('.');\n\t\t\t\tlet k = keys.shift();\n\t\t\t\twhile (keys.length > 0 && labels[k]) {\n\t\t\t\t\tlabels = labels[k];\n\t\t\t\t\tk = keys.shift();\n\t\t\t\t}\n\t\t\t\tvalue = labels[k]; // || `{${k}}`;\n\t\t\t\tif (typeof value !== 'string') {\n\t\t\t\t\tvalue = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.parseTranslate(value, key, defaultValue, params);\n\t\t}\n\t}\n\n\tpublic transform(key: string, defaultValue?: string, params?: any): string | undefined {\n\t\tconst value = this.getTranslate(key, defaultValue, params);\n\t\treturn value;\n\t}\n\n\tprivate parseTranslate(value: string | null, key: string, defaultValue?: string, params?: any): string | any {\n\t\tif (value == null) {\n\t\t\treturn defaultValue || this.missingTranslate(key);\n\t\t} else if (params) {\n\t\t\treturn this.parseParams(value, params);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprivate missingTranslate(key: string): string {\n\t\tif (this.missingHandler) {\n\t\t\treturn typeof this.missingHandler === 'function' ?\n\t\t\t\tthis.missingHandler(key) :\n\t\t\t\tthis.missingHandler;\n\t\t}\n\t\treturn key;\n\t}\n\n\tprivate parseParams(value: string, params: any): string {\n\t\tconst TEMPLATEREGEXP_: RegExp = /@([^{}\\s]*)/g; // /{{\\s?([^{}\\s]*)\\s?}}/g;\n\t\treturn value.replace(TEMPLATEREGEXP_, (text: string, key: string) => {\n\t\t\tconst replacer: string = params[key] as string;\n\t\t\treturn typeof replacer !== 'undefined' ? replacer : text;\n\t\t});\n\t}\n\n\tpublic use(lang: string) {\n\n\t}\n\n\tpublic setDefaultLang(lang: string) {\n\n\t}\n\n\tpublic addLangs(lang: string[]) {\n\n\t}\n\n\tpublic getBrowserLang(): string {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tconst lang = this.getFirstBrowserLang() || this.config.defaultLanguage; // navigator.languages ? navigator.languages[0] : (navigator.language || navigator['userLanguage'] || this.config.defaultLanguage);\n\t\t\t// console.log('getBrowserLang', lang, navigator.languages);\n\t\t\treturn lang;\n\t\t} else {\n\t\t\treturn this.config.defaultLanguage;\n\t\t}\n\t}\n\n\tpublic getFirstBrowserLang() {\n\t\tconst lang = this.getFirstBrowserLocale();\n\t\tif (lang) {\n\t\t\treturn lang.split('-')[0];\n\t\t}\n\t}\n\n\tpublic getFirstBrowserLocale() {\n\t\tconst navigator = window.navigator;\n\t\tconst properties = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'];\n\t\tlet lang;\n\t\tif (Array.isArray(navigator.languages)) {\n\t\t\tlang = navigator.languages[0];\n\t\t}\n\t\tlet i = 0;\n\t\twhile (!lang && i < properties.length) {\n\t\t\tlang = navigator[properties[i]];\n\t\t\ti++;\n\t\t}\n\t\treturn lang;\n\t}\n\n}\n","\n\nimport { isPlatformBrowser, isPlatformServer, Location } from '@angular/common';\nimport { Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { ActivatedRoute, NavigationStart, Params, Router } from '@angular/router';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { distinctUntilChanged, filter, switchMap } from 'rxjs/operators';\nimport { CoreService } from '../config/core.service';\nimport { SegmentPipe } from '../pipes/segment.pipe';\nimport { Translate } from '../translate/translate';\nimport { TranslateService } from '../translate/translate.service';\n\ndeclare const Buffer;\ndeclare const process;\n\n// @dynamic\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class RouteService {\n\n\tstatic startTime: number;\n\tstatic endTime: number;\n\tprivate urlStrategy: string;\n\tprivate _language: any = new BehaviorSubject({});\n\tpublic readonly language: Observable<any> = this._language.asObservable();\n\tprivate _languages: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\n\tpublic readonly languages: Observable<any[]> = this._languages.asObservable();\n\tprivate _lang: string;\n\tprivate path: string;\n\tpublic params: Observable<Params>;\n\tpublic queryParams: Observable<Params>;\n\tpublic currentMarket: string;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate coreService: CoreService,\n\t\tprivate injector: Injector,\n\t\tprivate translateService: TranslateService<Translate>,\n\t\tprivate location: Location,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate segment: SegmentPipe,\n\t) {\n\t\tthis.urlStrategy = this.coreService.options.urlStrategy;\n\t\tthis._languages.next(this.coreService.options.languages);\n\t\tthis.currentMarket = this.coreService.options.defaultMarket;\n\t\tthis.setLanguages();\n\t\tif (this.coreService.options.useLang || this.coreService.options.useMarket) {\n\t\t\tthis.subscribeToRouter();\n\t\t}\n\t}\n\n\tprivate get lang(): string {\n\t\treturn this._lang;\n\t}\n\n\tprivate set lang(lang: string) {\n\t\tif (lang !== this._lang) {\n\t\t\tthis._lang = lang;\n\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\tthis._language.next(language);\n\t\t\tthis.translateService.use(lang);\n\t\t\t// console.log('RouteService.set lang', lang, this.coreService.options.useLang);\n\t\t\tif (this.coreService.options.useLang) {\n\t\t\t\tconst _lang: string = this._lang;\n\t\t\t\tlet path = this.location.path();\n\t\t\t\tif (path.indexOf(`/${_lang}`) === 0) {\n\t\t\t\t\tpath = path.replace(`/${_lang}`, `/${lang}`);\n\t\t\t\t} else if (path.indexOf(`/${lang}`) !== 0) {\n\t\t\t\t\tpath = `/${lang}` + path;\n\t\t\t\t}\n\t\t\t\tthis.path = path;\n\t\t\t\t// const langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get currentLang(): string {\n\t\treturn this._lang;\n\t}\n\n\tpublic pageParams$: BehaviorSubject<Params> = new BehaviorSubject({});\n\tpublic getPageParams(): Observable<Params> {\n\t\t// console.log('RouteService.getPageParams', this.router.url);\n\t\treturn this.route.queryParams.pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tswitchMap(params => {\n\t\t\t\t// console.log(params);\n\t\t\t\tconst parsed = this.parseParams(params);\n\t\t\t\tthis.pageParams$.next(parsed);\n\t\t\t\treturn of(parsed);\n\t\t\t}),\n\t\t\t// tap(params => console.log('RouteService.getPageParams', params)),\n\t\t);\n\t}\n\n\tpublic parseParams(params: any): any {\n\t\tconst parsed = {};\n\t\tObject.keys(params).forEach(k => parsed[k] = this.parse(params[k]));\n\t\t/*\n\t\tfor (const key in params) {\n\t\t\tif (typeof (params[key]) === 'string') {\n\t\t\t\tparsed[key] = this.parse(params[key]);\n\t\t\t} else {\n\t\t\t\tparsed[key] = params[key];\n\t\t\t}\n\t\t}\n\t\t*/\n\t\treturn parsed;\n\t}\n\n\tpublic serializeParams(params: any) {\n\t\tconst serialized = {};\n\t\tObject.keys(params).forEach(k => serialized[k] = this.serialize(params[k]));\n\t\treturn serialized;\n\t}\n\n\tpublic parse(base64) {\n\t\ttry {\n\t\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t\treturn JSON.parse(window.atob(base64));\n\t\t\t} else {\n\t\t\t\treturn JSON.parse(Buffer.from(base64, 'base64').toString('ascii'));\n\t\t\t}\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic serialize(object) {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\treturn window.btoa(JSON.stringify(object));\n\t\t} else {\n\t\t\treturn Buffer.from(JSON.stringify(object), 'ascii').toString('base64');\n\t\t}\n\t}\n\n\tpublic getId(): number {\n\t\treturn +this.route.snapshot.paramMap.get('id');\n\t}\n\n\tpublic getSlug(): string {\n\t\treturn this.route.snapshot.paramMap.get('slug');\n\t}\n\n\tpublic toRoute(data: any[] | string): any[] {\n\t\tconst segments = this.segment.transform(data);\n\t\tif (this.coreService.options.useMarket) {\n\t\t\tconst market: string = this.currentMarket;\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\tsegments.splice(marketIndex, 0, market);\n\t\t}\n\t\tif (this.coreService.options.useLang) {\n\t\t\tconst lang: string = this._lang;\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\tsegments.splice(langIndex, 0, lang);\n\t\t}\n\t\t// console.log('RouteService.toRoute', segments);\n\t\treturn segments;\n\t}\n\n\tpublic toSlug(data: any[] | string): any[] {\n\t\tconst segments = this.segment.transform(data);\n\t\tlet paths = segments.filter(x => {\n\t\t\treturn typeof x === 'string';\n\t\t});\n\t\tconst datas = segments.filter(x => {\n\t\t\treturn typeof x !== 'string';\n\t\t});\n\t\tif (this.coreService.options.useMarket) {\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\tif (paths.length > marketIndex) {\n\t\t\t\tpaths[marketIndex] = '*';\n\t\t\t}\n\t\t}\n\t\tif (this.coreService.options.useLang) {\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\tif (paths.length > langIndex) {\n\t\t\t\tpaths[langIndex] = '*';\n\t\t\t}\n\t\t}\n\t\tpaths = paths.join('/').replace(/\\/\\*/gi, '').split('/');\n\t\t// console.log('RouteService.toSlug', data, paths);\n\t\treturn paths.concat(datas);\n\t}\n\n\tpublic toParams(data: any): any {\n\t\treturn {\n\t\t\tdata: window.btoa(JSON.stringify(data))\n\t\t};\n\t}\n\n\tpublic toData(params: any): any {\n\t\tif (params && params.data) {\n\t\t\treturn JSON.parse(window.atob(params.data));\n\t\t}\n\t}\n\n\t/*\n\tpublic getParams(): Observable<ComponentFactory<PageComponent>> {\n\t\treturn this.router.events.pipe(\n\t\t\tfilter(event => event instanceof ActivationEnd),\n\t\t\tmap(() => this.route),\n\t\t\tdistinctUntilChanged(),\n\t\t\tmap(route => route.firstChild),\n\t\t\tswitchMap(route => route.params),\n\t\t\tconcatMap(x => {\n\t\t\t\treturn of(this.toData(x));\n\t\t\t})\n\t\t);\n\t}\n\t*/\n\n\tpublic setLanguage(lang: string, silent?: boolean) {\n\t\tthis.lang = lang;\n\t\tif (this.coreService.options.useLang && this.path) {\n\t\t\t// console.log('RouteService.setLanguage', this.path, this._lang, lang, silent);\n\t\t\tif (silent) {\n\t\t\t\tthis.location.replaceState(this.path);\n\t\t\t} else {\n\t\t\t\tthis.router.navigate([this.path]);\n\t\t\t}\n\t\t}\n\t}\n\n\t// PRIVATE METHODS\n\n\tprivate setLanguages() {\n\t\tthis.translateService.addLangs(this.coreService.options.languages ? this.coreService.options.languages.map(x => x.lang) : []);\n\t\tthis.translateService.setDefaultLang(this.coreService.options.defaultLanguage);\n\t\t// this.setLanguage(this.detectLanguage(), true);\n\t\tthis.setLanguage(this.coreService.options.defaultLanguage, true);\n\t\t/*\n\t\tthis.translateService.onLangChange.subscribe((e: LangChangeEvent) => {\n\t\t\t// console.log('RouteService.onLangChange', e);\n\t\t});\n\t\t*/\n\t}\n\n\tprivate subscribeToRouter() {\n\t\tthis.router.events.pipe(\n\t\t\tfilter(event => event instanceof NavigationStart)\n\t\t).subscribe((event: NavigationStart) => {\n\t\t\tconst location = this.location.normalize(event.url).split('/');\n\t\t\tif (this.coreService.options.useMarket) {\n\t\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\t\tconst market = location[marketIndex];\n\t\t\t\tif (market !== this.currentMarket) {\n\t\t\t\t\tthis.currentMarket = market;\n\t\t\t\t\t// console.log('RouteService.setMarket', market, event.url);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.coreService.options.useLang) {\n\t\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\t\tconst lang = location[langIndex];\n\t\t\t\tif (lang !== this._lang) {\n\t\t\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\t\t\tthis._language.next(language);\n\t\t\t\t\tthis.translateService.use(lang);\n\t\t\t\t\t// console.log('RouteService.setLang', lang, this._lang, langIndex, location, event.url);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate detectLanguage(): string {\n\t\tlet acceptLanguage: string = null;\n\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t/*\n\t\t\t// server side express engine\n\t\t\tapp.engine('html',  (_, options, callback) => {\n\t\t\t\tlet engine = ngExpressEngine({\n\t\t\t\t\tbootstrap: ServerAppModule,\n\t\t\t\t\tproviders: [ { provide: 'request', useFactory: () => options.req } ]\n\t\t\t\t});\n\t\t\t\tengine(_, options, callback)\n\t\t\t})\n\t\t\t*/\n\t\t\tconst request = this.injector.get('request');\n\t\t\tif (request) {\n\t\t\t\tacceptLanguage = request.headers['accept-language'];\n\t\t\t\tconst languages: string[] = acceptLanguage.match(/[a-zA-Z\\-]{2,10}/g) || [];\n\t\t\t\tif (languages.length > 0) {\n\t\t\t\t\tacceptLanguage = languages[0].split('-')[0];\n\t\t\t\t} else {\n\t\t\t\t\tacceptLanguage = null;\n\t\t\t\t}\n\t\t\t\t// console.log('request', request, 'acceptLanguage', acceptLanguage);\n\t\t\t}\n\t\t\t// console.log('RouteService.isPlatformServer', this.platformId, acceptLanguage);\n\t\t} else if (isPlatformBrowser(this.platformId)) {\n\t\t\tacceptLanguage = this.translateService.getBrowserLang();\n\t\t\t// console.log('RouteService.isPlatformBrowser', this.platformId, acceptLanguage);\n\t\t}\n\t\tlet detectedLanguage: string = this.coreService.options.defaultLanguage;\n\t\tconst regexp: RegExp = new RegExp(`(${this.coreService.options.languages ? this.coreService.options.languages.map(x => x.lang).join('|') : ''})`, 'gi');\n\t\tconst match = (acceptLanguage || '').match(regexp);\n\t\tdetectedLanguage = match ? match[0] : detectedLanguage;\n\t\t// console.log('RouteService.detectLanguage', detectedLanguage);\n\t\treturn detectedLanguage;\n\t}\n\n\tpublic getTime() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\treturn (performance || Date).now();\n\t\t} else {\n\t\t\tconst time = process.hrtime();\n\t\t\treturn (time[0] * 1e9 + time[1]) / 1e6;\n\t\t}\n\t}\n\n\tpublic start() {\n\t\tRouteService.startTime = this.getTime();\n\t}\n\n\tpublic end() {\n\t\tRouteService.endTime = this.getTime();\n\t\tconsole.log('RouteService.end', RouteService.endTime - RouteService.startTime);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HttpStatusCodeService {\n\n\tprivate statusCode: number;\n\tprivate redirectUrl: string;\n\n\tconstructor() {\n\t\tthis.statusCode = 200;\n\t\tthis.redirectUrl = null;\n\t}\n\n\tpublic setStatusCode(statusCode: number, redirectUrl: string = null) {\n\t\tthis.statusCode = statusCode;\n\t\tthis.redirectUrl = redirectUrl;\n\t}\n\n\tpublic getStatusCode(): number {\n\t\treturn (this.statusCode === 309 ? 301 : this.statusCode);\n\t}\n\n\tpublic getRedirectUrl(): string {\n\t\treturn this.redirectUrl;\n\t}\n\n}\n","\nimport { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse, HttpResponseBase } from '@angular/common/http';\nimport { Injectable, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { CoreConfig } from '../config/core.config';\nimport { CoreService } from '../config/core.service';\nimport { LoggerErrorStrategy } from '../logger/logger';\nimport { Logger } from '../logger/logger.service';\nimport { RouteService } from '../route/route.service';\nimport { HttpStatusCodeService } from './http-status-code.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HttpResponseInterceptor implements HttpInterceptor {\n\n\tprivate loggerErrorStrategy_: LoggerErrorStrategy = LoggerErrorStrategy.Server;\n\n\tprivate config_: CoreConfig;\n\tget config(): CoreConfig {\n\t\tif (!this.config_) {\n\t\t\tthis.config_ = this.injector.get(CoreService).options;\n\t\t}\n\t\treturn this.config_;\n\t}\n\n\tprivate logger_: Logger;\n\tget logger() {\n\t\tif (!this.logger_) {\n\t\t\tthis.logger_ = this.injector.get(Logger);\n\t\t}\n\t\treturn this.logger_;\n\t}\n\n\tprivate router_: Router;\n\tget router() {\n\t\tif (!this.router_) {\n\t\t\tthis.router_ = this.injector.get(Router);\n\t\t}\n\t\treturn this.router_;\n\t}\n\n\tprivate routeService_: RouteService;\n\tget routeService() {\n\t\tif (!this.routeService_) {\n\t\t\tthis.routeService_ = this.injector.get(RouteService);\n\t\t}\n\t\treturn this.routeService;\n\t}\n\n\tconstructor(\n\t\tprivate injector: Injector,\n\t\tprivate statusCodeService: HttpStatusCodeService,\n\t) {\n\t\tthis.loggerErrorStrategy_ = this.config.loggerErrorStrategy || LoggerErrorStrategy.Server;\n\t}\n\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\t\t// injecting request\n\t\t// parsing response\n\t\treturn next.handle(request).pipe(\n\t\t\ttap((response: HttpEvent<any>) => {\n\t\t\t\tthis.logger.httpError = null;\n\t\t\t\t// this.logger.log(response);\n\t\t\t\tif (response instanceof HttpResponse) {\n\t\t\t\t\t// console.log('response instanceof HttpResponse');\n\t\t\t\t\t// do stuff with response if you want\n\t\t\t\t\tif (response.status >= this.loggerErrorStrategy_) {\n\t\t\t\t\t\tthis.logger.http(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcatchError((response: HttpResponseBase) => {\n\t\t\t\t// console.warn('HttpResponseInterceptor', response);\n\t\t\t\tif (response instanceof HttpErrorResponse) {\n\t\t\t\t\t// this.statusCodeService.setStatusCode(response.status);\n\t\t\t\t\t// !!! add logErrorStrategy (100 INFORMATIONAL, 200 SUCCESS, 300 REDIRECT, 400 CLIENT, 500 SERVER, 999 NONE)\n\t\t\t\t\tif (response.status >= this.loggerErrorStrategy_) {\n\t\t\t\t\t\tthis.logger.http(response);\n\t\t\t\t\t}\n\t\t\t\t\t/*\n\t\t\t\t\tswitch (response.status) {\n\t\t\t\t\t\tcase 401:\n\t\t\t\t\t\t\t// unauthorized\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 404:\n\t\t\t\t\t\t\t// not found\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 409:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 410:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis.logger.http(response);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t}\n\t\t\t\treturn throwError(response);\n\t\t\t})\n\t\t);\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Component, ElementRef, Inject, Input, OnChanges, PLATFORM_ID, ViewChild, ViewEncapsulation } from '@angular/core';\n// require('json-formatter-js').default\nimport JSONFormatter from 'json-formatter-js';\nimport { isArray, isObject } from 'util';\n\n@Component({\n\tselector: 'json-formatter',\n\ttemplate: `<div #jsonFormatter></div>`,\n\tstyleUrls: ['./json-formatter.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class JsonFormatterComponent implements OnChanges {\n\t@ViewChild(`jsonFormatter`, { static: true }) input: ElementRef;\n\n\t@Input() json: Array<any> | Object | any;\n\n\telementRef: ElementRef;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t) { }\n\n\tngOnChanges() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tif (!isObject(this.json) && !isArray(this.json)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// console.log('JsonFormatterComponent', this.json);\n\t\t\tif (this.elementRef) {\n\t\t\t\tthis.input.nativeElement.removeChild(this.elementRef.nativeElement);\n\t\t\t}\n\t\t\t// const JSONFormatter = require('json-formatter-js').default;\n\t\t\tconst formatter = new JSONFormatter(this.json);\n\t\t\tconst elementRef = formatter.render();\n\t\t\tthis.input.nativeElement.appendChild(elementRef);\n\t\t\tthis.elementRef = new ElementRef(elementRef);\n\t\t}\n\t}\n}\n","import { EventEmitter, Injectable, Injector } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { catchError, debounceTime, filter, map, switchMap, tap } from 'rxjs/operators';\nimport { ApiService } from '../api/api.service';\nimport { Label } from './label';\n\nexport class LabelKey {\n\tid?: string;\n\tvalue?: string;\n\tdefaultValue?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelService<T extends Label> extends ApiService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/label';\n\t}\n\n\tprivate keys: { [key: string]: LabelKey; } = {};\n\tprivate values$: BehaviorSubject<{ [key: string]: string; }> = new BehaviorSubject({});\n\tprivate emitter$: EventEmitter<any> = new EventEmitter();\n\n\tpublic missingHandler?: Function;\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t}\n\n\ttransform(key: string, defaultValue?: string, params?: any): string | undefined {\n\t\tconst values = this.values$.getValue();\n\t\tif (values.hasOwnProperty(key)) {\n\t\t\treturn this.parseLabel(values[key], params);\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\n\t\t\tvalues[key] = null;\n\t\t\tObject.defineProperty(this.keys, key, {\n\t\t\t\tvalue: { id: key, defaultValue: defaultValue },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.emitter$.emit();\n\t\t\treturn null;\n\t\t}\n\t}\n\n\ttransform$(key: string, defaultValue?: string, params?: any): Observable<string | undefined> {\n\t\tconst values = this.values$.getValue();\n\t\tif (values.hasOwnProperty(key)) {\n\t\t\treturn of(this.parseLabel(values[key], params));\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\n\t\t\tvalues[key] = null;\n\t\t\tObject.defineProperty(this.keys, key, {\n\t\t\t\tvalue: { id: key, defaultValue: defaultValue },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.emitter$.emit();\n\t\t}\n\t\treturn this.values$.pipe(\n\t\t\tmap(values => this.parseLabel(values[key], params))\n\t\t);\n\t}\n\n\tobserve$(): Observable<{ [key: string]: string; }> {\n\t\treturn this.emitter$.pipe(\n\t\t\tdebounceTime(1),\n\t\t\tswitchMap(x => this.collect$()),\n\t\t\tfilter(x => x !== null),\n\t\t);\n\t}\n\n\tcollect$(): Observable<{ [key: string]: string; }> {\n\t\tif (Object.keys(this.keys).length) {\n\t\t\tconst keys = Object.keys(this.keys).map(x => this.keys[x]);\n\t\t\tthis.keys = {};\n\t\t\treturn this.statePost(keys).pipe(\n\t\t\t\tmap((labels: LabelKey[]) => {\n\t\t\t\t\treturn labels.reduce((values, x) => {\n\t\t\t\t\t\tvalues[x.id] = this.getLabel(x);\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}, {});\n\t\t\t\t}),\n\t\t\t\ttap((labels: { [key: string]: string; }) => {\n\t\t\t\t\tconst values = this.values$.getValue();\n\t\t\t\t\tObject.assign(values, labels);\n\t\t\t\t\tthis.values$.next(values);\n\t\t\t\t}),\n\t\t\t\tcatchError(error => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tconst labels = keys.reduce((values, x) => {\n\t\t\t\t\t\tvalues[x.id] = this.getLabel(x);\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}, {});\n\t\t\t\t\tconst values = this.values$.getValue();\n\t\t\t\t\tObject.assign(values, labels);\n\t\t\t\t\t// return this.values$.next(values);\n\t\t\t\t\treturn of(null);\n\t\t\t\t}),\n\t\t\t);\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n\tpublic parseLabel(value: string, params: any): string {\n\t\tif (value && params) {\n\t\t\tconst TEMPLATE_REGEXP: RegExp = /@([^{}\\s]*)/g;\n\t\t\treturn value.replace(TEMPLATE_REGEXP, (text: string, key: string) => {\n\t\t\t\tconst replacer: string = params[key] as string;\n\t\t\t\treturn typeof replacer !== 'undefined' ? replacer : text;\n\t\t\t});\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t}\n\n\tprivate getLabel(label: LabelKey): string | undefined {\n\t\treturn label.value || label.defaultValue || this.getMissingLabel(label);\n\t}\n\n\tprivate getMissingLabel(label: LabelKey): string | undefined {\n\t\tif (typeof this.missingHandler === 'function') {\n\t\t\treturn this.missingHandler(label);\n\t\t}\n\t\treturn label.id;\n\t}\n\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisposableDirective } from '../disposable/disposable.directive';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Directive({\n\tselector: '[label]'\n})\nexport class LabelDirective extends DisposableDirective implements OnInit {\n\n\t// key: string;\n\t// innerHTML: string;\n\t@Input() label: string;\n\t@Input() labelParams: any;\n\n\tconstructor(\n\t\tprivate element: ElementRef,\n\t\tprivate labelService: LabelService<Label>,\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\tthis.labelService.transform$(this.label, this.element.nativeElement.innerHTML, this.labelParams).pipe(\n\t\t\ttakeUntil(this.unsubscribe)\n\t\t).subscribe(label => {\n\t\t\tthis.element.nativeElement.innerHTML = label;\n\t\t});\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Pipe({\n\tname: 'label',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate labelService: LabelService<Label>,\n\t) { }\n\n\ttransform(key: string, defaultValue?: string, params?: any): string | undefined {\n\t\treturn this.labelService.transform(key, defaultValue, params);\n\t}\n\n}\n","<div class=\"error-http\" [ngClass]=\"'http--' + logger.httpError.statusType\" *ngIf=\"logger.httpError\">\n\t<span>{{logger.httpError.statusType}}</span>&nbsp;\n\t<span class=\"status\">{{logger.httpError.status}}</span>&nbsp;\n\t<span class=\"url\">{{logger.httpError.url}}</span>&nbsp;\n\t<span class=\"message\">{{logger.httpError.body?.error}}</span>\n</div>\n<!--\n<div *ngIf=\"logger.logs.length\">\n\t<ul class=\"list-group \">\n\t\t<li class=\"list-group-item\">\n\t\t\t<button type=\"button\" class=\"btn btn-outline-primary btn-sm float-right\" (click)=\"logger.clear()\" title=\"Clear Logs\">{{ 'app.clear' | translate }}</button>\n\t\t</li>\n\t\t<li class=\"list-group-item\" *ngFor='let log of logger.logs'>\n\t\t\t<span>{{log}}</span>\n\t\t</li>\n\t</ul>\n\t<br>\n</div>\n-->\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Logger } from './logger.service';\n\n@Component({\n\tselector: 'core-logger',\n\ttemplateUrl: './logger.component.html',\n\tstyleUrls: ['./logger.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class LoggerComponent implements OnInit {\n\tconstructor(public logger: Logger) { }\n\n\tngOnInit() {\n\t}\n}\n","import { InjectionToken, Type } from '@angular/core';\nimport { OutletDefaultComponent } from './outlet-default.component';\n\nexport interface OutletInit {\n\tOutletInit(): void;\n}\n\nexport interface Outlets { [key: string]: Type<OutletDefaultComponent>; }\n\nexport const OUTLETS = new InjectionToken<Outlets>('core.outlets');\n\nexport class Outlet {\n\t// id: number | string;\n\tname?: string;\n\tcomponent?: number | string;\n}\n","\nimport { Component, Input } from '@angular/core';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { Outlet } from './outlet';\n\n@Component({\n\tselector: 'outlet-content-component',\n\ttemplate: `<div class=\"outlet\">Outlet not found!</div>`,\n})\nexport class OutletDefaultComponent extends DisposableComponent {\n\t@Input() outlet: Outlet;\n}\n","import { Inject, Injectable, Type } from '@angular/core';\nimport { Outlet, OUTLETS, Outlets } from './outlet';\nimport { OutletDefaultComponent } from './outlet-default.component';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class OutletResolverService {\n\n\tpublic outlets: Outlets;\n\n\tconstructor(\n\t\t@Inject(OUTLETS) outlets: Outlets,\n\t) {\n\t\toutlets = outlets || {};\n\t}\n\n\tresolve(outlet: Outlet): Type<OutletDefaultComponent> {\n\t\tlet component: Type<OutletDefaultComponent>;\n\t\tif (outlet) {\n\t\t\tcomponent = this.outlets[outlet.component] || OutletDefaultComponent;\n\t\t} else {\n\t\t\tcomponent = OutletDefaultComponent;\n\t\t}\n\t\treturn component;\n\t}\n\n}\n","import { Component, ComponentFactory, ComponentFactoryResolver, ComponentRef, Input, OnDestroy, OnInit, Type, ViewChild, ViewContainerRef } from '@angular/core';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { Outlet } from './outlet';\nimport { OutletDefaultComponent } from './outlet-default.component';\nimport { OutletResolverService } from './outlet-resolver.service';\n\n@Component({\n\tselector: 'outlet-component',\n\ttemplate: '',\n})\nexport class OutletComponent extends DisposableComponent implements OnInit, OnDestroy {\n\n\t@Input() outlet: Outlet;\n\n\t@ViewChild('outlet', { read: ViewContainerRef, static: false }) viewContainerRef: ViewContainerRef;\n\tprivate componentRef: ComponentRef<DisposableComponent>;\n\n\tconstructor(\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate outletResolverService: OutletResolverService,\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\tconst component: Type<OutletDefaultComponent> = this.outletResolverService.resolve(this.outlet);\n\t\tconst factory: ComponentFactory<OutletDefaultComponent> = this.componentFactoryResolver.resolveComponentFactory(component);\n\t\tthis.viewContainerRef.clear();\n\t\tconst componentRef = this.viewContainerRef.createComponent(factory);\n\t\tconst instance = componentRef.instance;\n\t\tinstance.outlet = this.outlet;\n\t\tif (typeof instance['OutletInit'] === 'function') {\n\t\t\tinstance['OutletInit']();\n\t\t}\n\t\tthis.componentRef = componentRef;\n\t}\n\n\tngOnDestroy() {\n\t\tthis.componentRef.destroy();\n\t}\n\n}\n","\nimport { Component, Input } from '@angular/core';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { Outlet } from './outlet';\n\n@Component({\n\tselector: 'outlet-repeater-component',\n\ttemplate: `<ng-container *ngFor=\"let outlet of outlets\"><outlet-component [outlet]=\"outlet\"></outlet-component></ng-container>`,\n})\nexport class OutletRepeaterComponent extends DisposableComponent {\n\t@Input() outlets: Outlet[];\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { CoreService } from '../config/core.service';\nimport { SegmentPipe } from './segment.pipe';\n\n@Pipe({\n\tname: 'asset',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class AssetPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate coreService: CoreService,\n\t\tprivate segment: SegmentPipe\n\t) { }\n\n\ttransform(data: any[] | string): string {\n\t\tif (typeof data === 'string' && (data.indexOf('http') === 0 || data.indexOf('/media/') === 0)) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\tconst segments = this.segment.transform(data);\n\t\t\tsegments.unshift(this.coreService.options.assets);\n\t\t\treturn segments.join('/');\n\t\t}\n\t}\n\n}\n","import { ChangeDetectorRef, OnDestroy, Pipe, PipeTransform, WrappedValue } from '@angular/core';\nimport { Observable, SubscriptionLike } from 'rxjs';\n\n@Pipe({\n\tname: 'customAsync',\n\tpure: false\n})\nexport class CustomAsyncPipe implements OnDestroy, PipeTransform {\n\n\tprivate subject: Observable<any> | null = null;\n\tprivate subscription: SubscriptionLike | null = null;\n\tprivate value: any = null;\n\tprivate cachedValue: any = null;\n\n\tconstructor(\n\t\tprivate changeDetector: ChangeDetectorRef\n\t) { }\n\n\ttransform(subject: Observable<any> | null | undefined): any {\n\t\treturn this.observableToValue(subject);\n\t}\n\n\tprivate observableToValue(subject: Observable<any> | null | undefined): any {\n\t\tif (subject !== this.subject) {\n\t\t\tif (this.subject) {\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t\tif (subject) {\n\t\t\t\tthis.subject = subject;\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\n\t\t\t\t\t// console.log('CustomAsyncPipe.A', value);\n\t\t\t\t\tthis.value = value;\n\t\t\t\t\tthis.changeDetector.markForCheck(); // mark pipe as dirty\n\t\t\t\t});\n\t\t\t\tthis.cachedValue = this.value; // ???\n\t\t\t\treturn this.value;\n\t\t\t}\n\t\t}\n\t\t// console.log('CustomAsyncPipe.B', this.value);\n\t\tif (this.cachedValue !== this.value) {\n\t\t\tthis.cachedValue = this.value;\n\t\t\treturn WrappedValue.wrap(this.value); // notify that value has changed\n\t\t}\n\t\treturn this.cachedValue; // return cachedValue\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.subscription) {\n\t\t\tthis.subscription.unsubscribe();\n\t\t}\n\t\tthis.value = null;\n\t\tthis.cachedValue = null;\n\t\tthis.subscription = null;\n\t\tthis.subject = null;\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.dispose();\n\t}\n\n\tprivate _observableToValue(subject: Observable<any> | null | undefined): any {\n\t\tif (!this.subject) {\n\t\t\tif (subject) {\n\t\t\t\tthis.subject = subject;\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\n\t\t\t\t\tthis.value = value;\n\t\t\t\t\tthis.changeDetector.markForCheck(); // value has changed\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.cachedValue = this.value;\n\t\t\treturn this.value;\n\t\t}\n\t\tif (subject !== this.subject) {\n\t\t\tthis.dispose();\n\t\t\treturn this.transform(subject as any);\n\t\t}\n\t\tif (this.value === this.cachedValue) {\n\t\t\treturn this.cachedValue;\n\t\t}\n\t\tthis.cachedValue = this.value;\n\t\treturn WrappedValue.wrap(this.value); // value has changed\n\t}\n\n}\n","\nexport enum ImageType {\n\tDefault = 1,\n\tGallery = 2,\n\tShare = 3,\n}\n\nexport class Image {\n\tid: number | string;\n\turl: string;\n\ttitle?: string;\n\tdescription?: string;\n\tfileName?: string;\n\ttype?: ImageType;\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Image, ImageType } from '../models/image';\n\n@Pipe({\n\tname: 'imageUrl',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ImageUrlPipe implements PipeTransform {\n\n\ttransform(images: Image[], type?: string, queryString?: string): string {\n\t\ttype = type || 'Default';\n\t\tqueryString = queryString ? `?${queryString}` : '';\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\n\t\tlet image: Image = null;\n\t\tif (images && images.length) {\n\t\t\timage = images.find(i => i.type === imageType) || images[0];\n\t\t}\n\t\treturn image ? (image.url + queryString).replace(/ /g, '%20') : null;\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Image, ImageType } from '../models/image';\n\n@Pipe({\n\tname: 'image',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ImagePipe implements PipeTransform {\n\n\ttransform(images: Image[], type?: string, queryString?: string): Image {\n\t\ttype = type || 'Default';\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\n\t\treturn (images && images.length) ? images.find(i => i.type === imageType) || null : null; // images[0]\n\t}\n\n\t// 21 marzo 2019\n\ttransform__(images: Image[], type?: string, queryString?: string): string {\n\t\ttype = type || 'Default';\n\t\tqueryString = queryString ? `?${queryString}` : '';\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\n\t\tlet image: Image = null;\n\t\tif (images && images.length) {\n\t\t\timage = images.find(i => i.type === imageType); // || images[0];\n\t\t\tif (!image && imageType !== ImageType.Default) {\n\t\t\t\timage = images.find(i => i.type === ImageType.Default);\n\t\t\t}\n\t\t}\n\t\treturn image ? (image.url + queryString).replace(/ /g, '%20') : null;\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { CoreService } from '../config/core.service';\nimport { SegmentPipe } from './segment.pipe';\n\n@Pipe({\n\tname: 'public',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class PublicPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate coreService: CoreService,\n\t\tprivate segment: SegmentPipe\n\t) { }\n\n\ttransform(data: any[] | string): string {\n\t\tconst segments = this.segment.transform(data);\n\t\tsegments.unshift(this.coreService.options.public);\n\t\treturn segments.join('/');\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { RouteService } from './route.service';\n\n@Pipe({\n\tname: 'route',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class RoutePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate routeService: RouteService,\n\t) { }\n\n\ttransform(data: any[] | string): string[] {\n\t\treturn this.routeService.toRoute(data);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { Entity } from './entity';\nimport { IdentityService } from './identity.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class EntityService<T extends Entity> extends IdentityService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/entity';\n\t}\n\n\tgetDetailByName(name: string): Observable<any> {\n\t\tif (!name.trim()) {\n\t\t\treturn of([]);\n\t\t}\n\t\treturn this.get({ name });\n\t}\n\n}\n","import { EventEmitter, Injectable, Injector } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { catchError, debounceTime, filter, first, map, switchMap, tap } from 'rxjs/operators';\nimport { DocumentIndex } from '../models/document';\nimport { EntityService } from '../models/entity.service';\n\nexport class SlugKey {\n\tid?: number;\n\tmnemonic?: string;\n\tslug?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugService extends EntityService<DocumentIndex> {\n\n\tget collection(): string {\n\t\treturn `/api/slug`;\n\t}\n\n\tprivate keys: { [key: string]: SlugKey; } = {};\n\tprivate values$: BehaviorSubject<{ [key: string]: string; }> = new BehaviorSubject({});\n\tprivate emitter$: EventEmitter<any> = new EventEmitter();\n\n\tpublic missingHandler?: Function;\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t}\n\n\ttransform(key: string): string | undefined {\n\t\tconst values = this.values$.getValue();\n\t\tif (values.hasOwnProperty(key)) {\n\t\t\treturn values[key];\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\n\t\t\tvalues[key] = null;\n\t\t\tObject.defineProperty(this.keys, key, {\n\t\t\t\tvalue: { mnemonic: key },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.emitter$.emit();\n\t\t\treturn null;\n\t\t}\n\t}\n\n\ttransform$(key: string): Observable<string | undefined> {\n\t\tconst values = this.values$.getValue();\n\t\tif (values.hasOwnProperty(key)) {\n\t\t\treturn of(values[key]);\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\n\t\t\tObject.defineProperty(this.keys, key, {\n\t\t\t\tvalue: { mnemonic: key },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.emitter$.emit();\n\t\t}\n\t\treturn this.values$.pipe(\n\t\t\tmap(values => values[key])\n\t\t);\n\t}\n\n\tobserve$(): Observable<{ [key: string]: string; }> {\n\t\treturn this.emitter$.pipe(\n\t\t\tdebounceTime(1),\n\t\t\tswitchMap(x => this.collect$()),\n\t\t\tfilter(x => x !== null),\n\t\t\tfirst(), //\n\t\t);\n\t}\n\n\tcollect$(): Observable<{ [key: string]: string; }> {\n\t\tif (Object.keys(this.keys).length) {\n\t\t\tconst keys = Object.keys(this.keys).map(x => this.keys[x]);\n\t\t\tthis.keys = {};\n\t\t\treturn this.statePost(keys).pipe(\n\t\t\t\tmap((items: DocumentIndex[]) => {\n\t\t\t\t\treturn items.reduce((values, x) => {\n\t\t\t\t\t\tvalues[x.mnemonic] = [x.slug];\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}, {});\n\t\t\t\t}),\n\t\t\t\ttap((slugs: { [key: string]: string; }) => {\n\t\t\t\t\tconst values = this.values$.getValue();\n\t\t\t\t\tObject.assign(values, slugs);\n\t\t\t\t\tthis.values$.next(values);\n\t\t\t\t}),\n\t\t\t\tcatchError(error => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tconst labels = keys.reduce((values, x) => {\n\t\t\t\t\t\tvalues[x.mnemonic] = null;\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}, {});\n\t\t\t\t\tconst values = this.values$.getValue();\n\t\t\t\t\tObject.assign(values, labels);\n\t\t\t\t\treturn of(null);\n\t\t\t\t}),\n\t\t\t);\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { RoutePipe } from '../route/route.pipe';\nimport { SlugService } from './slug.service';\n\n@Pipe({\n\tname: 'slug',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate slugService: SlugService,\n\t\tprivate routePipe: RoutePipe,\n\t) { }\n\n\ttransform(key: string, segments?: string[]): string[] {\n\t\tconst slug = this.slugService.transform(key);\n\t\tif (slug) {\n\t\t\tlet slugs = this.routePipe.transform(slug);\n\t\t\tif (slugs && segments) {\n\t\t\t\tslugs = slugs.concat(segments);\n\t\t\t}\n\t\t\treturn slugs;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisposableDirective } from '../disposable/disposable.directive';\nimport { Translate } from './translate';\nimport { TranslateService } from './translate.service';\n\n@Directive({\n\tselector: '[translate]'\n})\nexport class TranslateDirective extends DisposableDirective implements OnInit {\n\n\tkey: string;\n\tinnerHTML: string;\n\n\t/*\n\t@Input() set translate(key: string) {\n\t\t// console.log('TranslateDirective.translate', this.key, this.translateParams, this.template, this.view);\n\t}\n\t*/\n\t@Input() translate: string;\n\t@Input() translateParams: any;\n\n\tconstructor(\n\t\tprivate element: ElementRef,\n\t\tprivate translateService: TranslateService<Translate>,\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\t// console.log('TranslateDirective.ngOnInit', this.element.nativeElement.innerHTML);\n\t\tthis.translateService.getTranslate(this.translate, this.element.nativeElement.innerHTML, this.translateParams).pipe(\n\t\t\ttakeUntil(this.unsubscribe)\n\t\t).subscribe(translate => {\n\t\t\tthis.element.nativeElement.innerHTML = translate;\n\t\t\t// console.log('TranslateDirective.ngOnInit', translate);\n\t\t});\n\t\t// console.log('TranslateDirective.ngOnInit', this.translate, this.translateParams, this.template, this.view);\n\t}\n}\n","import { ChangeDetectorRef, Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Translate } from './translate';\nimport { TranslateService } from './translate.service';\n\n@Pipe({\n\tname: 'translate',\n\tpure: false,\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class TranslatePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate ref: ChangeDetectorRef,\n\t\tprotected translateService: TranslateService<Translate>\n\t) {\n\t\tthis.translateService.events.subscribe(\n\t\t\tx => this.ref.markForCheck()\n\t\t);\n\t}\n\n\tpublic transform(key: string, text?: string, params?: any): string {\n\t\t// console.log(key, params);\n\t\tconst label = this.translateService.getTranslate(key, text, params);\n\t\t// console.log('label', label, this.translateService.cache);\n\t\treturn label;\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeStyle'\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SafeStylePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(style: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustStyle(style);\n\t}\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeUrl'\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SafeUrlPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(url: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustResourceUrl(url);\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeHtml'\n})\nexport class TrustPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(text: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustHtml(text);\n\t\t// return this.sanitizer.bypassSecurityTrustStyle(text);\n\t\t// return this.sanitizer.bypassSecurityTrustXxx(text); - see docs\n\t}\n}\n","import { CommonModule } from '@angular/common';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { ModuleWithProviders, NgModule, NgModuleFactoryLoader, Optional, SkipSelf, SystemJsNgModuleLoader } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Bundles, BUNDLES } from './bundle/bundle';\r\nimport { BundleDirective } from './bundle/bundle.directive';\r\nimport { CoreConfig, CORE_CONFIG } from './config/core.config';\r\nimport { DefaultContentDirective } from './content/default-content.directive';\r\nimport { CoreModuleComponent } from './core-module.component';\r\nimport { DisposableComponent } from './disposable/disposable.component';\r\nimport { DisposableDirective } from './disposable/disposable.directive';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HttpResponseInterceptor } from './http/http-response.interceptor';\r\nimport { JsonFormatterComponent } from './json-formatter/json-formatter.component';\r\nimport { LabelDirective } from './label/label.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { LoggerComponent } from './logger/logger.component';\r\nimport { OutletDefaultComponent } from './outlet/outlet-default.component';\r\nimport { OutletRepeaterComponent } from './outlet/outlet-repeater.component';\r\nimport { OutletComponent } from './outlet/outlet.component';\r\nimport { AssetPipe } from './pipes/asset.pipe';\r\nimport { CustomAsyncPipe } from './pipes/custom-async.pipe';\r\nimport { ImageUrlPipe } from './pipes/image-url.pipe';\r\nimport { ImagePipe } from './pipes/image.pipe';\r\nimport { PublicPipe } from './pipes/public.pipe';\r\nimport { SegmentPipe } from './pipes/segment.pipe';\r\nimport { RoutePipe } from './route/route.pipe';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { TranslateDirective } from './translate/translate.directive';\r\nimport { TranslatePipe } from './translate/translate.pipe';\r\nimport { SafeStylePipe } from './trust/safe-style.pipe';\r\nimport { SafeUrlPipe } from './trust/safe-url.pipe';\r\nimport { TrustPipe } from './trust/trust.pipe';\r\n\r\nconst components = [\r\n\tCoreModuleComponent,\r\n\tDisposableComponent,\r\n\tDisposableDirective,\r\n\tJsonFormatterComponent,\r\n\tLoggerComponent,\r\n\tOutletComponent,\r\n\tOutletDefaultComponent,\r\n\tOutletRepeaterComponent,\r\n];\r\n\r\nconst directives = [\r\n\tBundleDirective,\r\n\tDefaultContentDirective,\r\n\tLabelDirective,\r\n\tTranslateDirective,\r\n];\r\n\r\nconst pipes = [\r\n\tAssetPipe,\r\n\tCustomAsyncPipe,\r\n\tHighlightPipe,\r\n\tImagePipe,\r\n\tImageUrlPipe,\r\n\tLabelPipe,\r\n\tPublicPipe,\r\n\tRoutePipe,\r\n\tSafeStylePipe,\r\n\tSafeUrlPipe,\r\n\tSegmentPipe,\r\n\tSlugPipe,\r\n\tTranslatePipe,\r\n\tTrustPipe,\r\n];\r\n\r\nconst validators = [];\r\n\r\nconst guards = [];\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\tCommonModule,\r\n\t\tHttpClientModule,\r\n\t\tFormsModule,\r\n\t\tReactiveFormsModule,\r\n\t],\r\n\tproviders: [\r\n\t\t{ provide: HTTP_INTERCEPTORS, useClass: HttpResponseInterceptor, multi: true },\r\n\t\t{ provide: NgModuleFactoryLoader, useClass: SystemJsNgModuleLoader },\r\n\t\t...validators,\r\n\t],\r\n\tdeclarations: [\r\n\t\t...components,\r\n\t\t...directives,\r\n\t\t...pipes,\r\n\t\t...validators,\r\n\t],\r\n\tentryComponents: [\r\n\t\t...components\r\n\t],\r\n\texports: [\r\n\t\t...components,\r\n\t\t...directives,\r\n\t\t...pipes,\r\n\t\t...validators,\r\n\t],\r\n})\r\n\r\nexport class CoreModule {\r\n\r\n\tconstructor(\r\n\t\t@Optional() @SkipSelf() parentModule: CoreModule\r\n\t) {\r\n\t\t/*\r\n\t\tif (parentModule) {\r\n\t\t\tthrow new Error('CoreModule is already loaded. Import it in the AppModule only');\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\tpublic static forRoot(\r\n\t\tbundles?: Bundles,\r\n\t\tconfig?: CoreConfig,\r\n\t): ModuleWithProviders {\r\n\t\treturn {\r\n\t\t\tngModule: CoreModule,\r\n\t\t\tproviders: [{\r\n\t\t\t\tprovide: CORE_CONFIG, useValue: config\r\n\t\t\t}, {\r\n\t\t\t\tprovide: BUNDLES, useValue: bundles || {}\r\n\t\t\t}]\r\n\t\t};\r\n\t}\r\n\r\n}\r\n","import { Entity } from '../models/entity';\n\nexport class Label implements Entity {\n\tid: string;\n\tvalue?: string;\n\tdefaultValue?: string;\n}\n","import { Entity } from './entity';\n\nexport class Document implements Entity {\n\tid: number | string;\n\tname?: string;\n\ttitle?: string;\n\tdescription?: string;\n\tslug?: string;\n}\n\nexport class DocumentIndex {\n\tid: number | string;\n\tmnemonic?: string;\n\tslug?: string;\n}\n\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Document } from './document'; // !!! Document class conflict?\nimport { EntityService } from './entity.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class DocumentService<T extends Document> extends EntityService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/document';\n\t}\n\n\tgetDetailBySlug(slug: string): Observable<T> {\n\t\tif (!slug.trim()) {\n\t\t\t// if not search term, return empty identity array.\n\t\t\treturn of();\n\t\t}\n\t\treturn this.get({ slug }).pipe(\n\t\t\t// tap(x => this.logger.log(`found identities matching \"${slug}\"`)),\n\t\t\tswitchMap(x => of(x[0]))\n\t\t);\n\t}\n\n}\n","import { Identity } from './identity';\n\nexport class Entity implements Identity {\n\tid: number | string;\n\tname?: string;\n}\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\nexport class EventEntity {\n\ttype: string | number;\n\tdata?: any;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class EventDispatcherService {\n\n\tprivate emitter: EventEmitter<EventEntity>;\n\n\tconstructor() {\n\t\tthis.emitter = new EventEmitter<EventEntity>();\n\t}\n\n\temit(event: EventEntity): void {\n\t\treturn this.emitter.emit(event);\n\t}\n\n\tobserve(): Observable<EventEntity> {\n\t\treturn this.emitter.pipe(\n\t\t\ttap((event: EventEntity) => console.log('EventDispatcherService', event))\n\t\t);\n\t}\n\n}\n","\nexport class Feature {\n\tid: number | string;\n\tslug?: string;\n\ttitle?: string;\n\tabstract?: string;\n\ttype?: number;\n\treadmore?: boolean = false;\n}\n","\nexport class Identity {\n\tid: number | string;\n}\n","import { Document } from './document';\nimport { Image } from './image';\n\nexport class MenuItem implements Document {\n\tid: number | string;\n\tname?: string;\n\ttitle?: string;\n\tabstract?: string;\n\tslug?: string;\n\turl?: string;\n\ttype?: number | string;\n\timages?: Image[];\n\titems?: MenuItem[];\n\n\tconstructor(options?: any) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t\tif (options.items) {\n\t\t\t\tthis.items = options.items.map(item => new MenuItem(item));\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { EntityService } from './entity.service';\nimport { MenuItem } from './menu-item';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class MenuService extends EntityService<MenuItem> {\n\n\tget collection(): string {\n\t\treturn '/api/menu';\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t}\n\n}\n","\nexport class Taxonomy {\n\tid: number | string;\n\tname?: string;\n\ttype?: number;\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, NgZone, PLATFORM_ID } from '@angular/core';\nimport { from, fromEvent, Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n// export class OnceEvent extends Event { }\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class OnceService {\n\n\tprivate uid: number = 0;\n\tprivate paths: string[] = [];\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate zone: NgZone,\n\t) { }\n\n\tscript(url: string, callback?: string | boolean): Observable<Event> {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t// !!! this.zone.runOutsideAngular(() => {\n\t\t\tif (this.paths.indexOf(url) === -1) {\n\t\t\t\tthis.paths.push(url);\n\t\t\t\tlet callbackName: string;\n\t\t\t\tif (callback === true) {\n\t\t\t\t\tcallbackName = 'OnceCallback' + (++this.uid);\n\t\t\t\t\turl = url.split('{{callback}}').join(callbackName);\n\t\t\t\t} else {\n\t\t\t\t\tcallbackName = callback as string;\n\t\t\t\t}\n\t\t\t\tlet callback$: Observable<any>;\n\t\t\t\tconst element = document.createElement('script');\n\t\t\t\telement.type = 'text/javascript';\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback$ = from(\n\t\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\t\twindow[callbackName] = function (data) {\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\telement.async = true;\n\t\t\t\t\tcallback$ = fromEvent(element, 'load').pipe(\n\t\t\t\t\t\tmap(x => x as Event)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst scripts = document.getElementsByTagName('script');\n\t\t\t\tif (scripts.length) {\n\t\t\t\t\tconst script = scripts[scripts.length - 1];\n\t\t\t\t\tscript.parentNode.insertBefore(element, script.nextSibling);\n\t\t\t\t}\n\t\t\t\telement.src = url;\n\t\t\t\treturn callback$;\n\t\t\t} else {\n\t\t\t\treturn of(new Event('loaded!'));\n\t\t\t}\n\t\t\t// });\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n}\n","import { Entity } from '../models/entity';\n\nexport class Translate implements Entity {\n\tid: number | string;\n\tname: string;\n\tlang: string;\n\tlabels?: any;\n}\n","/*\n * Public API Surface of core\n */\n\nexport { ApiRequestOptions, ApiService } from './lib/api/api.service';\nexport { AuthStrategy, AuthToken } from './lib/auth/auth';\nexport { AuthService } from './lib/auth/auth.service';\nexport { Bundles, BUNDLES } from './lib/bundle/bundle';\nexport { BundleDirective } from './lib/bundle/bundle.directive';\nexport { CoreConfig, CORE_CONFIG } from './lib/config/core.config';\nexport { CoreService } from './lib/config/core.service';\nexport { DefaultContentDirective } from './lib/content/default-content.directive';\nexport { CoreModuleComponent } from './lib/core-module.component';\nexport { CoreModule } from './lib/core.module';\nexport { DisposableComponent } from './lib/disposable/disposable.component';\nexport { DisposableDirective } from './lib/disposable/disposable.directive';\nexport { HighlightPipe } from './lib/highlight/highlight.pipe';\nexport { HttpResponseInterceptor } from './lib/http/http-response.interceptor';\nexport { HttpStatusCodeService } from './lib/http/http-status-code.service';\nexport { JsonFormatterComponent } from './lib/json-formatter/json-formatter.component';\nexport { Label } from './lib/label/label';\nexport { LabelDirective } from './lib/label/label.directive';\nexport { LabelPipe } from './lib/label/label.pipe';\nexport { LabelService } from './lib/label/label.service';\nexport { LoggerErrorStrategy } from './lib/logger/logger';\nexport { LoggerComponent } from './lib/logger/logger.component';\nexport { Logger } from './lib/logger/logger.service';\nexport { Document, DocumentIndex } from './lib/models/document';\nexport { DocumentService } from './lib/models/document.service';\nexport { Entity } from './lib/models/entity';\nexport { EntityService } from './lib/models/entity.service';\nexport { EventDispatcherService } from './lib/models/event-dispatcher.service';\nexport { Feature } from './lib/models/feature';\nexport { Identity } from './lib/models/identity';\nexport { IdentityService } from './lib/models/identity.service';\nexport { Image, ImageType } from './lib/models/image';\nexport { MenuItem } from './lib/models/menu-item';\nexport { MenuService } from './lib/models/menu.service';\nexport { Taxonomy } from './lib/models/taxonomy';\nexport { OnceService } from './lib/once/once.service';\nexport { Outlet, OutletInit, OUTLETS } from './lib/outlet/outlet';\nexport { OutletDefaultComponent } from './lib/outlet/outlet-default.component';\nexport { OutletRepeaterComponent } from './lib/outlet/outlet-repeater.component';\nexport { OutletComponent } from './lib/outlet/outlet.component';\nexport { AssetPipe } from './lib/pipes/asset.pipe';\nexport { CustomAsyncPipe } from './lib/pipes/custom-async.pipe';\nexport { ImageUrlPipe } from './lib/pipes/image-url.pipe';\nexport { ImagePipe } from './lib/pipes/image.pipe';\nexport { PublicPipe } from './lib/pipes/public.pipe';\nexport { SegmentPipe } from './lib/pipes/segment.pipe';\nexport { RoutePipe } from './lib/route/route.pipe';\nexport { RouteService } from './lib/route/route.service';\nexport { SlugPipe } from './lib/slug/slug.pipe';\nexport { SlugService } from './lib/slug/slug.service';\nexport { CookieStorageService, LocalStorageService, SessionStorageService, StorageService } from './lib/storage/storage.service';\nexport { Translate } from './lib/translate/translate';\nexport { TranslateDirective } from './lib/translate/translate.directive';\nexport { TranslatePipe } from './lib/translate/translate.pipe';\nexport { TranslateService } from './lib/translate/translate.service';\nexport { SafeStylePipe } from './lib/trust/safe-style.pipe';\nexport { SafeUrlPipe } from './lib/trust/safe-url.pipe';\nexport { TrustPipe } from './lib/trust/trust.pipe';\n\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i0.elementStart","i0.text","i0.elementEnd","i0.advance","i0.textInterpolate1","i0.element","i0.property","i0.textInterpolate","i0.template","i0.elementContainerStart","i0.elementContainerEnd"],"mappings":"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"}