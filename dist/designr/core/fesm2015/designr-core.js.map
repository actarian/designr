{"version":3,"file":"designr-core.js.map","sources":["ng://@designr/core/lib/storage/storage.service.ts","ng://@designr/core/lib/auth/auth.service.ts","ng://@designr/core/lib/config/core.config.ts","ng://@designr/core/lib/config/config.service.ts","ng://@designr/core/lib/content/default-content.directive.ts","ng://@designr/core/lib/core-module.component.ts","ng://@designr/core/lib/disposable/disposable.component.ts","ng://@designr/core/lib/pipes/segment.pipe.ts","ng://@designr/core/lib/logger/logger.ts","ng://@designr/core/lib/api/api.service.ts","ng://@designr/core/lib/translate/translate.service.ts","ng://@designr/core/lib/routes/route.service.ts","ng://@designr/core/lib/pages/page.ts","ng://@designr/core/lib/pages/page.component.ts","ng://@designr/core/lib/pages/page-not-found.component.ts","ng://@designr/core/lib/http/http-status-code.service.ts","ng://@designr/core/lib/models/identity.service.ts","ng://@designr/core/lib/models/entity.service.ts","ng://@designr/core/lib/models/image.ts","ng://@designr/core/lib/pages/link.service.ts","ng://@designr/core/lib/pages/page.service.ts","ng://@designr/core/lib/pages/page-outlet.component.ts","ng://@designr/core/lib/pages/page-resolver.ts","ng://@designr/core/lib/pages/page-resolver.service.ts","ng://@designr/core/lib/pages/page.guard.ts","ng://@designr/core/lib/pages/static.guard.ts","ng://@designr/core/lib/core.routing.ts","ng://@designr/core/lib/forms/controls/control-base.ts","ng://@designr/core/lib/forms/controls/control.component.ts","ng://@designr/core/lib/forms/controls/match.validator.ts","ng://@designr/core/lib/forms/controls/control.service.ts","ng://@designr/core/lib/forms/exists.validator.ts","ng://@designr/core/lib/forms/controls/control-checkbox.ts","ng://@designr/core/lib/forms/controls/control-email.ts","ng://@designr/core/lib/forms/controls/control-markdown.ts","ng://@designr/core/lib/forms/controls/control-number.ts","ng://@designr/core/lib/forms/controls/control-password.ts","ng://@designr/core/lib/forms/controls/control-radio.ts","ng://@designr/core/lib/forms/controls/control-select.ts","ng://@designr/core/lib/forms/controls/control-text.ts","ng://@designr/core/lib/forms/form.service.ts","ng://@designr/core/lib/forms/match.validator.ts","ng://@designr/core/lib/forms/uppercase.directive.ts","ng://@designr/core/lib/highlight/highlight.pipe.ts","ng://@designr/core/lib/http/http-response.interceptor.ts","ng://@designr/core/lib/json-formatter/json-formatter.component.ts","ng://@designr/core/lib/pipes/custom-async.pipe.ts","ng://@designr/core/lib/labels/label.service.ts","ng://@designr/core/lib/labels/label-async.pipe.ts","ng://@designr/core/lib/labels/label.directive.ts","ng://@designr/core/lib/labels/label.pipe.ts","ng://@designr/core/lib/logger/logger.component.ts","ng://@designr/core/lib/models/event-dispatcher.service.ts","ng://@designr/core/lib/models/menu.service.ts","ng://@designr/core/lib/once/once.service.ts","ng://@designr/core/lib/pipes/asset.pipe.ts","ng://@designr/core/lib/pipes/image.pipe.ts","ng://@designr/core/lib/pipes/public.pipe.ts","ng://@designr/core/lib/routes/route.pipe.ts","ng://@designr/core/lib/slugs/slug.service.ts","ng://@designr/core/lib/slugs/slug-async.pipe.ts","ng://@designr/core/lib/slugs/slug.pipe.ts","ng://@designr/core/lib/translate/translate.pipe.ts","ng://@designr/core/lib/trust/safe-style.pipe.ts","ng://@designr/core/lib/trust/safe-url.pipe.ts","ng://@designr/core/lib/trust/trust.pipe.ts","ng://@designr/core/lib/core.module.ts","ng://@designr/core/lib/core.service.ts","ng://@designr/core/lib/labels/label.ts","ng://@designr/core/lib/models/document.ts","ng://@designr/core/lib/models/document.service.ts","ng://@designr/core/lib/models/entity.ts","ng://@designr/core/lib/models/feature.ts","ng://@designr/core/lib/models/identity.ts","ng://@designr/core/lib/models/menu-item.ts","ng://@designr/core/lib/models/taxonomy.ts"],"sourcesContent":["import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { Observable, of } from 'rxjs';\n\nconst TIMEOUT = 5 * 60 * 1000; // five minutes\n\n/*\nexport class StorageEvent extends Event {}\n\nexport class CookieStorageEvent extends StorageEvent { }\n\nexport class SessionStorageEvent extends StorageEvent { }\n\nexport class LocalStorageEvent extends StorageEvent { }\n*/\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class StorageService {\n\tpublic delete(name: string): void { }\n\tpublic exist(name: string): boolean { return false; }\n\tpublic get(name: string): any { return null; }\n\tpublic set(name: string, value: any, days?: number): void { }\n\tpublic on(): Observable<any> { return of(null); }\n\tpublic tryGet(): StorageService {\n\t\t// console.log('no StorageService available...');\n\t\treturn this;\n\t}\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CookieStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate storageService: StorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('CookieStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.storageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\tthis.setter(name, '', -1);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn document.cookie.indexOf(';' + name + '=') !== -1 || document.cookie.indexOf(name + '=') === 0;\n\t}\n\n\tpublic get(name: string): any {\n\t\tconst cookieName = name + '=';\n\t\tconst ca = document.cookie.split(';');\n\t\tfor (let i = 0; i < ca.length; i++) {\n\t\t\tlet c = ca[i];\n\t\t\twhile (c.charAt(0) === ' ') {\n\t\t\t\tc = c.substring(1, c.length);\n\t\t\t}\n\t\t\tif (c.indexOf(cookieName) === 0) {\n\t\t\t\tconst value = c.substring(cookieName.length, c.length);\n\t\t\t\tlet model = null;\n\t\t\t\ttry {\n\t\t\t\t\tmodel = JSON.parse(decodeURIComponent(atob(value)));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log('Cookie.get.error parsing', name, e);\n\t\t\t\t}\n\t\t\t\treturn model;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic set(name: string, value: any, days?: number) {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\tthis.setter(name, btoa(encodeURIComponent(json)), days);\n\t\t} catch (e) {\n\t\t\tconsole.log('CookieSet.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t// todo\n\t\tconst interval: number = 1000, timeout: number = TIMEOUT;\n\t\tlet i, elapsed: number = 0;\n\t\tfunction checkCookie() {\n\t\t\tif (elapsed > timeout) {\n\t\t\t\t// promise.reject('timeout');\n\t\t\t} else {\n\t\t\t\tconst c: any = this.get(name);\n\t\t\t\tif (c) {\n\t\t\t\t\t// promise.resolve(c);\n\t\t\t\t} else {\n\t\t\t\t\telapsed += interval;\n\t\t\t\t\ti = setTimeout(checkCookie, interval);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcheckCookie();\n\t\treturn of(null);\n\t}\n\n\tprivate setter(name: string, value: any, days?: number) {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tconst date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = '; expires=' + date.toUTCString();\n\t\t} else {\n\t\t\texpires = '';\n\t\t}\n\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\n\t}\n\n\tprivate isSupported(): boolean {\n\t\treturn isPlatformBrowser(this.platformId);\n\t}\n\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SessionStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate cookieStorageService: CookieStorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('SessionStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.cookieStorageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\twindow.sessionStorage.removeItem(name);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn window.sessionStorage[name] !== undefined;\n\t}\n\n\tpublic get(name: string): any {\n\t\tlet value = null;\n\t\tif (window.sessionStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('SessionStorage.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t/*\n\t\treturn $promise(function (promise) {\n\t\t\tconst timeout = TIMEOUT;\n\t\t\tlet i;\n\t\t\tfunction storageEvent(e) {\n\t\t\t\tif (i) {\n\t\t\t\t\tclearTimeout(i);\n\t\t\t\t}\n\t\t\t\tif (e.originalEvent.key === name) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\n\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log('SessionStorage.on.error parsing', name, error);\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return fromEvent(window, 'storage');\n\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\ti = setTimeout(function () {\n\t\t\t\tpromise.reject('timeout');\n\t\t\t}, timeout);\n\t\t});\n\t\t*/\n\t\treturn of(null);\n\t}\n\n\tpublic set(name: string, value: any, days?: number): void {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\twindow.sessionStorage.setItem(name, json);\n\t\t} catch (e) {\n\t\t\tconsole.log('SessionStorage.set.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tprivate isSupported(): boolean {\n\t\tlet supported: boolean = false;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\ttry {\n\t\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.sessionStorage.setItem('test', '1');\n\t\t\t\t\twindow.sessionStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t}\n\t\treturn supported;\n\t}\n\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LocalStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate cookieStorageService: CookieStorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('LocalStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.cookieStorageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\twindow.localStorage.removeItem(name);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn window.localStorage[name] !== undefined;\n\t}\n\n\tpublic get(name: string): any {\n\t\tlet value = null;\n\t\tif (window.localStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('LocalStorage.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t/*\n\t\treturn $promise(function (promise) {\n\t\t\tconst timeout = TIMEOUT;\n\t\t\tlet i;\n\t\t\tfunction storageEvent(e) {\n\t\t\t\tif (i) {\n\t\t\t\t\tclearTimeout(i);\n\t\t\t\t}\n\t\t\t\tif (e.originalEvent.key === name) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\n\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log('LocalStorage.on.error parsing', name, error);\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return fromEvent(window, 'storage');\n\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\ti = setTimeout(function () {\n\t\t\t\tpromise.reject('timeout');\n\t\t\t}, timeout);\n\t\t});\n\t\t*/\n\t\treturn of(null);\n\t}\n\n\tpublic set(name: string, value: any, days?: number): void {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\twindow.localStorage.setItem(name, json);\n\t\t} catch (e) {\n\t\t\tconsole.log('LocalStorage.set.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tprivate isSupported(): boolean {\n\t\tlet supported: boolean = false;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\ttry {\n\t\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.localStorage.setItem('test', '1');\n\t\t\t\t\twindow.localStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t}\n\t\treturn supported;\n\t}\n\n}\n","import { HttpRequest } from '@angular/common/http';\nimport { Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { LocalStorageService } from '../storage/storage.service';\n\nexport class AuthToken {\n\tconstructor(\n\t\tpublic accessToken: string,\n\t\tpublic expiresIn: number = 0\n\t) { }\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class AuthService {\n\n\tprivate cachedRequests: Array<HttpRequest<any>> = [];\n\tprivate paths: string[] = [];\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate injector: Injector,\n\t\tprivate localStorageService: LocalStorageService,\n\t) { }\n\n\tsetToken(authToken: AuthToken): void {\n\t\tthis.localStorageService.set('authToken', authToken);\n\t\tthis.retryFailedRequests();\n\t}\n\n\tgetToken(): AuthToken {\n\t\treturn this.localStorageService.get('authToken') as AuthToken;\n\t}\n\n\tgetFakeToken(): AuthToken {\n\t\treturn new AuthToken('fakeToken');\n\t}\n\n\tisValid(authToken: AuthToken): boolean {\n\t\t// return a boolean reflecting whether or not the token is expired\n\t\treturn authToken && (authToken.expiresIn > Date.now() || authToken.expiresIn === 0);\n\t}\n\n\tisAuthenticated(): boolean {\n\t\tconst authToken = this.getToken();\n\t\treturn this.isValid(authToken);\n\t}\n\n\tcollectFailedRequest(request): void {\n\t\tthis.cachedRequests.push(request);\n\t}\n\n\tretryFailedRequests(): void {\n\t\t// this method can be called after the token is refreshed\n\t\t// console.log('AuthService.retryFailedRequests');\n\t\t// retry the requests.\n\t}\n\n}\n","import { InjectionToken, Type } from '@angular/core';\nimport { PageComponent } from '../pages/page.component';\nimport { Pages } from '../pages/pages';\n\nexport enum AuthStrategy {\n\tBearer = 0,\n\tCookie = 1,\n}\n\nexport class Language {\n\tid?: number;\n\tname?: string;\n\tlang?: string;\n}\n\nexport class CoreTransitionConfig {\n\tappId?: string;\n\n\tconstructor(options?: CoreTransitionConfig) {\n\t\tconsole.log('CoreTransitionConfig', options);\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n}\n\nexport class CorePrebootConfig {\n\tappRoot?: string;\n\n\tconstructor(options?: CorePrebootConfig) {\n\t\tconsole.log('CorePrebootConfig', options);\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n}\n\nexport class CoreConfig {\n\tassets?: string = '';\n\tauthStrategy?: AuthStrategy = AuthStrategy.Cookie;\n\tdefaultLanguage?: string = 'it';\n\tdefaultMarket?: string = 'it';\n\tdefaultPage?: Type<PageComponent>;\n\teditor?: boolean;\n\tenableTracing?: boolean;\n\tlanguages?: Language[] = [{ id: 1, name: 'Italiano', lang: 'it' }];\n\tnotFoundPage?: Type<PageComponent>;\n\torigin?: string = '';\n\tpages?: Pages = {};\n\tpreboot?: CorePrebootConfig;\n\tproduction?: boolean = false;\n\tpublic?: string = '';\n\ttransition?: CoreTransitionConfig;\n\turlStrategy?: string = '';\n\tuseHash?: boolean = true;\n\tuseLang?: boolean = false;\n\tuseMarket?: boolean = false;\n\tuseServiceWorker?: boolean;\n\n\tconstructor(options?: CoreConfig) {\n\t\tconsole.log('CoreConfig', options);\n\t\tif (options) {\n\t\t\tthis.pages = options.pages || {};\n\t\t\tthis.preboot = new CorePrebootConfig(options.preboot);\n\t\t\tthis.transition = new CoreTransitionConfig(options.transition);\n\t\t\tthis.defaultPage = options.defaultPage;\n\t\t\tthis.notFoundPage = options.notFoundPage;\n\t\t} else {\n\t\t\tthis.preboot = new CorePrebootConfig();\n\t\t\tthis.transition = new CoreTransitionConfig();\n\t\t}\n\t}\n}\n\nexport const CORE_CONFIG = new InjectionToken<CoreConfig>('core.config');\n","\nimport { Inject, Injectable } from '@angular/core';\nimport { CoreConfig, CORE_CONFIG } from './core.config';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ConfigService {\n\n\tpublic options: CoreConfig;\n\n\tconstructor(\n\t\t@Inject(CORE_CONFIG) options: CoreConfig\n\t) {\n\t\tconsole.log('ConfigService', options);\n\t\toptions = options || {};\n\t\t// options.defaultPage = (options.defaultPage || PageNotFoundComponent) as Type<PageComponent>;\n\t\t// options.notFoundPage = (options.notFoundPage || PageNotFoundComponent) as Type<PageComponent>;\n\t\tthis.options = new CoreConfig(options);\n\t}\n\n}\n","import { AfterContentChecked, Directive, ElementRef, Input, Renderer2, TemplateRef, ViewContainerRef } from '@angular/core';\n\n@Directive({\n\tselector: '[default]',\n})\nexport class DefaultContentDirective implements AfterContentChecked {\n\n\t@Input() default: TemplateRef<any>;\n\tprivate element: HTMLElement;\n\tprivate hasContent = true;\n\n\tconstructor(\n\t\telement: ElementRef,\n\t\tprivate container: ViewContainerRef,\n\t\tprivate renderer: Renderer2) {\n\t\tthis.element = element.nativeElement;\n\t}\n\n\tngAfterContentChecked(): void {\n\t\tlet hasContent = false;\n\t\tconsole.log('DefaultContentDirective', this.element.childNodes);\n\t\tfor (let i = this.element.childNodes.length - 1; i >= 0; --i) {\n\t\t\tconst node = this.element.childNodes[i];\n\t\t\tif (node.nodeType === 1 || node.nodeType === 3) {\n\t\t\t\thasContent = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (hasContent !== this.hasContent) {\n\t\t\tthis.hasContent = hasContent;\n\t\t\tif (hasContent) {\n\t\t\t\t// this.renderer.removeClass(this.element, 'is-empty');\n\t\t\t\tthis.container.clear();\n\t\t\t} else {\n\t\t\t\t// this.renderer.addClass(this.element, 'is-empty');\n\t\t\t\tthis.container.createEmbeddedView(this.default);\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n\tselector: 'core-module',\n\ttemplate: `<span class=\"core-module\">core {{version}}</span>`,\n\tstyles: []\n})\nexport class CoreModuleComponent implements OnInit {\n\n\tversion: string = '0.0.2';\n\n\tconstructor() { }\n\n\tngOnInit() {\n\t}\n\n}\n","\nimport { Component, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Component({\n\ttemplate: ''\n})\nexport class DisposableComponent implements OnDestroy {\n\n\tprotected unsubscribe: any = new Subject();\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe.next();\n\t\tthis.unsubscribe.complete();\n\t\t// console.log('DisposableComponent.ngOnDestroy', this);\n\t}\n\n}\n","\nimport { Location } from '@angular/common';\nimport { Injectable, Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'segment',\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SegmentPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate location: Location\n\t) { }\n\n\ttransform(segments: any[] | string): any[] {\n\t\tsegments = segments != null ? (Array.isArray(segments) ? segments : segments.split('/')) : [];\n\t\tlet path: string = segments.join('/');\n\t\tpath = this.location.normalize(path);\n\t\tif (path.indexOf('/') !== 0) {\n\t\t\tpath = `/${path}`;\n\t\t}\n\t\tsegments = path.split('/');\n\t\treturn segments;\n\t}\n\n}\n","import { HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ConfigService } from '../config/config.service';\n\nexport class LoggerError extends HttpErrorResponse {\n\tbody?: any;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class Logger {\n\n\thttpError: LoggerError;\n\tlogs: string[] = [];\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t) {\n\t\t//\n\t}\n\n\trequest(...args: any[]) {\n\t\tif (!this.configService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\t// console.log.apply(this, ['%c %s', 'background: #dddddd; color: #111'].concat(args));\n\t\t}\n\t}\n\n\tlog(...args: any[]) {\n\t\tif (!this.configService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #1976d2; color: #fff; border-radius: 3px; padding: 4px 8px; margin-bottom: 4px;'].concat(args));\n\t\t}\n\t}\n\n\twarn(...args: any[]) {\n\t\tif (!this.configService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #ff5500; color: #fff'].concat(args));\n\t\t}\n\t}\n\n\terror(...args: any[]) {\n\t\tif (!this.configService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.error.apply(console, args);\n\t\t}\n\t}\n\n\thttp(error: HttpErrorResponse) {\n\t\tthis.httpError = error;\n\t\tif (!this.configService.options.production) {\n\t\t\tthis.logs.push(error.message);\n\t\t}\n\t\tconsole.warn('Logger.http.error', error.status, error.statusText, error.url);\n\t}\n\n\tclear() {\n\t\tthis.httpError = null;\n\t\tthis.logs = [];\n\t}\n}\n","import { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { makeStateKey, StateKey, TransferState } from '@angular/platform-browser';\nimport { Observable, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { ConfigService } from '../config/config.service';\nimport { CoreConfig } from '../config/core.config';\nimport { Logger } from '../logger/logger';\nimport { Identity } from '../models/identity';\n\nexport class ApiRequestOptions {\n\theaders?: HttpHeaders;\n\tparams?: HttpParams;\n\tconstructor(options?: {}) {\n\t\tthis.headers = new HttpHeaders({\n\t\t\t'Content-Type': 'application/json'\n\t\t});\n\t\tthis.params = options ? new HttpParams(options) : null;\n\t}\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ApiService<T extends Identity> {\n\n\tget collection(): string {\n\t\treturn '/api';\n\t}\n\n\tprivate _logger: Logger;\n\tget logger(): Logger {\n\t\tif (!this._logger) {\n\t\t\tthis._logger = this.injector.get(Logger);\n\t\t}\n\t\treturn this._logger;\n\t}\n\n\tprivate _http: HttpClient;\n\tget http(): HttpClient {\n\t\tif (!this._http) {\n\t\t\tthis._http = this.injector.get(HttpClient);\n\t\t}\n\t\treturn this._http;\n\t}\n\n\tprivate _state: TransferState;\n\tget state(): TransferState {\n\t\tif (!this._state) {\n\t\t\tthis._state = this.injector.get(TransferState);\n\t\t}\n\t\treturn this._state;\n\t}\n\n\tprivate _platformId: string;\n\tget platformId(): string {\n\t\tif (!this._platformId) {\n\t\t\tthis._platformId = this.injector.get<string>(PLATFORM_ID);\n\t\t}\n\t\treturn this._platformId;\n\t}\n\n\tprivate _config: CoreConfig;\n\tget config(): CoreConfig {\n\t\tif (!this._config) {\n\t\t\tthis._config = this.injector.get(ConfigService).options;\n\t\t}\n\t\treturn this._config;\n\t}\n\n\tprivate _origin: string;\n\tget origin(): string {\n\t\tif (!this._origin) {\n\t\t\tthis._origin = this.config.origin;\n\t\t}\n\t\treturn this._origin;\n\t}\n\n\tget url(): string {\n\t\tlet base: string = this.origin;\n\t\tconst collection = this.collection.toLowerCase();\n\t\tif (collection.indexOf('http') === 0) {\n\t\t\tbase = '';\n\t\t}\n\t\treturn `${base}${collection}`;\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) { }\n\n\tgetUrl(method: string = ''): string {\n\t\treturn `${this.url}${method}`;\n\t}\n\n\tget(first?: string | {}, second?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.get<T>(url, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tpost(first: string | {}, second?: {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.post<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tput(first: string | T, second?: T | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.put<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tpatch(first: string | T, second?: T | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.patch<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tdelete(first: string | T | number, second?: T | number | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst identity: T | number = (typeof first !== 'string' ? first : second) as T | number;\n\t\tconst id = identity ? (typeof identity === 'number' ? identity : identity.id) : null;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = id !== null ? this.getUrl(`${method}/${id}`) : this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.delete<T[]>(url, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\ttoCamelCase(input: any): any {\n\t\tlet output, key, keyCamelCase, value;\n\t\tif (input instanceof Array) {\n\t\t\treturn input.map((value: any) => {\n\t\t\t\tif (typeof value === 'object') {\n\t\t\t\t\tvalue = this.toCamelCase(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t} else {\n\t\t\toutput = {};\n\t\t\tfor (key in input) {\n\t\t\t\tif (input.hasOwnProperty(key)) {\n\t\t\t\t\tkeyCamelCase = (key.charAt(0).toLowerCase() + key.slice(1) || key).toString();\n\t\t\t\t\tvalue = input[key];\n\t\t\t\t\tif (value instanceof Array || (value !== null && value.constructor === Object)) {\n\t\t\t\t\t\tvalue = this.toCamelCase(value);\n\t\t\t\t\t}\n\t\t\t\t\toutput[keyCamelCase] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// TRANSFER STATE\n\n\tgetStateKey(url: string, model: {}): StateKey<T> {\n\t\tconst flatMap = (s: string, x: any) => {\n\t\t\tif (typeof x === 'number') {\n\t\t\t\ts += x.toString();\n\t\t\t} else if (typeof x === 'string') {\n\t\t\t\ts += x.substr(0, 10);\n\t\t\t} else if (x && typeof x === 'object') {\n\t\t\t\ts += '_' + Object.keys(x).map(k => k + '_' + flatMap('', x[k])).join('_');\n\t\t\t}\n\t\t\treturn s;\n\t\t};\n\t\turl = flatMap(url, model);\n\t\t// console.log('ApiService.getStateKey.url', url);\n\t\tconst key: string = url.replace(/(\\W)/gm, '_');\n\t\t// this.logger.log('ApiService.getStateKey.key', key);\n\t\treturn makeStateKey(key);\n\t}\n\n\tstateGet(first?: string | {}, second?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\tconst stateKey = this.getStateKey(url, params);\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\n\t\t\tconst cached = this.state.get(stateKey, null);\n\t\t\tthis.state.remove(stateKey);\n\t\t\treturn of(cached);\n\t\t} else {\n\t\t\treturn this.http.get<T>(url, options).pipe(\n\t\t\t\ttap(x => {\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\n\tstatePost(first: string | {}, second?: {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\tconst stateKey = this.getStateKey(url, model);\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\n\t\t\tconst cached = this.state.get(stateKey, null);\n\t\t\tthis.state.remove(stateKey);\n\t\t\treturn of(cached);\n\t\t} else {\n\t\t\treturn this.http.post<T>(url, model, options).pipe(\n\t\t\t\ttap(x => {\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { ApiService } from '../api/api.service';\n\nexport class Translate {\n\tid: string;\n\tvalue?: string;\n\tdefaultValue?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class TranslateService extends ApiService<Translate>  {\n\n\tget collection(): string {\n\t\treturn '/api/translate';\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t}\n\n\tpublic use(lang: string) {\n\n\t}\n\n\tpublic setDefaultLang(lang: string) {\n\n\t}\n\n\tpublic addLangs(lang: string[]) {\n\n\t}\n\n\tpublic getBrowserLang(): string {\n\t\treturn 'it';\n\t}\n}\n","\n\nimport { isPlatformBrowser, isPlatformServer, Location } from '@angular/common';\nimport { ComponentFactory, Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { ActivatedRoute, ActivationEnd, NavigationStart, Params, Router } from '@angular/router';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { concatMap, distinctUntilChanged, filter, map, switchMap } from 'rxjs/operators';\nimport { ConfigService } from '../config/config.service';\nimport { Page } from '../pages/page';\nimport { PageComponent } from '../pages/page.component';\nimport { SegmentPipe } from '../pipes/segment.pipe';\nimport { TranslateService } from '../translate/translate.service';\n\ndeclare const Buffer;\ndeclare const process;\n\n// @dynamic\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class RouteService {\n\n\tstatic startTime: number;\n\tstatic endTime: number;\n\tprivate urlStrategy: string;\n\tprivate _language: any = new BehaviorSubject({});\n\tpublic readonly language: Observable<any> = this._language.asObservable();\n\tprivate _languages: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\n\tpublic readonly languages: Observable<any[]> = this._languages.asObservable();\n\tprivate _lang: string;\n\tprivate path: string;\n\tpublic page: Page;\n\tpublic params: Observable<Params>;\n\tpublic queryParams: Observable<Params>;\n\tpublic currentMarket: string;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate injector: Injector,\n\t\tprivate translateService: TranslateService,\n\t\tprivate location: Location,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate segment: SegmentPipe,\n\t) {\n\t\tthis.urlStrategy = this.configService.options.urlStrategy;\n\t\tthis._languages.next(this.configService.options.languages);\n\t\tthis.currentMarket = this.configService.options.defaultMarket;\n\t\tthis.setLanguages();\n\t\tif (this.configService.options.useLang || this.configService.options.useMarket) {\n\t\t\tthis.subscribeToRouter();\n\t\t}\n\t}\n\n\tprivate get lang(): string {\n\t\treturn this._lang;\n\t}\n\n\tprivate set lang(lang: string) {\n\t\tif (lang !== this._lang) {\n\t\t\tthis._lang = lang;\n\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\tthis._language.next(language);\n\t\t\tthis.translateService.use(lang);\n\t\t\t// console.log('RouteService.set lang', lang, this.configService.options.useLang);\n\t\t\tif (this.configService.options.useLang) {\n\t\t\t\tconst _lang: string = this._lang;\n\t\t\t\tlet path = this.location.path();\n\t\t\t\tif (path.indexOf(`/${_lang}`) === 0) {\n\t\t\t\t\tpath = path.replace(`/${_lang}`, `/${lang}`);\n\t\t\t\t} else if (path.indexOf(`/${lang}`) !== 0) {\n\t\t\t\t\tpath = `/${lang}` + path;\n\t\t\t\t}\n\t\t\t\tthis.path = path;\n\t\t\t\t// const langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get currentLang(): string {\n\t\treturn this._lang;\n\t}\n\n\tpublic pageParams$: BehaviorSubject<Params> = new BehaviorSubject({});\n\tpublic getPageParams(): Observable<Params> {\n\t\t// console.log('RouteService.getPageParams', this.router.url);\n\t\treturn this.route.queryParams.pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tswitchMap(params => {\n\t\t\t\t// console.log(params);\n\t\t\t\tconst parsed = this.parseParams(params);\n\t\t\t\tthis.pageParams$.next(parsed);\n\t\t\t\treturn of(parsed);\n\t\t\t}),\n\t\t\t// tap(params => console.log('RouteService.getPageParams', params)),\n\t\t);\n\t}\n\n\tpublic parseParams(params: any): any {\n\t\tconst parsed = {};\n\t\tObject.keys(params).forEach(k => parsed[k] = this.parse(params[k]));\n\t\t/*\n\t\tfor (const key in params) {\n\t\t\tif (typeof (params[key]) === 'string') {\n\t\t\t\tparsed[key] = this.parse(params[key]);\n\t\t\t} else {\n\t\t\t\tparsed[key] = params[key];\n\t\t\t}\n\t\t}\n\t\t*/\n\t\treturn parsed;\n\t}\n\n\tpublic serializeParams(params: any) {\n\t\tconst serialized = {};\n\t\tObject.keys(params).forEach(k => serialized[k] = this.serialize(params[k]));\n\t\treturn serialized;\n\t}\n\n\tpublic parse(base64) {\n\t\ttry {\n\t\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t\treturn JSON.parse(window.atob(base64));\n\t\t\t} else {\n\t\t\t\treturn JSON.parse(Buffer.from(base64, 'base64').toString('ascii'));\n\t\t\t}\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic serialize(object) {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\treturn window.btoa(JSON.stringify(object));\n\t\t} else {\n\t\t\treturn Buffer.from(JSON.stringify(object), 'ascii').toString('base64');\n\t\t}\n\t}\n\n\tpublic getId(): number {\n\t\treturn +this.route.snapshot.paramMap.get('id');\n\t}\n\n\tpublic getSlug(): string {\n\t\treturn this.route.snapshot.paramMap.get('slug');\n\t}\n\n\tpublic toRoute(data: any[] | string): any[] {\n\t\tconst segments = this.segment.transform(data);\n\t\tif (this.configService.options.useMarket) {\n\t\t\tconst market: string = this.currentMarket;\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\tsegments.splice(marketIndex, 0, market);\n\t\t}\n\t\tif (this.configService.options.useLang) {\n\t\t\tconst lang: string = this._lang;\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\tsegments.splice(langIndex, 0, lang);\n\t\t}\n\t\t// console.log('RouteService.toRoute', segments);\n\t\treturn segments;\n\t}\n\n\tpublic toSlug(data: any[] | string): any[] {\n\t\tconst segments = this.segment.transform(data);\n\t\tlet paths = segments.filter(x => {\n\t\t\treturn typeof x === 'string';\n\t\t});\n\t\tconst datas = segments.filter(x => {\n\t\t\treturn typeof x !== 'string';\n\t\t});\n\t\tif (this.configService.options.useMarket) {\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\tif (paths.length > marketIndex) {\n\t\t\t\tpaths[marketIndex] = '*';\n\t\t\t}\n\t\t}\n\t\tif (this.configService.options.useLang) {\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\tif (paths.length > langIndex) {\n\t\t\t\tpaths[langIndex] = '*';\n\t\t\t}\n\t\t}\n\t\tpaths = paths.join('/').replace(/\\/\\*/gi, '').split('/');\n\t\t// console.log('RouteService.toSlug', data, paths);\n\t\treturn paths.concat(datas);\n\t}\n\n\tpublic toParams(data: any): any {\n\t\treturn {\n\t\t\tdata: window.btoa(JSON.stringify(data))\n\t\t};\n\t}\n\n\tpublic toData(params: any): any {\n\t\tif (params && params.data) {\n\t\t\treturn JSON.parse(window.atob(params.data));\n\t\t}\n\t}\n\n\tpublic getParams(): Observable<ComponentFactory<PageComponent>> {\n\t\treturn this.router.events.pipe(\n\t\t\tfilter(event => event instanceof ActivationEnd),\n\t\t\tmap(() => this.route),\n\t\t\tdistinctUntilChanged(),\n\t\t\tmap(route => route.firstChild),\n\t\t\tswitchMap(route => route.params),\n\t\t\t/*\n\t\t\ttap((params) => {\n\t\t\t\t// console.log('getParams', params);\n\t\t\t}),\n\t\t\t*/\n\t\t\tconcatMap(x => {\n\t\t\t\treturn of(this.toData(x));\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic setLanguage(lang: string, silent?: boolean) {\n\t\tthis.lang = lang;\n\t\tif (this.configService.options.useLang && this.path) {\n\t\t\t// console.log('RouteService.setLanguage', this.path, this._lang, lang, silent);\n\t\t\tif (silent) {\n\t\t\t\tthis.location.replaceState(this.path);\n\t\t\t} else {\n\t\t\t\tthis.router.navigate([this.path]);\n\t\t\t}\n\t\t}\n\t}\n\n\t// PRIVATE METHODS\n\n\tprivate setLanguages() {\n\t\tthis.translateService.addLangs(this.configService.options.languages ? this.configService.options.languages.map(x => x.lang) : []);\n\t\tthis.translateService.setDefaultLang(this.configService.options.defaultLanguage);\n\t\t// this.setLanguage(this.detectLanguage(), true);\n\t\tthis.setLanguage(this.configService.options.defaultLanguage, true);\n\t\t/*\n\t\tthis.translateService.onLangChange.subscribe((e: LangChangeEvent) => {\n\t\t\t// console.log('RouteService.onLangChange', e);\n\t\t});\n\t\t*/\n\t}\n\n\tprivate subscribeToRouter() {\n\t\tthis.router.events.pipe(\n\t\t\tfilter(event => event instanceof NavigationStart)\n\t\t).subscribe((event: NavigationStart) => {\n\t\t\tconst location = this.location.normalize(event.url).split('/');\n\t\t\tif (this.configService.options.useMarket) {\n\t\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\t\tconst market = location[marketIndex];\n\t\t\t\tif (market !== this.currentMarket) {\n\t\t\t\t\tthis.currentMarket = market;\n\t\t\t\t\t// console.log('RouteService.setMarket', market, event.url);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.configService.options.useLang) {\n\t\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\t\tconst lang = location[langIndex];\n\t\t\t\tif (lang !== this._lang) {\n\t\t\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\t\t\tthis._language.next(language);\n\t\t\t\t\tthis.translateService.use(lang);\n\t\t\t\t\t// console.log('RouteService.setLang', lang, this._lang, langIndex, location, event.url);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate detectLanguage(): string {\n\t\tlet acceptLanguage: string = null;\n\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t/*\n\t\t\t// server side express engine\n\t\t\tapp.engine('html',  (_, options, callback) => {\n\t\t\t\tlet engine = ngExpressEngine({\n\t\t\t\t\tbootstrap: ServerAppModule,\n\t\t\t\t\tproviders: [ { provide: 'request', useFactory: () => options.req } ]\n\t\t\t\t});\n\t\t\t\tengine(_, options, callback)\n\t\t\t})\n\t\t\t*/\n\t\t\tconst request = this.injector.get('request');\n\t\t\tif (request) {\n\t\t\t\tacceptLanguage = request.headers['accept-language'];\n\t\t\t\tconst languages: string[] = acceptLanguage.match(/[a-zA-Z\\-]{2,10}/g) || [];\n\t\t\t\tif (languages.length > 0) {\n\t\t\t\t\tacceptLanguage = languages[0].split('-')[0];\n\t\t\t\t} else {\n\t\t\t\t\tacceptLanguage = null;\n\t\t\t\t}\n\t\t\t\t// console.log('request', request, 'acceptLanguage', acceptLanguage);\n\t\t\t}\n\t\t\t// console.log('RouteService.isPlatformServer', this.platformId, acceptLanguage);\n\t\t} else if (isPlatformBrowser(this.platformId)) {\n\t\t\tacceptLanguage = this.translateService.getBrowserLang();\n\t\t\t// console.log('RouteService.isPlatformBrowser', this.platformId, acceptLanguage);\n\t\t}\n\t\tlet detectedLanguage: string = this.configService.options.defaultLanguage;\n\t\tconst regexp: RegExp = new RegExp(`(${this.configService.options.languages ? this.configService.options.languages.map(x => x.lang).join('|') : ''})`, 'gi');\n\t\tconst match = (acceptLanguage || '').match(regexp);\n\t\tdetectedLanguage = match ? match[0] : detectedLanguage;\n\t\t// console.log('RouteService.detectLanguage', detectedLanguage);\n\t\treturn detectedLanguage;\n\t}\n\n\tpublic getTime() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\treturn (performance || Date).now();\n\t\t} else {\n\t\t\tconst time = process.hrtime();\n\t\t\treturn (time[0] * 1e9 + time[1]) / 1e6;\n\t\t}\n\t}\n\n}\n","import { Document } from '../models/document';\nimport { Feature } from '../models/feature';\nimport { Image } from '../models/image';\nimport { Taxonomy } from '../models/taxonomy';\n\nexport class PageMeta {\n\tappId?: string;\n\tauthor?: string;\n\tcanonical?: string;\n\tdescription?: string;\n\tkeywords?: string;\n\tlocale?: string;\n\trobots?: string;\n\ttitle?: string;\n\ttype?: string;\n}\n\nexport class PageIndex implements Document {\n\tabstract?: string;\n\tid: number | string;\n\timages?: Image[];\n\tname?: string;\n\trelationType?: number | string;\n\tslug?: string;\n\ttitle?: string;\n\ttype?: number | string;\n\turl?: string;\n\n\tconstructor(options?: PageIndex) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n}\n\nexport class PageRelation implements Document {\n\tid: number | string;\n\tpage: Page;\n\ttype?: number | string;\n}\n\nexport class Page implements Document {\n\tabstract?: string;\n\tactive?: boolean;\n\tcomponent?: number | string;\n\tdescription?: string;\n\tfeatures?: Feature[];\n\tid: number | string;\n\timages?: Image[];\n\tmeta?: PageMeta = {};\n\tname?: string;\n\trelated?: any[];\n\tslug?: string;\n\ttaxonomies?: Taxonomy[];\n\ttitle?: string;\n\ttype?: number | string;\n\turl?: string;\n\n\tconstructor(options?: Page) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t\tif (options.related) {\n\t\t\t\tconst related: PageIndex[] = options.related.map((x: PageRelation) => {\n\t\t\t\t\tconst item = new PageIndex(x.page);\n\t\t\t\t\titem.relationType = x.type;\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\tthis.related = related;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFeature?(id: number): Feature {\n\t\treturn this.features.find(x => x.id === id) || null;\n\t}\n\n\tgetFeatures?(type: number, n: number[]): Feature[] {\n\t\treturn this.features ? this.features.filter((x: Feature, i: number) => (\n\t\t\tn.indexOf(Number(x.id)) !== -1 && x.type === type\n\t\t)).sort((a: Feature, b: Feature) => a.type - b.type) : [];\n\t}\n\n\tgetFeaturesByTypes?(type: number[]): Feature[] {\n\t\treturn this.features ? this.features.filter((x: Feature) => (\n\t\t\ttype.indexOf(Number(x.type)) !== -1\n\t\t)) : [];\n\t}\n\n\tgetGroupedFeaturesByTypes?(type: number[]): any {\n\t\tconst groups = {};\n\t\ttype.forEach(type => {\n\t\t\tconst group = groups[type] || { features: [] };\n\t\t\tif (this.features) {\n\t\t\t\tthis.features.forEach((x: Feature) => {\n\t\t\t\t\tif (Number(x.type) === type) {\n\t\t\t\t\t\tgroup.features.push(x);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tgroups[type] = group;\n\t\t});\n\t\t/*\n\t\tif (this.features) {\n\t\t\tthis.features.forEach((x: Feature) => {\n\t\t\t\tif (type.indexOf(Number(x.type)) !== -1) {\n\t\t\t\t\tconst group = groups[x.type] || { features: [] };\n\t\t\t\t\tgroup.features.push(x);\n\t\t\t\t\tgroups[x.type] = group;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t*/\n\t\treturn groups;\n\t}\n\n\n}\n","\nimport { isPlatformBrowser } from '@angular/common';\nimport { Component, Injector, Input, PLATFORM_ID } from '@angular/core';\nimport { NavigationEnd, Params, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { RouteService } from '../routes/route.service';\nimport { Page } from './page';\n\nexport interface PageInit {\n\tPageInit(): void;\n}\n\n@Component({\n\tselector: 'core-page',\n\ttemplate: `<h1>I'm a default view!</h1>`,\n})\n\nexport class PageComponent extends DisposableComponent {\n\n\t@Input() page: Page;\n\t@Input() params: Observable<Params>;\n\t@Input() queryParams: Observable<Params>;\n\n\tget platformId(): string {\n\t\treturn this.injector.get(PLATFORM_ID) as string;\n\t}\n\n\tget routeService(): RouteService {\n\t\treturn this.injector.get(RouteService);\n\t}\n\n\tget router(): Router {\n\t\treturn this.injector.get(Router);\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper();\n\t\tthis.scrollToTop();\n\t}\n\n\t// !!! Scroll to top on page change\n\tprivate scrollToTop(): void {\n\t\t// !!! PLATFORM_ID dependancy manually activated\n\t\t// const platformId: string = RouteService.injector.get(PLATFORM_ID) as string;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t// !!! Router dependancy manually activated\n\t\t\t// const router = RouteService.injector.get(Router);\n\t\t\tthis.router.events.subscribe((e) => {\n\t\t\t\tif (!(e instanceof NavigationEnd)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twindow.scrollTo(0, 0);\n\t\t\t});\n\t\t}\n\t}\n\n\tgetId(): number | string {\n\t\treturn this.routeService.getId() || (this.page ? this.page.id : 0);\n\t}\n\n\tgetSlug(): string {\n\t\treturn this.routeService.getSlug() || (this.page ? this.page.slug : '');\n\t}\n\n}\n","import { Component, Injector, ViewEncapsulation } from '@angular/core';\nimport { PageComponent } from './page.component';\n\n@Component({\n\tselector: 'page-not-found-component',\n\ttemplateUrl: './page-not-found.component.html',\n\tstyleUrls: ['./page-not-found.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\n\nexport class PageNotFoundComponent extends PageComponent {\n\n\tpublic url: string;\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t\tthis.url = this.router.url;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class HttpStatusCodeService {\n\n\tprivate statusCode: number;\n\tprivate redirectUrl: string;\n\n\tconstructor() {\n\t\tthis.statusCode = 200;\n\t\tthis.redirectUrl = null;\n\t}\n\n\tpublic setStatusCode(statusCode: number, redirectUrl: string = null) {\n\t\tthis.statusCode = statusCode;\n\t\tthis.redirectUrl = redirectUrl;\n\t}\n\n\tpublic getStatusCode(): number {\n\t\treturn (this.statusCode === 309 ? 301 : this.statusCode);\n\t}\n\n\tpublic getRedirectUrl(): string {\n\t\treturn this.redirectUrl;\n\t}\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ApiService } from '../api/api.service';\nimport { Identity } from './identity';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class IdentityService<T extends Identity> extends ApiService<T> {\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t}\n\n\tget collection(): string {\n\t\treturn '/api/identity';\n\t}\n\n\tgetList(): Observable<T[]> {\n\t\treturn this.get();\n\t}\n\n\tgetDetailByIdNo404<Data>(id: number | string): Observable<T> {\n\t\treturn this.get({ id }).pipe(\n\t\t\tmap((identities: T[]) => identities[0]),\n\t\t);\n\t}\n\n\tgetDetailById(id: number | string): Observable<T> {\n\t\treturn this.get({ id });\n\t}\n\n\tadd(identity: T) {\n\t\treturn this.post(identity);\n\t}\n\n\tupdate(identity: T) {\n\t\treturn this.put(identity);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { Entity } from './entity';\nimport { IdentityService } from './identity.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class EntityService<T extends Entity> extends IdentityService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/entity';\n\t}\n\n\tgetDetailByName(name: string): Observable<T[]> {\n\t\tif (!name.trim()) {\n\t\t\treturn of([]);\n\t\t}\n\t\treturn this.get({ name });\n\t}\n\n}\n","\nexport enum ImageType {\n\tDefault = 1,\n\tGallery = 2,\n\tShare = 3,\n}\n\nexport class Image {\n\tid: number | string;\n\turl: string;\n\ttitle?: string;\n\tdescription?: string;\n\tfileName?: string;\n\ttype?: ImageType;\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\n\nexport class LinkDefinition {\n\thref?: string;\n\tid?: string;\n\trel?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class LinkService {\n\n\tconstructor(\n\t\t@Inject(DOCUMENT) private doc: any,\n\t) { }\n\n\taddTag(definition: LinkDefinition) {\n\t\tconst element = this.doc.createElement(`link`);\n\t\tthis.updateElementDefinition(element, definition);\n\t\tthis.doc.head.appendChild(element);\n\t}\n\n\tgetTag(selector: string) {\n\t\tconst element = this.doc.querySelector(`link${selector}`);\n\t\treturn element;\n\t}\n\n\tupdateTag(selector: string, definition: LinkDefinition) {\n\t\tconst element = this.doc.querySelector(`link${selector}`);\n\t\tthis.updateElementDefinition(element, definition);\n\t}\n\n\tremoveTag(selector: string) {\n\t\tconst element = this.doc.querySelector(`link${selector}`);\n\t\telement.remove();\n\t}\n\n\tupdateElementDefinition(element: HTMLLinkElement, definition: LinkDefinition) {\n\t\tthis.updateElementAttribute(element, 'href', definition.href);\n\t\tthis.updateElementAttribute(element, 'id', definition.id);\n\t\tthis.updateElementAttribute(element, 'rel', definition.rel);\n\t}\n\n\tupdateElementAttribute(element: HTMLLinkElement, attribute: string, value: any) {\n\t\tif (value) {\n\t\t\telement.setAttribute(attribute, value);\n\t\t} else {\n\t\t\telement.removeAttribute(attribute);\n\t\t}\n\t}\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Meta, MetaDefinition, Title } from '@angular/platform-browser';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { HttpStatusCodeService } from '../http/http-status-code.service';\nimport { EntityService } from '../models/entity.service';\nimport { Image, ImageType } from '../models/image';\nimport { LinkDefinition, LinkService } from './link.service';\nimport { Page } from './page';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class PageService extends EntityService<Page> {\n\n\tget collection(): string {\n\t\treturn '/api/page';\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t\tprivate titleService: Title,\n\t\tprivate metaService: Meta,\n\t\tprivate linkService: LinkService,\n\t\tprivate statusCodeService: HttpStatusCodeService,\n\t) {\n\t\tsuper(injector);\n\t}\n\n\tgetStatePageBySlug(slug: string): Observable<Page> {\n\t\tslug = slug.split('?')[0];\n\t\tif (slug.indexOf('/') === 0) {\n\t\t\tslug = slug.substr(1);\n\t\t}\n\t\treturn this.stateGet(`?slug=/${slug}`).pipe(\n\t\t\tmap(x => {\n\t\t\t\tx = new Page(Array.isArray(x) ? x.find(x => x.slug === `/${slug}`) : x);\n\t\t\t\t// console.log('PageService.getStatePageBySlug', x);\n\t\t\t\treturn x;\n\t\t\t}),\n\t\t\tcatchError(error => {\n\t\t\t\t// console.log('getStatePageBySlug.error', error);\n\t\t\t\tthis.statusCodeService.setStatusCode(error.status, error.error ? error.error.redirectUrl : null);\n\t\t\t\treturn of(null);\n\t\t\t}),\n\t\t);\n\t}\n\n\tgetStatePageById(id: number | string): Observable<Page> {\n\t\treturn this.stateGet(`/${id}`).pipe(\n\t\t\t// tap(x => console.log('PageService.getPageById', id, x)),\n\t\t\tmap(x => new Page(x)),\n\t\t\tcatchError(error => {\n\t\t\t\tthis.statusCodeService.setStatusCode(error.status, error.error ? error.error.redirectUrl : null);\n\t\t\t\treturn of(null);\n\t\t\t})\n\t\t);\n\t}\n\n\tgetPageById(id: number | string): Observable<Page> {\n\t\treturn this.get(`/${id}`).pipe(\n\t\t\t// tap(x => console.log('PageService.getPageById', id, x)),\n\t\t\tmap(x => new Page(x)),\n\t\t\tcatchError(error => {\n\t\t\t\tthis.statusCodeService.setStatusCode(error.status, error.error ? error.error.redirectUrl : null);\n\t\t\t\treturn of(null);\n\t\t\t})\n\t\t);\n\t}\n\n\tgetPageBySlug(slug: string): Observable<Page> {\n\t\tslug = slug.split(';')[0];\n\t\t// console.log('PageService.getPageBySlug', slug);\n\t\treturn this.get(`?slug=/${slug}`).pipe(\n\t\t\tmap(x => new Page(x)),\n\t\t\t// tap(x => this.logger.log(`found pages matching \"${slug}\"`))\n\t\t\t// tap(x => console.log('PageService.getPageBySlug', x, slug))\n\t\t\tcatchError(error => {\n\t\t\t\t// console.log('PageService.getPageBySlug.error', error);\n\t\t\t\tthis.statusCodeService.setStatusCode(error.status, error.error ? error.error.redirectUrl : null);\n\t\t\t\treturn of(null);\n\t\t\t})\n\t\t);\n\t}\n\n\taddOrUpdateMetaData(page: Page) {\n\t\t// console.log('PageService.addOrUpdateMetaData', page);\n\t\tif (!page) {\n\t\t\treturn;\n\t\t}\n\t\t// !!!\n\t\t// const fbAppId: string = this.config.plugins && this.config.plugins.facebook ? this.config.plugins.facebook.appId.toString() : '';\n\t\tthis.titleService.setTitle(page.title);\n\t\tthis.addOrUpdateMeta({ property: 'og:title', content: page.title });\n\t\tthis.addOrUpdateMeta({ property: 'og:image', content: this.getSocialImage(page).url });\n\t\tthis.addOrUpdateMeta({ property: 'og:image:width', content: '1200' });\n\t\tthis.addOrUpdateMeta({ property: 'og:image:height', content: '630' });\n\t\t// this.addOrUpdateMeta({ property: 'fb:app_id', content: fbAppId });\n\t\tthis.addOrUpdateMeta({ property: 'og:url', content: page.url || this.origin });\n\t\tconst meta = page.meta;\n\t\tif (meta) {\n\t\t\tthis.addOrUpdateMeta({ name: 'description', content: meta.description || 'Servizio di qualit senza costi aggiuntivi con i convenienti pacchetti viaggio Eurospin. Prenota comodamente online!' });\n\t\t\tthis.addOrUpdateMeta({ name: 'keywords', content: meta.keywords || 'viaggi,viaggi eurospin' });\n\t\t\tthis.addOrUpdateMeta({ name: 'robots', content: meta.robots || 'index,follow' });\n\t\t\tthis.addOrUpdateMeta({ property: 'og:locale', content: meta.locale || 'it_IT' });\n\t\t\tthis.addOrUpdateMeta({ property: 'og:type', content: meta.type || 'article' });\n\t\t\tthis.addOrUpdateMeta({ property: 'og:author', content: meta.author || 'Eurospin Viaggi' });\n\t\t\tthis.addOrUpdateLink({ rel: 'canonical', href: meta.canonical || (this.origin.indexOf(page.url) === 0 ? null : page.url) });\n\t\t}\n\t\t// console.log('PageOutletComponent.addOrUpdateMetaData', page.id, page.title, page.url);\n\t}\n\n\tprivate getSocialImage(page: Page): Image {\n\t\tconst image = page.images ? (\n\t\t\tpage.images.find(i => i.type === ImageType.Share) ||\n\t\t\tpage.images.find(i => i.type === ImageType.Default) ||\n\t\t\tpage.images.find(i => i.type === ImageType.Gallery)\n\t\t) : null;\n\t\treturn image || {\n\t\t\turl: 'https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png'\n\t\t} as Image;\n\t}\n\n\tprivate addOrUpdateMeta(definition: MetaDefinition) {\n\t\tconst selector = definition.name ? `name=\"${definition.name}\"` : `property=\"${definition.property}\"`;\n\t\tif (this.metaService.getTag(selector)) {\n\t\t\tif (definition.content) {\n\t\t\t\tthis.metaService.updateTag(definition, selector);\n\t\t\t} else {\n\t\t\t\tthis.metaService.removeTag(selector);\n\t\t\t}\n\t\t} else if (definition.content) {\n\t\t\tthis.metaService.addTag(definition);\n\t\t}\n\t}\n\n\tprivate addOrUpdateLink(definition: LinkDefinition) {\n\t\tconst selector = definition.id ? `#${definition.id}` : `[rel=\"${definition.rel}\"]`;\n\t\tif (this.linkService.getTag(selector)) {\n\t\t\tif (definition.href) {\n\t\t\t\tthis.linkService.updateTag(selector, definition);\n\t\t\t} else {\n\t\t\t\tthis.linkService.removeTag(selector);\n\t\t\t}\n\t\t} else if (definition.href) {\n\t\t\tthis.linkService.addTag(definition);\n\t\t}\n\t}\n\n}\n","import { Component, ComponentFactory, ComponentFactoryResolver, Inject, ViewContainerRef } from '@angular/core';\nimport { ActivatedRoute, ActivatedRouteSnapshot, Router } from '@angular/router';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { RouteService } from '../routes/route.service';\nimport { PageNotFoundComponent } from './page-not-found.component';\nimport { PageComponent } from './page.component';\nimport { PageService } from './page.service';\n\n@Component({\n\tselector: 'page-outlet',\n\ttemplate: '',\n})\n\nexport class PageOutletComponent extends DisposableComponent {\n\n\tprivate factory: ComponentFactory<PageComponent>;\n\n\tconstructor(\n\t\t@Inject(ViewContainerRef) private viewContainerRef: ViewContainerRef,\n\t\tprivate router: Router,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate routeService: RouteService,\n\t\tprivate pageService: PageService,\n\t) {\n\t\tsuper();\n\t\t// !!! keep -> Avoid PageOutlet Route Caching for different routes\n\t\tthis.router.routeReuseStrategy.shouldReuseRoute = () => {\n\t\t\treturn false;\n\t\t};\n\t\tthis.setSnapshot(this.route.snapshot);\n\t}\n\n\tsetSnapshot(snapshot: ActivatedRouteSnapshot): void {\n\t\tthis.routeService.params = this.routeService.toData(snapshot.params);\n\t\tthis.routeService.queryParams = this.routeService.toData(snapshot.queryParams);\n\t\tconst data = snapshot.data;\n\t\tconst params = this.routeService.params;\n\t\tconst queryParams = this.routeService.queryParams;\n\t\tlet component: any = PageNotFoundComponent;\n\t\tif (data.pageResolver) {\n\t\t\tcomponent = data.pageResolver.component;\n\t\t\tthis.routeService.page = data.pageResolver.page;\n\t\t\tconst factory: ComponentFactory<PageComponent> = this.componentFactoryResolver.resolveComponentFactory(component);\n\t\t\tthis.factory = factory;\n\t\t\tthis.viewContainerRef.clear();\n\t\t\tconst componentRef = this.viewContainerRef.createComponent(this.factory);\n\t\t\tconst instance = componentRef.instance;\n\t\t\tinstance.page = data.pageResolver.page;\n\t\t\tinstance.params = params;\n\t\t\tinstance.queryParams = queryParams;\n\t\t\tif (typeof instance['PageInit'] === 'function') {\n\t\t\t\tinstance['PageInit']();\n\t\t\t}\n\t\t\tif (data.pageResolver.page) {\n\t\t\t\tconst config = this.router.config.slice();\n\t\t\t\tconst slug = data.pageResolver.page.slug;\n\t\t\t\tif (slug) {\n\t\t\t\t\tconfig.push({\n\t\t\t\t\t\tpath: slug.indexOf('/') === 0 ? slug.substr(1) : slug, component: data.pageResolver.component,\n\t\t\t\t\t});\n\t\t\t\t\tthis.router.resetConfig(config);\n\t\t\t\t}\n\t\t\t\tthis.pageService.addOrUpdateMetaData(this.routeService.page);\n\t\t\t}\n\t\t}/* else {\n\t\t\t// console.log('PageOutletComponent.setSnapshot 404', data);\n\t\t}*/\n\t}\n\n}\n","import { Type } from '@angular/core';\nimport { ConfigService } from '../config/config.service';\nimport { Page } from './page';\nimport { PageNotFoundComponent } from './page-not-found.component';\nimport { PageComponent } from './page.component';\n\nexport class PageResolver {\n\n\tpublic component: Type<PageComponent> = PageComponent;\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t\tpublic page: Page,\n\t) {\n\t\tif (page && this.configService.options.pages) {\n\t\t\tthis.component = this.configService.options.pages[page.component] || this.configService.options.defaultPage;\n\t\t} else {\n\t\t\tthis.component = this.configService.options.notFoundPage || PageNotFoundComponent;\n\t\t}\n\t}\n}\n","\nimport { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, Resolve, RouterStateSnapshot } from '@angular/router';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ConfigService } from '../config/config.service';\nimport { RouteService } from '../routes/route.service';\nimport { Page } from './page';\nimport { PageResolver } from './page-resolver';\nimport { PageService } from './page.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class PageResolverService implements Resolve<PageResolver> {\n\n\tpublic events$: BehaviorSubject<PageResolver> = new BehaviorSubject<PageResolver>(null);\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t\tprivate pageService: PageService,\n\t\tprivate routeService: RouteService,\n\t) { }\n\n\tpageToPageResolver(page: Page): PageResolver {\n\t\tconst pageResolver = new PageResolver(this.configService, page);\n\t\tthis.events$.next(pageResolver);\n\t\treturn pageResolver;\n\t}\n\n\tresolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<PageResolver> {\n\t\tif (route.params && route.params.id) {\n\t\t\treturn this.getPageById(route.params.id);\n\t\t} else {\n\t\t\tconst paths = route.url.filter(x => {\n\t\t\t\treturn x.path;\n\t\t\t}).map(x => {\n\t\t\t\treturn x.path;\n\t\t\t});\n\t\t\tconst slug = this.routeService.toSlug(paths).join('/');\n\t\t\treturn this.getPageBySlug(slug);\n\t\t}\n\t}\n\n\tgetPageById(id: number | string): Observable<PageResolver> {\n\t\t// console.log('PageResolverService.getPageById', id);\n\t\treturn this.pageService.getPageById(id).pipe(\n\t\t\tmap(page => this.pageToPageResolver(page))\n\t\t);\n\t}\n\n\tgetPageBySlug(slug: string): Observable<PageResolver> {\n\t\t// console.log('PageResolverService.getPageBySlug', slug);\n\t\treturn this.pageService.getStatePageBySlug(slug).pipe(\n\t\t\tmap(page => this.pageToPageResolver(page))\n\t\t);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, CanDeactivate, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class PageGuard implements CanActivate, CanDeactivate<any> {\n\n\tprivate match(route: ActivatedRouteSnapshot): boolean {\n\t\tconst lastPath = route.url.length ? route.url[route.url.length - 1].path : '';\n\t\tconst pattern = /\\.([0-9a-z]+)(?:[\\?#]|$)/i;\n\t\tconst match = (lastPath).match(pattern);\n\t\tif (match !== null) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tcanActivate(\n\t\troute: ActivatedRouteSnapshot,\n\t\tstate: RouterStateSnapshot\n\t): Observable<boolean> | Promise<boolean> | boolean {\n\t\treturn this.match(route);\n\t}\n\n\tcanDeactivate(\n\t\tcomponent: any,\n\t\tcurrentRoute: ActivatedRouteSnapshot,\n\t\tcurrentState: RouterStateSnapshot,\n\t\tnextState?: RouterStateSnapshot\n\t): Observable<boolean> | Promise<boolean> | boolean {\n\t\treturn this.match(currentRoute);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, CanDeactivate, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class StaticGuard implements CanActivate, CanDeactivate<any> {\n\n\tprivate match(route: ActivatedRouteSnapshot): boolean {\n\t\tconst lastPath = route.url[route.url.length - 1].path;\n\t\t// console.log('StaticGuard.CanActivate', e, lastPath);\n\t\tconst pattern = /\\.([0-9a-z]+)(?:[\\?#]|$)/i;\n\t\tconst match = (lastPath).match(pattern);\n\t\tif (match !== null) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tcanActivate(\n\t\troute: ActivatedRouteSnapshot,\n\t\tstate: RouterStateSnapshot\n\t): Observable<boolean> | Promise<boolean> | boolean {\n\t\treturn this.match(route);\n\t}\n\n\tcanDeactivate(\n\t\tcomponent: any,\n\t\tcurrentRoute: ActivatedRouteSnapshot,\n\t\tcurrentState: RouterStateSnapshot,\n\t\tnextState?: RouterStateSnapshot\n\t): Observable<boolean> | Promise<boolean> | boolean {\n\t\treturn this.match(currentRoute);\n\t}\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PageNotFoundComponent } from './pages/page-not-found.component';\nimport { PageOutletComponent } from './pages/page-outlet.component';\nimport { PageResolverService } from './pages/page-resolver.service';\nimport { PageGuard } from './pages/page.guard';\nimport { StaticGuard } from './pages/static.guard';\n\nconst routes: Routes = [\n\t{ path: 'page/:id', component: PageOutletComponent, resolve: { pageResolver: PageResolverService } },\n\t{ path: '**', component: PageOutletComponent, resolve: { pageResolver: PageResolverService }, canActivate: [PageGuard] },\n\t{ path: '**', component: PageNotFoundComponent, canActivate: [StaticGuard] },\n];\n\n@NgModule({\n\timports: [\n\t\tRouterModule.forChild(routes),\n\t],\n\texports: [\n\t\tRouterModule,\n\t],\n})\n\nexport class CoreRouting { }\n","export class ControlBaseOptions<T> {\n\tvalue?: T;\n\tkey?: string;\n\tlabel?: string;\n\tplaceholder?: string;\n\t// order\n\torder?: number;\n\tschema?: string;\n\ttype?: string;\n\t// validators\n\tmin?: number;\n\tmax?: number;\n\trequired?: boolean;\n\trequiredTrue?: boolean;\n\temail?: boolean;\n\tminLength?: number;\n\tmaxLength?: number;\n\tpattern?: string | RegExp;\n\tmatch?: string;\n\t// options\n\treverse?: boolean;\n\toptions?: { key: string, value: string }[];\n\t// state\n\tdisabled?: boolean;\n\t// formatters\n\tstep?: number;\n\tformat?: string;\n}\n\nexport class ControlBase<T> {\n\t// export class ControlBase<T> implements ControlValueAccessor {\n\n\tstatic uid: number = 0;\n\n\tprivate _originalValue: T;\n\tvalue: T;\n\tkey: string;\n\t//\n\tlabel: string;\n\tplaceholder: string;\n\t// order\n\torder: number;\n\tschema: string;\n\ttype: string;\n\t// validators\n\tmin: number;\n\tmax: number;\n\trequired: boolean;\n\trequiredTrue: boolean;\n\temail: boolean;\n\tminLength: number;\n\tmaxLength: number;\n\tpattern: string | RegExp;\n\tmatch: string;\n\t// options\n\treverse: boolean;\n\toptions: { key: string, value: string }[];\n\t// state\n\tdisabled: boolean;\n\t// formatters\n\tstep: number;\n\tformat: string;\n\n\tconstructor(options: ControlBaseOptions<T> = {}) {\n\t\tthis._originalValue = options.value;\n\t\tthis.value = options.value;\n\t\tthis.key = options.key;\n\t\t//\n\t\tconst name = `${options.key || 'Control'} ${++ControlBase.uid}`;\n\t\tthis.label = options.label || name;\n\t\tthis.placeholder = options.placeholder || name;\n\t\t// order\n\t\tthis.order = options.order === undefined ? 1 : options.order;\n\t\tthis.schema = options.schema || 'text';\n\t\tthis.type = options.type || this.schema;\n\t\t// validators\n\t\tthis.min = options.min || null;\n\t\tthis.max = options.max || null;\n\t\tthis.required = !!options.required;\n\t\tthis.requiredTrue = !!options.requiredTrue;\n\t\tthis.email = !!options.email;\n\t\tthis.minLength = options.minLength || null;\n\t\tthis.maxLength = options.maxLength || null;\n\t\tthis.pattern = options.pattern || null;\n\t\tthis.match = options.match || null;\n\t\t// options\n\t\tthis.reverse = !!options.reverse;\n\t\tthis.options = options.options || [];\n\t\t// state\n\t\tthis.disabled = !!options.disabled;\n\t\t// formatters\n\t\tthis.step = options.step || null;\n\t\tthis.format = options.format || null;\n\t}\n\n\t/*\n\t//\n\tcontrol?: FormControl;\n\tinnervalue: any;\n\tblurred: boolean = false;\n\n\tfocus(): void {\n\t\t// console.log('ControlBase.focus', this.control.value);\n\t\tthis.blurred = false;\n\t\tif (this.innervalue) {\n\t\t\tthis.control.patchValue(this.innervalue, { emitEvent: false });\n\t\t}\n\t}\n\n\tblur(): void {\n\t\t// console.log('ControlBase.blur', this.control.value);\n\t\tthis.blurred = true;\n\t\tif (this.innervalue) {\n\t\t\tthis.control.patchValue(this.innervalue + ' H', { emitEvent: false });\n\t\t}\n\t}\n\n\tsetControl(control: FormControl): void {\n\t\tthis.control = control;\n\t\tthis.innervalue = control.value;\n\t\tcontrol.valueChanges.subscribe(value => {\n\t\t\t// console.log('ControlBase.control.valueChanges', value);\n\t\t\tif (this.blurred) {\n\t\t\t\tcontrol.patchValue(value + ' H', { emitEvent: false });\n\t\t\t} else {\n\t\t\t\tthis.innervalue = value;\n\t\t\t}\n\t\t});\n\t\t// this.blur();\n\t}\n\n\tformatValue(): string {\n\t\t// console.log('ControlBase.formatValue', this, this.control);\n\t\treturn 'aaa';\n\t}\n\n\tparseValue(e: Event) {\n\t\t// console.log('ControlBase.parseValue', e);\n\t}\n\n\tprivate onChange = (value: any) => { };\n\n\tprivate onTouched = () => { };\n\n\twriteValue(value: any): void {\n\t\t// console.log('ControlBase.writeValue', value);\n\t\t// this.formattedValue = value;\n\t\tthis.onChange(this.value);\n\t}\n\n\tregisterOnChange(fn: (value: any) => void): void {\n\t\t// console.log('ControlBase.registerOnChange', fn);\n\t\tthis.onChange = fn;\n\t\t// this.onChange('my new value');\n\t}\n\n\tregisterOnTouched(fn: () => void): void {\n\t\t// console.log('ControlBase.registerOnTouched', fn);\n\t\tthis.onTouched = fn;\n\t}\n\n\tsetDisabledState?(isDisabled: boolean): void {\n\t\t// console.log('ControlBase.setDisabledState', isDisabled);\n\t\tthis.disabled = isDisabled;\n\t}\n\t*/\n\n}\n","import { Component, forwardRef, Input, Renderer2 } from '@angular/core';\nimport { AbstractControl, ControlValueAccessor, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ControlBase } from './control-base';\n\n@Component({\n\tselector: 'core-control',\n\ttemplateUrl: './control.component.html',\n\tstyleUrls: ['./control.component.scss'],\n\tproviders: [{\n\t\tprovide: NG_VALUE_ACCESSOR,\n\t\tuseExisting: forwardRef(() => ControlComponent),\n\t\tmulti: true,\n\t}],\n})\nexport class ControlComponent implements ControlValueAccessor {\n\t@Input() control: ControlBase<any>;\n\t@Input() form: FormGroup;\n\n\tprivate element: any;\n\tprivate blurred: boolean;\n\tprivate innervalue: any;\n\n\treveal: { checked: boolean } = { checked: false };\n\n\tconstructor(\n\t\tprivate renderer: Renderer2\n\t) { }\n\n\tget controlRef(): AbstractControl {\n\t\t// console.log('controlRef', this.control.key, this.form.controls);\n\t\treturn this.form.controls[this.control.key];\n\t}\n\n\tget isValid() { return this.controlRef.valid; }\n\n\t// ControlValueAccessor\n\n\tgetFormattedValue(): any {\n\t\t// console.log('ControlComponent.getFormattedValue', this.controlRef.value);\n\t\treturn this.controlRef.value;\n\t}\n\n\tonInput($event): void {\n\t\tthis.element = $event.target;\n\t\tthis.onChange(this.element.value);\n\t}\n\n\tonFocus($event): void {\n\t\tthis.blurred = false;\n\t\tthis.element = $event.target;\n\t\t// this.element.value = this.controlRef.value;\n\t\tthis.renderer.setProperty(this.element, 'value', this.controlRef.value);\n\t\t// console.log('ControlComponent.onFocus', this.controlRef);\n\t}\n\n\tonBlur($event): void {\n\t\tthis.blurred = true;\n\t\tthis.element = $event.target;\n\t\t// this.element.value = this.controlRef.value;\n\t\tthis.renderer.setProperty(this.element, 'value', this.controlRef.value);\n\t\t// console.log('ControlComponent.onBlur', this.controlRef);\n\t\t/*\n\t\tif (this.innervalue) {\n\t\t\tthis.control.patchValue(this.innervalue + ' H', { emitEvent: false });\n\t\t}\n\t\t*/\n\t}\n\n\tprivate onChange = (value: any) => { };\n\n\tprivate onTouched = () => { };\n\n\tprivate formatValue(value: any): void {\n\t\t// console.log('ControlComponent.formatValue', value);\n\t\tthis.renderer.setProperty(this.element, 'value', value);\n\t\t// console.log('ControlEditableComponent.writeValue', value);\n\t}\n\n\tprivate parseValue(value: any) {\n\t\t// console.log('ControlComponent.parseValue', value);\n\t\tconst parsed = this.innervalue;\n\t\tthis.onChange(parsed);\n\t}\n\n\twriteValue(value: any): void {\n\t\tthis.formatValue(value);\n\t}\n\n\tregisterOnChange(fn: any): void {\n\t\tthis.onChange = fn;\n\t\t// console.log('ControlEditableComponent.registerOnChange');\n\t}\n\n\tregisterOnTouched(fn: any): void {\n\t\tthis.onTouched = fn;\n\t\t// console.log('ControlEditableComponent.registerOnTouched');\n\t}\n\n\tsetDisabledState(isDisabled: boolean): void {\n\t\t// const node = this.textarea.nativeElement;\n\t\t/*\n\t\tif (isDisabled) {\n\t\t\tthis.renderer.addClass(this.element, 'disabled');\n\t\t} else {\n\t\t\tthis.renderer.removeClass(this.element, 'disabled');\n\t\t}\n\t\t// console.log('ControlEditableComponent.setDisabledState', isDisabled);\n\t\t*/\n\t}\n\n}\n","import { FormControl, FormGroup, ValidatorFn } from '@angular/forms';\n\nexport function __matchValidator(key: string, otherKey: string, group: FormGroup): ValidatorFn {\n\treturn (control: FormControl) => {\n\n\t\t// const control = group.controls[key];\n\t\tconst otherControl = group.controls[otherKey];\n\n\t\t// console.log(control.touched, otherControl.touched);\n\n\t\tif (control.touched && otherControl.touched) {\n\t\t\tconst match = control.value === otherControl.value;\n\t\t\tif (!match && control.valid && otherControl.valid) {\n\t\t\t\tcontrol.setErrors({\n\t\t\t\t\tmatch: otherKey\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tmatch: otherKey + ' != ' + key\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (match && control.hasError('match')) {\n\t\t\t\tcontrol.setErrors(null);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n}\n\nexport function matchValidator(otherKey: string, reverse: boolean = false, group: FormGroup): ValidatorFn {\n\treturn (control: FormControl) => {\n\t\tconst otherControl = group.controls[otherKey];\n\n\t\tconst value = control.value;\n\n\t\t// value not equal\n\t\tif (otherControl && value !== otherControl.value && !reverse) {\n\t\t\treturn {\n\t\t\t\tmatch: true,\n\t\t\t};\n\t\t}\n\n\t\t// value equal and reverse\n\t\tif (otherControl && value === otherControl.value && reverse) {\n\t\t\tif (otherControl.errors) {\n\t\t\t\tdelete otherControl.errors['match'];\n\t\t\t\tif (!Object.keys(otherControl.errors).length) {\n\t\t\t\t\totherControl.setErrors(null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// value not equal and reverse\n\t\tif (otherControl && value !== otherControl.value && reverse) {\n\t\t\totherControl.setErrors({\n\t\t\t\tmatch: true,\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t};\n}\n\n/*\nvalidate(control: AbstractControl): { [key: string]: any } {\n\t\t// self value\n\t\tconst value = control.value;\n\n\t\t// control value\n\t\tconst input = control.root.get(this.match);\n\n\t\t// value not equal\n\t\tif (input && value !== input.value && !this.isReverse) {\n\t\t\treturn {\n\t\t\t\tmatch: true,\n\t\t\t};\n\t\t}\n\n\t\t// value equal and reverse\n\t\tif (input && value === input.value && this.isReverse) {\n\t\t\tdelete input.errors['match'];\n\t\t\tif (!Object.keys(input.errors).length) {\n\t\t\t\tinput.setErrors(null);\n\t\t\t}\n\t\t}\n\t\t// value not equal and reverse\n\t\tif (input && value !== input.value && this.isReverse) {\n\t\t\tinput.setErrors({\n\t\t\t\tmatch: true,\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t}\n*/\n/*\nstatic isValidString(control: FormControl) {\n\tif (!control.value || typeof control.value !== 'string') {\n\t\treturn {isNotValidString: true};\n\t}\n\treturn null;\n}\n\nstatic isValidName(control: FormControl) {\n\tif (control.valid && control.value !== 'John Doe') {\n\t\treturn {isNotValidName: true};\n\t}\n\treturn null;\n}\n*/\n","import { Injectable } from '@angular/core';\nimport { FormControl, FormGroup, ValidatorFn, Validators } from '@angular/forms';\nimport { ControlBase } from './control-base';\nimport { matchValidator } from './match.validator';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ControlService {\n\n\tgetValidators(control: ControlBase<any>, group: FormGroup): ValidatorFn[] {\n\t\tconst validators: ValidatorFn[] = [];\n\t\tif (control.min) {\n\t\t\tvalidators.push(Validators.min(control.min));\n\t\t}\n\t\tif (control.max) {\n\t\t\tvalidators.push(Validators.max(control.max));\n\t\t}\n\t\tif (control.required) {\n\t\t\tvalidators.push(Validators.required);\n\t\t}\n\t\tif (control.requiredTrue) {\n\t\t\tvalidators.push(Validators.requiredTrue);\n\t\t}\n\t\tif (control.email) {\n\t\t\tvalidators.push(Validators.email);\n\t\t}\n\t\tif (control.minLength) {\n\t\t\tvalidators.push(Validators.minLength(control.minLength));\n\t\t}\n\t\tif (control.maxLength) {\n\t\t\tvalidators.push(Validators.maxLength(control.maxLength));\n\t\t}\n\t\tif (control.pattern) {\n\t\t\tvalidators.push(Validators.pattern(control.pattern));\n\t\t}\n\t\tif (control.match) {\n\t\t\tvalidators.push(matchValidator(control.match, control.reverse, group));\n\t\t}\n\t\t// console.log(control.key, validators);\n\t\treturn validators;\n\t}\n\n\ttoFormGroup(controls: ControlBase<any>[]): FormGroup {\n\t\tconst options: any = {};\n\t\tcontrols.forEach(x => {\n\t\t\t// group[x.key] = new FormControl(x.value, this.getValidators(x, group));\n\t\t\tconst formControl: FormControl = new FormControl(x.value);\n\t\t\tif (x.disabled) {\n\t\t\t\tformControl.disable();\n\t\t\t}\n\t\t\toptions[x.key] = formControl;\n\t\t\t// x.setControl(formControl); // !!!\n\t\t});\n\t\tconst group: FormGroup = new FormGroup(options);\n\t\t// console.log(group);\n\t\tcontrols.forEach(x => {\n\t\t\tconst validators = this.getValidators(x, group);\n\t\t\t// console.log(validators);\n\t\t\tgroup.controls[x.key].setValidators(validators);\n\t\t});\n\t\treturn group;\n\t}\n\n}\n","import { Directive, forwardRef, Input } from '@angular/core';\nimport { AbstractControl, AsyncValidator, NG_ASYNC_VALIDATORS, ValidationErrors } from '@angular/forms';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { catchError, debounceTime, switchMap, take } from 'rxjs/operators';\n\nconst DEBOUNCE_TIME: number = 250;\n\n@Directive({\n\tselector: '[exists][formControlName],[exists][formControl],[exists][ngModel]',\n\tproviders: [\n\t\t{ provide: NG_ASYNC_VALIDATORS, useExisting: forwardRef(() => ExistsValidator), multi: true },\n\t]\n})\nexport class ExistsValidator implements AsyncValidator {\n\n\tprivate values = new BehaviorSubject<string>(null);\n\tset value(value: string) {\n\t\tif (value && value.trim() !== '') {\n\t\t\tthis.values.next(value);\n\t\t}\n\t}\n\tprivate debounced$: Observable<ValidationErrors | null> = this.values.pipe(\n\t\tdebounceTime(DEBOUNCE_TIME),\n\t\tswitchMap((value: string) => {\n\t\t\t// console.log('ExistsValidator.debounced$', value);\n\t\t\treturn this.exists$(value);\n\t\t}),\n\t\tcatchError((response) => {\n\t\t\tconsole.log('ExistsValidator.debounced$.catchError', response);\n\t\t\treturn of(null);\n\t\t}),\n\t\ttake(1),\n\t);\n\n\t@Input() exists: Function;\n\n\texists$(value: string): Observable<ValidationErrors | null> {\n\t\tif (typeof this.exists === 'function') {\n\t\t\t// console.log('ExistsValidator.exists$', value);\n\t\t\treturn this.exists(value).pipe(\n\t\t\t\tswitchMap(exists => {\n\t\t\t\t\tif (exists) {\n\t\t\t\t\t\treturn of({\n\t\t\t\t\t\t\texists: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn of(null);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n\tvalidate(control: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null> {\n\t\tthis.value = control.value;\n\t\treturn this.debounced$;\n\t}\n\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlCheckbox extends ControlBase<boolean> {\n\n\tschema = 'checkbox';\n\n\tconstructor(options: ControlBaseOptions<boolean> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlEmail extends ControlBase<string> {\n\n\tschema = 'email';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t\tthis.email = true;\n\t\tthis.pattern = options.pattern || '[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}';\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlMarkdown extends ControlBase<string> {\n\n\tschema = 'markdown';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlNumber extends ControlBase<string> {\n\n\tschema = 'number';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlPassword extends ControlBase<string> {\n\n\tschema = 'password';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlRadio extends ControlBase<boolean> {\n\n\tschema = 'radio';\n\n\tconstructor(options: ControlBaseOptions<boolean> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlSelect extends ControlBase<string> {\n\n\tschema = 'select';\n\toptions: { key: string, value: string }[] = [];\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.options = options.options || [];\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlText extends ControlBase<string> {\n\n\tschema = 'text';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ControlBase, ControlBaseOptions } from './controls/control-base';\nimport { ControlCheckbox } from './controls/control-checkbox';\nimport { ControlEmail } from './controls/control-email';\nimport { ControlMarkdown } from './controls/control-markdown';\nimport { ControlNumber } from './controls/control-number';\nimport { ControlPassword } from './controls/control-password';\nimport { ControlRadio } from './controls/control-radio';\nimport { ControlSelect } from './controls/control-select';\nimport { ControlText } from './controls/control-text';\nimport { ControlService } from './controls/control.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class FormService {\n\n\tconstructor(\n\t\tprivate controlService: ControlService\n\t) { }\n\n\tgetControlsFromOptions(options: ControlBaseOptions<any>[]): ControlBase<any>[] {\n\t\tconst controls: ControlBase<any>[] = options.map(o => {\n\t\t\tswitch (o.schema) {\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\treturn new ControlCheckbox(o);\n\t\t\t\tcase 'email':\n\t\t\t\t\treturn new ControlEmail(o);\n\t\t\t\tcase 'number':\n\t\t\t\t\treturn new ControlNumber(o);\n\t\t\t\tcase 'password':\n\t\t\t\t\treturn new ControlPassword(o);\n\t\t\t\tcase 'radio':\n\t\t\t\t\treturn new ControlRadio(o);\n\t\t\t\tcase 'select':\n\t\t\t\t\treturn new ControlSelect(o);\n\t\t\t\tcase 'markdown':\n\t\t\t\t\treturn new ControlMarkdown(o);\n\t\t\t\tcase 'text':\n\t\t\t\t\treturn new ControlText(o);\n\t\t\t\tdefault:\n\t\t\t\t\treturn new ControlText(o);\n\t\t\t}\n\t\t});\n\t\tcontrols.sort((a, b) => a.order - b.order);\n\t\treturn controls;\n\t}\n\n\tgetGroupFromOptions(options: ControlBaseOptions<any>[]): FormGroup {\n\t\tconst controls: ControlBase<any>[] = this.getControlsFromOptions(options);\n\t\tconst group = this.controlService.toFormGroup(controls);\n\t\treturn group;\n\t}\n\n\tgetGroupFromControls(controls: ControlBase<any>[]): FormGroup {\n\t\tconst group = this.controlService.toFormGroup(controls);\n\t\treturn group;\n\t}\n\n}\n","import { Attribute, Directive, forwardRef } from '@angular/core';\nimport { AbstractControl, NG_VALIDATORS, Validator } from '@angular/forms';\n\n@Directive({\n\tselector: '[match][formControlName],[match][formControl],[match][ngModel]',\n\tproviders: [\n\t\t{ provide: NG_VALIDATORS, useExisting: forwardRef(() => MatchValidator), multi: true }\n\t]\n})\nexport class MatchValidator implements Validator {\n\n\tconstructor(\n\t\t@Attribute('match') public match: string,\n\t\t@Attribute('reverse') public reverse: string\n\t) { }\n\n\tprivate get isReverse() {\n\t\tif (!this.reverse) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.reverse === 'true' ? true : false;\n\t}\n\n\tvalidate(control: AbstractControl): { [key: string]: any } {\n\t\t// self value\n\t\tconst value = control.value;\n\n\t\t// control value\n\t\tconst input = control.root.get(this.match);\n\n\t\t// value not equal\n\t\tif (input && value !== input.value && !this.isReverse) {\n\t\t\treturn {\n\t\t\t\tmatch: true,\n\t\t\t};\n\t\t}\n\n\t\t// value equal and reverse\n\t\tif (input && value === input.value && this.isReverse) {\n\t\t\tdelete input.errors['match'];\n\t\t\tif (!Object.keys(input.errors).length) {\n\t\t\t\tinput.setErrors(null);\n\t\t\t}\n\t\t}\n\t\t// value not equal and reverse\n\t\tif (input && value !== input.value && this.isReverse) {\n\t\t\tinput.setErrors({\n\t\t\t\tmatch: true,\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n","import { Directive, EventEmitter, HostListener, Output } from '@angular/core';\n\n@Directive({\n\tselector: '[ngModel][uppercase]'\n})\nexport class UppercaseDirective {\n\t@Output() ngModelChange: EventEmitter<any> = new EventEmitter();\n\tvalue: any;\n\n\t@HostListener('input', ['$event']) onInputChange($event) {\n\t\tthis.value = $event.target.value.toUpperCase();\n\t\tthis.ngModelChange.emit(this.value);\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'highlight',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HighlightPipe implements PipeTransform {\n\n\ttransform(text: string, query: string): string {\n\t\tif (!query) {\n\t\t\treturn text;\n\t\t}\n\t\ttext = this.encodeHTML(text);\n\t\tquery = this.encodeHTML(query);\n\t\tconst regExp = new RegExp('&[^;]+;|' + this.escapeRegexChars(query), 'gi');\n\t\treturn text.replace(regExp, function (match) {\n\t\t\treturn match.toLowerCase() === query.toLowerCase() ? '<strong>' + match + '</strong>' : match;\n\t\t});\n\t}\n\n\tescapeRegexChars(text: string) {\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n\t}\n\n\tsafeToString(text: string) {\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\n\t}\n\n\tencodeHTML(text: string) {\n\t\treturn this.safeToString(text)\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;');\n\t}\n\n}\n","\nimport { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\nimport { Injectable, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { Logger } from '../logger/logger';\nimport { RouteService } from '../routes/route.service';\nimport { HttpStatusCodeService } from './http-status-code.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HttpResponseInterceptor implements HttpInterceptor {\n\n\tprivate _logger: Logger;\n\tget logger() {\n\t\tif (!this._logger) {\n\t\t\tthis._logger = this.injector.get(Logger);\n\t\t}\n\t\treturn this._logger;\n\t}\n\n\tprivate _router: Router;\n\tget router() {\n\t\tif (!this._router) {\n\t\t\tthis._router = this.injector.get(Router);\n\t\t}\n\t\treturn this._router;\n\t}\n\n\tprivate _routeService: RouteService;\n\tget routeService() {\n\t\tif (!this._routeService) {\n\t\t\tthis._routeService = this.injector.get(RouteService);\n\t\t}\n\t\treturn this.routeService;\n\t}\n\n\tconstructor(\n\t\tprivate injector: Injector,\n\t\tprivate statusCodeService: HttpStatusCodeService,\n\t) { }\n\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\t\t// injecting request\n\t\t// parsing response\n\t\treturn next.handle(request).pipe(\n\t\t\ttap((event: HttpEvent<any>) => {\n\t\t\t\t// console.log('HttpResponseInterceptor', event);\n\t\t\t\tthis.logger.httpError = null;\n\t\t\t\t// this.logger.log(event);\n\t\t\t\t/*\n\t\t\t\tif (event instanceof HttpResponse) {\n\t\t\t\t\t// console.log('event instanceof HttpResponse');\n\t\t\t\t\t// do stuff with response if you want\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t}),\n\t\t\tcatchError((error: any) => {\n\t\t\t\t// console.warn('HttpResponseInterceptor', error);\n\t\t\t\tif (error instanceof HttpErrorResponse) {\n\t\t\t\t\t// this.statusCodeService.setStatusCode(error.status);\n\t\t\t\t\tswitch (error.status) {\n\t\t\t\t\t\tcase 401:\n\t\t\t\t\t\t\t// unauthorized\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 404:\n\t\t\t\t\t\t\t// not found\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 409:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 410:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis.logger.http(error);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn throwError(error);\n\t\t\t})\n\t\t);\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Component, ElementRef, Inject, Input, OnChanges, PLATFORM_ID, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { isArray, isObject } from 'util';\n// import JSONFormatter from 'json-formatter-js';\n\n@Component({\n\tselector: 'json-formatter',\n\ttemplate: `<div #jsonFormatter></div>`,\n\tstyleUrls: ['./json-formatter.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class JsonFormatterComponent implements OnChanges {\n\t@ViewChild(`jsonFormatter`) input: ElementRef;\n\n\t@Input() json: Array<any> | Object | any;\n\n\telementRef: ElementRef;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t) { }\n\n\tngOnChanges() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tif (!isObject(this.json) && !isArray(this.json)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// console.log('JsonFormatterComponent', this.json);\n\t\t\tif (this.elementRef) {\n\t\t\t\tthis.input.nativeElement.removeChild(this.elementRef.nativeElement);\n\t\t\t}\n\t\t\tconst JSONFormatter = require('json-formatter-js').default;\n\t\t\tconst formatter = new JSONFormatter(this.json);\n\t\t\tconst elementRef = formatter.render();\n\t\t\tthis.input.nativeElement.appendChild(elementRef);\n\t\t\tthis.elementRef = new ElementRef(elementRef);\n\t\t}\n\t}\n}\n","import { ChangeDetectorRef, OnDestroy, Pipe, PipeTransform, WrappedValue } from '@angular/core';\nimport { Observable, SubscriptionLike } from 'rxjs';\n\n@Pipe({\n\tname: 'customAsync',\n\tpure: false\n})\nexport class CustomAsyncPipe implements OnDestroy, PipeTransform {\n\n\tprivate subject: Observable<any> | null = null;\n\tprivate subscription: SubscriptionLike | null = null;\n\tprivate value: any = null;\n\tprivate cachedValue: any = null;\n\n\tconstructor(\n\t\tprivate changeDetector: ChangeDetectorRef\n\t) { }\n\n\ttransform(subject: Observable<any> | null | undefined): any {\n\t\treturn this.observableToValue(subject);\n\t}\n\n\tprivate observableToValue(subject: Observable<any> | null | undefined): any {\n\t\tif (subject !== this.subject) {\n\t\t\tif (this.subject) {\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t\tif (subject) {\n\t\t\t\tthis.subject = subject;\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\n\t\t\t\t\t// console.log('CustomAsyncPipe.A', value);\n\t\t\t\t\tthis.value = value;\n\t\t\t\t\tthis.changeDetector.markForCheck(); // mark pipe as dirty\n\t\t\t\t});\n\t\t\t\tthis.cachedValue = this.value; // ???\n\t\t\t\treturn this.value;\n\t\t\t}\n\t\t}\n\t\t// console.log('CustomAsyncPipe.B', this.value);\n\t\tif (this.cachedValue !== this.value) {\n\t\t\tthis.cachedValue = this.value;\n\t\t\treturn WrappedValue.wrap(this.value); // notify that value has changed\n\t\t}\n\t\treturn this.cachedValue; // return cachedValue\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.subscription) {\n\t\t\tthis.subscription.unsubscribe();\n\t\t}\n\t\tthis.value = null;\n\t\tthis.cachedValue = null;\n\t\tthis.subscription = null;\n\t\tthis.subject = null;\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.dispose();\n\t}\n\n\tprivate _observableToValue(subject: Observable<any> | null | undefined): any {\n\t\tif (!this.subject) {\n\t\t\tif (subject) {\n\t\t\t\tthis.subject = subject;\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\n\t\t\t\t\tthis.value = value;\n\t\t\t\t\tthis.changeDetector.markForCheck(); // value has changed\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.cachedValue = this.value;\n\t\t\treturn this.value;\n\t\t}\n\t\tif (subject !== this.subject) {\n\t\t\tthis.dispose();\n\t\t\treturn this.transform(subject as any);\n\t\t}\n\t\tif (this.value === this.cachedValue) {\n\t\t\treturn this.cachedValue;\n\t\t}\n\t\tthis.cachedValue = this.value;\n\t\treturn WrappedValue.wrap(this.value); // value has changed\n\t}\n\n}\n","import { EventEmitter, Injectable, Injector } from '@angular/core';\nimport { BehaviorSubject, Observable, of, Subject } from 'rxjs';\nimport { catchError, filter, first, map, take, tap } from 'rxjs/operators';\nimport { ApiService } from '../api/api.service';\nimport { Label } from './label';\n\nexport class LabelKey {\n\tid?: string;\n\tvalue?: string;\n\tdefaultValue?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelService<T extends Label> extends ApiService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/label';\n\t}\n\n\tprivate _language: any = new BehaviorSubject({});\n\tpublic readonly language: Observable<any> = this._language.asObservable();\n\tprivate _languages: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\n\tpublic readonly languages: Observable<any[]> = this._languages.asObservable();\n\n\tprivate _lang: string;\n\tpublic get lang(): string {\n\t\treturn this._lang;\n\t}\n\tpublic set lang(lang: string) {\n\t\tif (lang !== this._lang) {\n\t\t\tthis._lang = lang;\n\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\tthis._language.next(language);\n\t\t}\n\t}\n\n\tpublic events: EventEmitter<any> = new EventEmitter();\n\tpublic missingHandler?: Function;\n\tpublic cache: {} = {};\n\n\t// !!! new async pipe\n\tprivate collectedKeys: { [key: string]: LabelKey; } = {};\n\t// private cache: { [key: string]: string; } = {};\n\tprivate labels$: Subject<{ [key: string]: string; }> = new Subject();\n\tprivate emitter: EventEmitter<any> = new EventEmitter();\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t\tthis._languages.next(this.config.languages);\n\t\tthis._lang = this.config.defaultLanguage;\n\t\tthis.getTranslation(this.lang).subscribe(x => {\n\t\t\t// console.log(x);\n\t\t});\n\t}\n\n\tpublic getTranslation(lang: string): Observable<{}> {\n\t\tif (!lang || !lang.trim()) {\n\t\t\treturn of(null);\n\t\t}\n\t\tthis.lang = lang;\n\t\tif (this.cache[lang]) {\n\t\t\treturn of(this.cache[lang]);\n\t\t} else {\n\t\t\treturn this.get({ lang }).pipe(\n\t\t\t\ttake(1),\n\t\t\t\tmap((x: Label[]) => {\n\t\t\t\t\tif (x[0]) {\n\t\t\t\t\t\tconst labels = x[0].labels;\n\t\t\t\t\t\tthis.cache[lang] = labels;\n\t\t\t\t\t\tthis.events.emit(labels);\n\t\t\t\t\t\treturn labels;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn of(null);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\t/*\n\t\t\t\ttap(x => {\n\t\t\t\t\t// this.logger.log(`found label matching \"${lang}\"`);\n\t\t\t\t})\n\t\t\t\t*/\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic getLabel(key: string, defaultValue?: string, params?: any): string | any {\n\t\tlet value: string | null = null;\n\t\tlet labels: any = this.cache[this.lang];\n\t\tif (labels) {\n\t\t\tconst keys: string[] = key.split('.');\n\t\t\tlet k = keys.shift();\n\t\t\twhile (keys.length > 0 && labels[k]) {\n\t\t\t\tlabels = labels[k];\n\t\t\t\tk = keys.shift();\n\t\t\t}\n\t\t\tvalue = labels[k] || `{${k}}`;\n\t\t}\n\t\treturn this.parseLabel(value, key, defaultValue, params);\n\t}\n\n\tprivate parseLabel(value: string | null, key: string, defaultValue?: string, params?: any): string | any {\n\t\tif (value == null) {\n\t\t\tvalue = defaultValue;\n\t\t}\n\t\tif (value == null) {\n\t\t\treturn this.missingLabel(key);\n\t\t} else if (params) {\n\t\t\treturn this.parseParams(value, params);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprivate missingLabel(key: string): string {\n\t\tif (this.missingHandler) {\n\t\t\treturn typeof this.missingHandler === 'function' ?\n\t\t\t\tthis.missingHandler(key) :\n\t\t\t\tthis.missingHandler;\n\t\t}\n\t\treturn key;\n\t}\n\n\tprivate parseParams(value: string, params: any): string {\n\t\tconst TEMPLATE_REGEXP: RegExp = /@\\s?([^{}\\s]*)\\s?/g; // /{{\\s?([^{}\\s]*)\\s?}}/g;\n\t\treturn value.replace(TEMPLATE_REGEXP, (text: string, key: string) => {\n\t\t\tconst replacer: string = params[key] as string;\n\t\t\treturn typeof replacer !== 'undefined' ? replacer : text;\n\t\t});\n\t}\n\n\t//\n\n\tgetKey(key: string, defaultValue?: string, params?: any): Observable<string> {\n\t\tif (this.cache.hasOwnProperty(key)) {\n\t\t\treturn of(this.cache[key]);\n\t\t} else {\n\t\t\tObject.defineProperty(this.collectedKeys, key, {\n\t\t\t\tvalue: { id: key, defaultValue: defaultValue },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.cache[key] = null;\n\t\t}\n\t\treturn this.labels$.pipe(\n\t\t\tmap(items => items[key] || null),\n\t\t\tfilter(label => label !== null),\n\t\t\t// tap(label => console.log('getKey', key, label)),\n\t\t\tmap(label => this.parseLabel(label, key, defaultValue, params)),\n\t\t);\n\t}\n\n\tregister(): Observable<any> {\n\t\treturn this.emitter.pipe(\n\t\t\t// throttleTime(500),\n\t\t\ttap(() => {\n\t\t\t\tthis.collectKeys().pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t).subscribe((keys) => {\n\t\t\t\t\t// console.log('LabelService.collected', keys);\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n\tcollect(): void {\n\t\tif (Object.keys(this.collectedKeys).length) {\n\t\t\tthis.emitter.emit();\n\t\t}\n\t}\n\n\tprivate collectKeys(): Observable<{ [key: string]: string; }> {\n\t\tconst keys = Object.keys(this.collectedKeys).map(x => this.collectedKeys[x]);\n\t\tthis.collectedKeys = {};\n\t\tif (keys.length) {\n\t\t\t// console.log('LabelService.collectKeys', JSON.stringify(keys));\n\t\t\treturn this.statePost(`/api/i18n/labels`, keys).pipe(\n\t\t\t\tmap((keys: LabelKey[]) => {\n\t\t\t\t\tconst items = {};\n\t\t\t\t\tkeys.forEach(x => items[x.id] = x.value || x.defaultValue);\n\t\t\t\t\treturn items;\n\t\t\t\t}),\n\t\t\t\ttap((items: { [key: string]: string; }) => {\n\t\t\t\t\tObject.assign(this.cache, items);\n\t\t\t\t\tthis.labels$.next(this.cache);\n\t\t\t\t\t// console.log('collectKeys', this.cache);\n\t\t\t\t}),\n\t\t\t\tcatchError(error => {\n\t\t\t\t\tconsole.log('LabelService.collectKeys.error', error);\n\t\t\t\t\treturn of({});\n\t\t\t\t}),\n\t\t\t);\n\t\t\t/*\n\t\t\treturn this.post(`/api/i18n/labels`, keys).pipe(\n\t\t\t\tmap((keys: LabelKey[]) => {\n\t\t\t\t\tconst items = {};\n\t\t\t\t\tkeys.forEach(x => items[x.id] = x.value || x.defaultValue);\n\t\t\t\t\treturn items;\n\t\t\t\t}),\n\t\t\t\ttap((items: { [key: string]: string; }) => {\n\t\t\t\t\tObject.assign(this.cache, items);\n\t\t\t\t\tthis.labels$.next(this.cache);\n\t\t\t\t\t// console.log('collectKeys', this.cache);\n\t\t\t\t}),\n\t\t\t);\n\t\t\t*/\n\t\t} else {\n\t\t\treturn of({});\n\t\t}\n\t}\n\n}\n\nexport function CustomTranslateLoader(injector: Injector) {\n\treturn new LabelService(injector);\n}\n\n","import { ChangeDetectorRef, Injectable, OnDestroy, Pipe, PipeTransform } from '@angular/core';\nimport { CustomAsyncPipe } from '../pipes/custom-async.pipe';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Pipe({\n\tname: 'labelAsync',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelAsyncPipe implements OnDestroy, PipeTransform {\n\n\tprivate asyncPipe: CustomAsyncPipe;\n\n\tconstructor(\n\t\tprivate changeDetector: ChangeDetectorRef,\n\t\tprivate labelService: LabelService<Label>,\n\t) {\n\t\tthis.asyncPipe = new CustomAsyncPipe(this.changeDetector);\n\t}\n\n\ttransform(key: string, text?: string, params?: any): string {\n\t\treturn this.asyncPipe.transform(this.labelService.getKey(key, text, params));\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.asyncPipe.dispose();\n\t}\n\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Directive({\n\tselector: '[label]'\n})\nexport class LabelDirective extends DisposableComponent implements OnInit {\n\n\tkey: string;\n\tinnerHTML: string;\n\n\t/*\n\t@Input() set label(key: string) {\n\t\t// console.log('LabelDirective.label', this.key, this.labelParams, this.template, this.view);\n\t}\n\t*/\n\t@Input() label: string;\n\t@Input() labelParams: any;\n\n\tconstructor(\n\t\tprivate element: ElementRef,\n\t\tprivate labelService: LabelService<Label>,\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\t// console.log('LabelDirective.ngOnInit', this.element.nativeElement.innerHTML);\n\t\tthis.labelService.getKey(this.label, this.element.nativeElement.innerHTML, this.labelParams).pipe(\n\t\t\ttakeUntil(this.unsubscribe)\n\t\t).subscribe(label => {\n\t\t\tthis.element.nativeElement.innerHTML = label;\n\t\t\t// console.log('LabelDirective.ngOnInit', label);\n\t\t});\n\t\t// console.log('LabelDirective.ngOnInit', this.label, this.labelParams, this.template, this.view);\n\t}\n}\n","import { ChangeDetectorRef, Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Pipe({\n\tname: 'label',\n\tpure: false,\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate ref: ChangeDetectorRef,\n\t\tprotected labelService: LabelService<Label>\n\t) {\n\t\tthis.labelService.events.subscribe(\n\t\t\tx => this.ref.markForCheck()\n\t\t);\n\t}\n\n\tpublic transform(key: string, text?: string, params?: any): string {\n\t\t// console.log(key, params);\n\t\t// return WrappedValue.wrap(this.val);\n\t\tconst label = this.labelService.getLabel(key, text, params);\n\t\t// console.log('label', label, this.labelService.cache);\n\t\treturn label;\n\t}\n\n}\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Logger } from './logger';\n\n@Component({\n\tselector: 'core-logger',\n\ttemplateUrl: './logger.component.html',\n\tstyleUrls: ['./logger.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class LoggerComponent implements OnInit {\n\tconstructor(public logger: Logger) { }\n\n\tngOnInit() {\n\t}\n}\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\nexport class EventEntity {\n\ttype: string | number;\n\tdata?: any;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class EventDispatcherService {\n\n\tprivate emitter: EventEmitter<EventEntity>;\n\n\tconstructor() {\n\t\tthis.emitter = new EventEmitter<EventEntity>();\n\t}\n\n\temit(event: EventEntity): void {\n\t\treturn this.emitter.emit(event);\n\t}\n\n\tobserve(): Observable<EventEntity> {\n\t\treturn this.emitter.pipe(\n\t\t\ttap((event: EventEntity) => console.log('EventDispatcherService', event))\n\t\t);\n\t}\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { EntityService } from './entity.service';\nimport { MenuItem } from './menu-item';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class MenuService extends EntityService<MenuItem> {\n\n\tget collection(): string {\n\t\treturn '/api/menu';\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, NgZone, PLATFORM_ID } from '@angular/core';\nimport { from, fromEvent, Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n// export class OnceEvent extends Event { }\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class OnceService {\n\n\tprivate uid: number = 0;\n\tprivate paths: string[] = [];\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate zone: NgZone,\n\t) { }\n\n\tscript(url: string, callback?: string | boolean): Observable<Event> {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t// !!! this.zone.runOutsideAngular(() => {\n\t\t\tif (this.paths.indexOf(url) === -1) {\n\t\t\t\tthis.paths.push(url);\n\t\t\t\tlet callbackName: string;\n\t\t\t\tif (callback === true) {\n\t\t\t\t\tcallbackName = 'OnceCallback' + (++this.uid);\n\t\t\t\t\turl = url.split('{{callback}}').join(callbackName);\n\t\t\t\t} else {\n\t\t\t\t\tcallbackName = callback as string;\n\t\t\t\t}\n\t\t\t\tlet callback$: Observable<any>;\n\t\t\t\tconst element = document.createElement('script');\n\t\t\t\telement.type = 'text/javascript';\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback$ = from(\n\t\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\t\twindow[callbackName] = function (data) {\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\telement.async = true;\n\t\t\t\t\tcallback$ = fromEvent(element, 'load').pipe(\n\t\t\t\t\t\tmap(x => x as Event)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst scripts = document.getElementsByTagName('script');\n\t\t\t\tif (scripts.length) {\n\t\t\t\t\tconst script = scripts[scripts.length - 1];\n\t\t\t\t\tscript.parentNode.insertBefore(element, script.nextSibling);\n\t\t\t\t}\n\t\t\t\telement.src = url;\n\t\t\t\treturn callback$;\n\t\t\t} else {\n\t\t\t\treturn of(new Event('loaded!'));\n\t\t\t}\n\t\t\t// });\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { ConfigService } from '../config/config.service';\nimport { SegmentPipe } from './segment.pipe';\n\n@Pipe({\n\tname: 'asset',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class AssetPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t\tprivate segment: SegmentPipe\n\t) { }\n\n\ttransform(data: any[] | string): string {\n\t\tif (typeof data === 'string' && (data.indexOf('http') === 0 || data.indexOf('/media/') === 0)) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\tconst segments = this.segment.transform(data);\n\t\t\tsegments.unshift(this.configService.options.assets);\n\t\t\treturn segments.join('/');\n\t\t}\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Image, ImageType } from '../models/image';\n\n@Pipe({\n\tname: 'image',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ImagePipe implements PipeTransform {\n\ttransform(images: Image[], type?: string, queryString?: string): string {\n\t\ttype = type || 'Default';\n\t\tqueryString = queryString ? `?${queryString}` : '';\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\n\t\tlet image: Image = null;\n\t\tif (images && images.length) {\n\t\t\timage = images.find(i => i.type === imageType) || images[0];\n\t\t}\n\t\treturn image ? (image.url + queryString).replace(/ /g, '%20') : null;\n\t}\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { ConfigService } from '../config/config.service';\nimport { SegmentPipe } from './segment.pipe';\n\n@Pipe({\n\tname: 'public',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class PublicPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t\tprivate segment: SegmentPipe\n\t) { }\n\n\ttransform(data: any[] | string): string {\n\t\tconst segments = this.segment.transform(data);\n\t\tsegments.unshift(this.configService.options.public);\n\t\treturn segments.join('/');\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { RouteService } from './route.service';\n\n@Pipe({\n\tname: 'route',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class RoutePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate routeService: RouteService,\n\t) { }\n\n\ttransform(data: any[] | string): string[] {\n\t\treturn this.routeService.toRoute(data);\n\t}\n\n}\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { Observable, of, Subject } from 'rxjs';\nimport { filter, first, map, tap } from 'rxjs/operators';\nimport { DocumentIndex } from '../models/document';\nimport { EntityService } from '../models/entity.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugService extends EntityService<DocumentIndex> {\n\n\tprivate collectedKeys: { [key: string]: string; } = {};\n\tprivate cache: { [key: string]: string[]; } = {};\n\tprivate slugs$: Subject<{ [key: string]: string[]; }> = new Subject();\n\tprivate emitter: EventEmitter<any> = new EventEmitter();\n\n\tget collection(): string {\n\t\treturn `/api/slug`;\n\t}\n\n\tgetKey(key: string): Observable<string[]> {\n\t\tif (this.cache.hasOwnProperty(key)) {\n\t\t\treturn of(this.cache[key]);\n\t\t} else {\n\t\t\t// console.log('SlugService.getKey', key);\n\t\t\tObject.defineProperty(this.collectedKeys, key, {\n\t\t\t\tvalue: key,\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.cache[key] = null;\n\t\t}\n\t\t// return observable of key\n\t\treturn this.slugs$.pipe(\n\t\t\tmap(items => items[key]),\n\t\t\tfilter(item => item !== null),\n\t\t);\n\t}\n\n\tregister(): Observable<any> {\n\t\treturn this.emitter.pipe(\n\t\t\t// throttleTime(500),\n\t\t\ttap(() => {\n\t\t\t\tthis.collectKeys().pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t).subscribe((keys) => {\n\t\t\t\t\t// console.log('SlugService.collected', keys);\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n\tcollect(): void {\n\t\tif (Object.keys(this.collectedKeys).length) {\n\t\t\tthis.emitter.emit();\n\t\t}\n\t}\n\n\tprivate getSlugs(keys: string[]): Observable<DocumentIndex[]> {\n\t\tkeys = keys || [];\n\t\treturn this.statePost(keys).pipe(\n\t\t\t// tap(items => console.log(items)),\n\t\t);\n\t}\n\n\tprivate collectKeys(): Observable<{ [key: string]: string; }> {\n\t\tthis.slugs$.next(this.cache);\n\t\tconst keys = Object.keys(this.collectedKeys);\n\t\tthis.collectedKeys = {};\n\t\treturn this.getSlugs(keys).pipe(\n\t\t\tmap((items: DocumentIndex[]) => {\n\t\t\t\tconst dictionary = {};\n\t\t\t\titems.forEach(x => dictionary[x.mnemonic] = [x.slug]);\n\t\t\t\treturn dictionary;\n\t\t\t}),\n\t\t\ttap((dictionary: { [key: string]: string; }) => {\n\t\t\t\tObject.assign(this.cache, dictionary);\n\t\t\t\tthis.slugs$.next(this.cache);\n\t\t\t})\n\t\t);\n\t}\n\n}\n","import { ChangeDetectorRef, Injectable, OnDestroy, Pipe, PipeTransform } from '@angular/core';\nimport { CustomAsyncPipe } from '../pipes/custom-async.pipe';\nimport { RoutePipe } from '../routes/route.pipe';\nimport { SlugService } from './slug.service';\n\n@Pipe({\n\tname: 'slugAsync',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugAsyncPipe implements OnDestroy, PipeTransform {\n\n\tprivate asyncPipe: CustomAsyncPipe;\n\n\tconstructor(\n\t\tprivate changeDetector: ChangeDetectorRef,\n\t\tprivate slugService: SlugService,\n\t\tprivate routePipe: RoutePipe,\n\t) {\n\t\tthis.asyncPipe = new CustomAsyncPipe(this.changeDetector);\n\t}\n\n\ttransform(key: string, segments?: string[]): string[] {\n\t\tlet slugs = this.routePipe.transform(this.asyncPipe.transform(this.slugService.getKey(key)));\n\t\t// console.log('SlugAsyncPipe.transform', key, slugs);\n\t\tif (slugs && segments) {\n\t\t\tslugs = slugs.concat(segments);\n\t\t}\n\t\treturn slugs;\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.asyncPipe.dispose();\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { SlugService } from './slug.service';\n\n@Pipe({\n\tname: 'slug',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugPipe implements PipeTransform {\n\n\tconstructor(\n\t\t// private routeService: RouteService,\n\t\tprivate slugService: SlugService\n\t) { }\n\n\ttransform(key: string): Observable<string[]> {\n\t\treturn this.slugService.getKey(key);\n\t\t// return this.async.transform<any>(this.slugService.getKey(key));\n\t\t// return this.routeService.toSlug(key);\n\t}\n\n}\n","import { ChangeDetectorRef, Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { TranslateService } from './translate.service';\n\n@Pipe({\n\tname: 'translate',\n\tpure: false,\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class TranslatePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate ref: ChangeDetectorRef,\n\t\tprotected translateService: TranslateService\n\t) {\n\t\t// this.translateService.events.subscribe(\n\t\t// \tx => this.ref.markForCheck()\n\t\t// );\n\t}\n\n\tpublic transform(key: string, params?: { value: any }): string {\n\t\t// const label = this.translateService.getLabel(key, text, params);\n\t\treturn key;\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeStyle'\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SafeStylePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(style: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustStyle(style);\n\t}\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeUrl'\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SafeUrlPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(url: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustResourceUrl(url);\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeHtml'\n})\nexport class TrustPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(text: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustHtml(text);\n\t\t// return this.sanitizer.bypassSecurityTrustStyle(text);\n\t\t// return this.sanitizer.bypassSecurityTrustXxx(text); - see docs\n\t}\n}\n","import { CommonModule } from '@angular/common';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { ModuleWithProviders, NgModule, Optional, SkipSelf } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AuthService } from './auth/auth.service';\r\nimport { ConfigService } from './config/config.service';\r\nimport { CoreConfig, CORE_CONFIG } from './config/core.config';\r\nimport { DefaultContentDirective } from './content/default-content.directive';\r\nimport { CoreModuleComponent } from './core-module.component';\r\nimport { CoreRouting } from './core.routing';\r\nimport { DisposableComponent } from './disposable/disposable.component';\r\nimport { ControlComponent } from './forms/controls/control.component';\r\nimport { ControlService } from './forms/controls/control.service';\r\nimport { ExistsValidator } from './forms/exists.validator';\r\nimport { FormService } from './forms/form.service';\r\nimport { MatchValidator } from './forms/match.validator';\r\nimport { UppercaseDirective } from './forms/uppercase.directive';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HttpResponseInterceptor } from './http/http-response.interceptor';\r\nimport { HttpStatusCodeService } from './http/http-status-code.service';\r\nimport { JsonFormatterComponent } from './json-formatter/json-formatter.component';\r\nimport { LabelAsyncPipe } from './labels/label-async.pipe';\r\nimport { LabelDirective } from './labels/label.directive';\r\nimport { LabelPipe } from './labels/label.pipe';\r\nimport { LabelService } from './labels/label.service';\r\nimport { Logger } from './logger/logger';\r\nimport { LoggerComponent } from './logger/logger.component';\r\nimport { EventDispatcherService } from './models/event-dispatcher.service';\r\nimport { MenuService } from './models/menu.service';\r\nimport { OnceService } from './once/once.service';\r\nimport { PageNotFoundComponent } from './pages/page-not-found.component';\r\nimport { PageOutletComponent } from './pages/page-outlet.component';\r\nimport { PageComponent } from './pages/page.component';\r\nimport { PageGuard } from './pages/page.guard';\r\nimport { PageService } from './pages/page.service';\r\nimport { StaticGuard } from './pages/static.guard';\r\nimport { AssetPipe } from './pipes/asset.pipe';\r\nimport { CustomAsyncPipe } from './pipes/custom-async.pipe';\r\nimport { ImagePipe } from './pipes/image.pipe';\r\nimport { PublicPipe } from './pipes/public.pipe';\r\nimport { SegmentPipe } from './pipes/segment.pipe';\r\nimport { RoutePipe } from './routes/route.pipe';\r\nimport { SlugAsyncPipe } from './slugs/slug-async.pipe';\r\nimport { SlugPipe } from './slugs/slug.pipe';\r\nimport { CookieStorageService, LocalStorageService, SessionStorageService, StorageService } from './storage/storage.service';\r\nimport { TranslatePipe } from './translate/translate.pipe';\r\nimport { SafeStylePipe } from './trust/safe-style.pipe';\r\nimport { SafeUrlPipe } from './trust/safe-url.pipe';\r\nimport { TrustPipe } from './trust/trust.pipe';\r\n\r\nconst modules = [\r\n\tCommonModule,\r\n\tHttpClientModule,\r\n\tFormsModule,\r\n\tReactiveFormsModule,\r\n\tCoreRouting,\r\n];\r\n\r\nconst services = [\r\n\tAuthService,\r\n\tConfigService,\r\n\tControlService,\r\n\tCookieStorageService,\r\n\tEventDispatcherService,\r\n\tFormService,\r\n\tHttpStatusCodeService,\r\n\tLabelService,\r\n\tLocalStorageService,\r\n\tLogger,\r\n\tMenuService,\r\n\tOnceService,\r\n\tPageService,\r\n\tSessionStorageService,\r\n\tStorageService,\r\n];\r\n\r\nconst components = [\r\n\tControlComponent,\r\n\tCoreModuleComponent,\r\n\tDisposableComponent,\r\n\tJsonFormatterComponent,\r\n\tLoggerComponent,\r\n\tPageComponent,\r\n\tPageNotFoundComponent,\r\n\tPageOutletComponent,\r\n];\r\n\r\nconst directives = [\r\n\tDefaultContentDirective,\r\n\tLabelDirective,\r\n\tUppercaseDirective,\r\n];\r\n\r\nconst pipes = [\r\n\tAssetPipe,\r\n\tCustomAsyncPipe,\r\n\tHighlightPipe,\r\n\tImagePipe,\r\n\tLabelAsyncPipe,\r\n\tLabelPipe,\r\n\tPublicPipe,\r\n\tRoutePipe,\r\n\tSafeStylePipe,\r\n\tSafeUrlPipe,\r\n\tSegmentPipe,\r\n\tSlugAsyncPipe,\r\n\tSlugPipe,\r\n\tTranslatePipe,\r\n\tTrustPipe,\r\n];\r\n\r\nconst validators = [\r\n\tExistsValidator,\r\n\tMatchValidator,\r\n];\r\n\r\nconst guards = [\r\n\tPageGuard,\r\n\tStaticGuard,\r\n];\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\t...modules,\r\n\t],\r\n\tproviders: [\r\n\t\t{ provide: HTTP_INTERCEPTORS, useClass: HttpResponseInterceptor, multi: true },\r\n\t\t...services,\r\n\t\t...pipes,\r\n\t\t...validators,\r\n\t\t...guards,\r\n\t],\r\n\tdeclarations: [\r\n\t\t...components,\r\n\t\t...directives,\r\n\t\t...pipes,\r\n\t\t...validators,\r\n\t],\r\n\texports: [\r\n\t\t...modules,\r\n\t\t...components,\r\n\t\t...directives,\r\n\t\t...pipes,\r\n\t\t...validators,\r\n\t],\r\n})\r\n\r\nexport class CoreModule {\r\n\r\n\tconstructor(\r\n\t\t@Optional() @SkipSelf() parentModule: CoreModule\r\n\t) {\r\n\t\tif (parentModule) {\r\n\t\t\tthrow new Error('CoreModule is already loaded. Import it in the AppModule only');\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static forRoot(\r\n\t\tconfig?: CoreConfig,\r\n\t): ModuleWithProviders {\r\n\t\treturn {\r\n\t\t\tngModule: CoreModule,\r\n\t\t\tproviders: [{\r\n\t\t\t\tprovide: CORE_CONFIG, useValue: config\r\n\t\t\t}]\r\n\t\t};\r\n\t}\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CoreService {\n\n\tconstructor() { }\n}\n","import { Entity } from '../models/entity';\n\nexport class Label implements Entity {\n\tid: number | string;\n\tname: string;\n\tlang: string;\n\tlabels?: any;\n}\n","import { Entity } from './entity';\n\nexport class Document implements Entity {\n\tid: number | string;\n\tname?: string;\n\ttitle?: string;\n\tdescription?: string;\n\tslug?: string;\n}\n\nexport class DocumentIndex {\n\tid: number | string;\n\tmnemonic?: string;\n\tslug?: string;\n}\n\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Document } from './document'; // !!! Document class conflict?\nimport { EntityService } from './entity.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class DocumentService<T extends Document> extends EntityService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/document';\n\t}\n\n\tgetDetailBySlug(slug: string): Observable<T> {\n\t\tif (!slug.trim()) {\n\t\t\t// if not search term, return empty identity array.\n\t\t\treturn of();\n\t\t}\n\t\treturn this.get({ slug }).pipe(\n\t\t\t// tap(x => this.logger.log(`found identities matching \"${slug}\"`)),\n\t\t\tswitchMap(x => of(x[0]))\n\t\t);\n\t}\n\n}\n","import { Identity } from './identity';\n\nexport class Entity implements Identity {\n\tid: number | string;\n\tname?: string;\n}\n","\nexport class Feature {\n\tid: number | string;\n\tslug?: string;\n\ttitle?: string;\n\tabstract?: string;\n\ttype?: number;\n\treadmore?: boolean = false;\n}\n","\nexport class Identity {\n\tid: number | string;\n}\n","import { Document } from './document';\nimport { Image } from './image';\n\nexport class MenuItem implements Document {\n\tid: number | string;\n\tname?: string;\n\ttitle?: string;\n\tabstract?: string;\n\tslug?: string;\n\turl?: string;\n\ttype?: number | string;\n\timages?: Image[];\n\titems?: MenuItem[];\n\n\tconstructor(options?: any) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t\tif (options.items) {\n\t\t\t\tthis.items = options.items.map(item => new MenuItem(item));\n\t\t\t}\n\t\t}\n\t}\n}\n","\nexport class Taxonomy {\n\tid: number | string;\n\tname?: string;\n\ttype?: number;\n}\n"],"names":["first"],"mappings":"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"}
