{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@designr/core/lib/auth/auth.ts","ng://@designr/core/lib/logger/logger.ts","ng://@designr/core/lib/config/core.config.ts","ng://@designr/core/lib/config/core.service.ts","ng://@designr/core/lib/logger/logger.service.ts","ng://@designr/core/lib/api/api.service.ts","ng://@designr/core/lib/storage/storage.service.ts","ng://@designr/core/lib/auth/auth.service.ts","ng://@designr/core/lib/bundle/bundle.ts","ng://@designr/core/lib/bundle/bundle.directive.ts","ng://@designr/core/lib/content/default-content.directive.ts","ng://@designr/core/lib/core-module.component.ts","ng://@designr/core/lib/disposable/disposable.component.ts","ng://@designr/core/lib/disposable/disposable.directive.ts","ng://@designr/core/lib/highlight/highlight.pipe.ts","ng://@designr/core/lib/pipes/segment.pipe.ts","ng://@designr/core/lib/models/identity.service.ts","ng://@designr/core/lib/translate/translate.service.ts","ng://@designr/core/lib/route/route.service.ts","ng://@designr/core/lib/http/http-status-code.service.ts","ng://@designr/core/lib/http/http-response.interceptor.ts","ng://@designr/core/lib/json-formatter/json-formatter.component.ts","ng://@designr/core/lib/label/label.service.ts","ng://@designr/core/lib/label/label.directive.ts","ng://@designr/core/lib/label/label.pipe.ts","ng://@designr/core/lib/logger/logger.component.html","ng://@designr/core/lib/logger/logger.component.ts","ng://@designr/core/lib/outlet/outlet.ts","ng://@designr/core/lib/outlet/outlet-default.component.ts","ng://@designr/core/lib/outlet/outlet-resolver.service.ts","ng://@designr/core/lib/outlet/outlet.component.ts","ng://@designr/core/lib/outlet/outlet-repeater.component.ts","ng://@designr/core/lib/models/image.ts","ng://@designr/core/lib/pipes/asset.pipe.ts","ng://@designr/core/lib/pipes/custom-async.pipe.ts","ng://@designr/core/lib/pipes/image-url.pipe.ts","ng://@designr/core/lib/pipes/image.pipe.ts","ng://@designr/core/lib/pipes/public.pipe.ts","ng://@designr/core/lib/route/route.pipe.ts","ng://@designr/core/lib/models/entity.service.ts","ng://@designr/core/lib/slug/slug.service.ts","ng://@designr/core/lib/slug/slug.pipe.ts","ng://@designr/core/lib/translate/translate.directive.ts","ng://@designr/core/lib/translate/translate.pipe.ts","ng://@designr/core/lib/trust/safe-style.pipe.ts","ng://@designr/core/lib/trust/safe-url.pipe.ts","ng://@designr/core/lib/trust/trust.pipe.ts","ng://@designr/core/lib/core.module.ts","ng://@designr/core/lib/label/label.ts","ng://@designr/core/lib/models/document.ts","ng://@designr/core/lib/models/document.service.ts","ng://@designr/core/lib/models/entity.ts","ng://@designr/core/lib/models/event-dispatcher.service.ts","ng://@designr/core/lib/models/feature.ts","ng://@designr/core/lib/models/identity.ts","ng://@designr/core/lib/models/menu-item.ts","ng://@designr/core/lib/models/menu.service.ts","ng://@designr/core/lib/models/taxonomy.ts","ng://@designr/core/lib/once/once.service.ts","ng://@designr/core/lib/translate/translate.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","AuthStrategy","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","LoggerErrorStrategy","accessToken","expiresIn","LoggerError","_super","response","HttpErrorResponse","statusText","headers","status","url","defineProperty","_this","keys","reduce","type","key","toLowerCase","CoreTransitionConfig","options","assign","assets","authStrategy","Cookie","defaultLanguage","defaultMarket","loggerErrorStrategy","Server","languages","id","name","lang","origin","production","public","urlStrategy","useLang","useMarket","transition","CORE_CONFIG","InjectionToken","CoreService","CoreConfig","core","factory","ɵfac","providedIn","Logger","coreService","logs","request","args","_i","s","join","log","console","apply","warn","http","httpError","message","clear","params","HttpHeaders","Content-Type","ApiService","injector","_logger","get","_http","HttpClient","_state","TransferState","_platformId","PLATFORM_ID","_config","_origin","config","base","collection","indexOf","getUrl","method","first","second","ApiRequestOptions","pipe","tap","x","logger","post","third","model","put","patch","delete","identity","toCamelCase","input","output","keyCamelCase","map","charAt","slice","toString","getStateKey","flatMap","substr","k","replace","makeStateKey","stateGet","stateKey","isPlatformBrowser","platformId","state","hasKey","cached","remove","of","isPlatformServer","onSerialize","statePost","Injector","StorageService","exist","set","days","on","tryGet","CookieStorageService","storageService","isSupported","setter","document","cookie","cookieName","ca","split","c","substring","JSON","parse","decodeURIComponent","atob","cache_1","json","stringify","btoa","encodeURIComponent","elapsed","checkCookie","setTimeout","expires","date","Date","setTime","getTime","toUTCString","SessionStorageService","cookieStorageService","window","sessionStorage","removeItem","undefined","cache_2","setItem","supported","LocalStorageService","localStorage","cache_3","AuthService","localStorageService","cachedRequests","paths","setToken","authToken","retryFailedRequests","getToken","getFakeToken","AuthToken","isValid","now","isAuthenticated","collectFailedRequest","BUNDLES","BundleDirective","bundles","loader","container","ngOnInit","load","bundle","then","moduleFactory","moduleRef","moduleRef_","rootComponentType","componentFactoryResolver","resolveComponentFactory","componentRef","createComponent","instance","componentRef_","ngOnDestroy","destroy","NgModuleFactoryLoader","ViewContainerRef","selectors","inputs","data","DefaultContentDirective","element","renderer","hasContent","nativeElement","ngAfterContentChecked","childNodes","node","nodeType","createEmbeddedView","default","ElementRef","Renderer2","CoreModuleComponent","version","decls","vars","consts","template","rf","ctx","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵtextInterpolate1","DisposableComponent","unsubscribe","Subject","complete","encapsulation","DisposableDirective","HighlightPipe","transform","text","query","encodeHTML","regExp","RegExp","escapeRegexChars","match","safeToString","trim","pure","SegmentPipe","location","segments","path","isArray","normalize","common","Location","IdentityService","getDetailById","TranslateService","events","EventEmitter","language_","BehaviorSubject","languages_","lang_","getValue","language","find","observe$","filter","switchMap","getTranslation","cache","labels","emit","getTranslate","defaultValue","shift","parseTranslate","missingTranslate","parseParams","missingHandler","replacer","use","setDefaultLang","addLangs","getBrowserLang","getFirstBrowserLang","getFirstBrowserLocale","navigator","properties","RouteService","translateService","route","router","segment","_language","asObservable","_languages","pageParams$","currentMarket","setLanguages","subscribeToRouter","_lang","getPageParams","queryParams","distinctUntilChanged","parsed","forEach","serializeParams","serialized","serialize","base64","Buffer","from","_a","object","getId","snapshot","paramMap","getSlug","toRoute","market","marketIndex","splice","langIndex","toSlug","datas","toParams","toData","setLanguage","silent","replaceState","navigate","event","NavigationStart","subscribe","lang_1","detectLanguage","acceptLanguage","detectedLanguage","regexp","performance","time","process","hrtime","start","startTime","end","endTime","ActivatedRoute","Router","HttpStatusCodeService","statusCode","redirectUrl","setStatusCode","getStatusCode","getRedirectUrl","HttpResponseInterceptor","statusCodeService","loggerErrorStrategy_","config_","logger_","router_","routeService_","routeService","intercept","handle","HttpResponse","catchError","throwError","JsonFormatterComponent","ngOnChanges","isObject","elementRef","removeChild","JSONFormatter","render","appendChild","viewQuery","i0.ɵɵelement","LabelService","values$","emitter$","values","parseLabel","enumerable","writable","transform$","debounceTime","collect$","keys_1","getLabel","label","getMissingLabel","LabelDirective","labelService","innerHTML","labelParams","takeUntil","features","LabelPipe","i0.ɵɵproperty","i0.ɵɵtextInterpolate","LoggerComponent","i0.ɵɵtemplate","OUTLETS","Outlet","OutletDefaultComponent","outlet","OutletResolverService","outlets","resolve","component","OutletComponent","outletResolverService","viewContainerRef","ComponentFactoryResolver","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","ImageType","OutletRepeaterComponent","AssetPipe","unshift","CustomAsyncPipe","changeDetector","subject","subscription","cachedValue","observableToValue","dispose","markForCheck","WrappedValue","wrap","_observableToValue","Image","ImageUrlPipe","images","queryString","imageType","Default","image","ImagePipe","transform__","PublicPipe","RoutePipe","EntityService","getDetailByName","SlugService","mnemonic","items","slug","slugs","SlugPipe","slugService","routePipe","TranslateDirective","translate","translateParams","TranslatePipe","ref","SafeStylePipe","sanitizer","style","bypassSecurityTrustStyle","platformBrowser","DomSanitizer","SafeUrlPipe","bypassSecurityTrustResourceUrl","TrustPipe","bypassSecurityTrustHtml","validators","CoreModule","parentModule","forRoot","ngModule","providers","provide","useValue","HTTP_INTERCEPTORS","useClass","multi","SystemJsNgModuleLoader","imports","CommonModule","HttpClientModule","FormsModule","ReactiveFormsModule","declarations","exports","DocumentService","getDetailBySlug","EventDispatcherService","emitter","observe","readmore","MenuItem","item","MenuService","OnceService","zone","uid","script","callback","callbackName_1","callback$","createElement","Promise","reject","async","fromEvent","scripts","getElementsByTagName","parentNode","insertBefore","nextSibling","src","Event","NgZone"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","\nexport enum AuthStrategy {\n\tBearer = 0,\n\tCookie = 1,\n}\n\nexport class AuthToken {\n\tconstructor(\n\t\tpublic accessToken: string,\n\t\tpublic expiresIn: number = 0\n\t) { }\n}\n","import { HttpErrorResponse, HttpResponse } from '@angular/common/http';\n\nexport enum LoggerErrorStrategy {\n\tInformational = 100,\n\tSuccess = 200,\n\tRedirect = 300,\n\tClient = 400,\n\tServer = 500,\n\tNone = 999,\n}\n\nexport class LoggerError extends HttpErrorResponse {\n\tbody?: any;\n\n\tconstructor(response?: HttpErrorResponse | HttpResponse<any>) {\n\t\tsuper({\n\t\t\terror: response instanceof HttpErrorResponse ? response.error : response.statusText,\n\t\t\theaders: response.headers,\n\t\t\tstatus: response.status,\n\t\t\tstatusText: response.statusText,\n\t\t\turl: response.url,\n\t\t});\n\t}\n\n\tget statusType(): string {\n\t\treturn Object.keys(LoggerErrorStrategy).reduce((type: string, key: string) => {\n\t\t\tif (this.status >= LoggerErrorStrategy[key]) {\n\t\t\t\ttype = key.toLowerCase();\n\t\t\t}\n\t\t\treturn type;\n\t\t}, null);\n\t}\n\n}\n","import { InjectionToken } from '@angular/core';\nimport { AuthStrategy } from '../auth/auth';\nimport { LoggerErrorStrategy } from '../logger/logger';\n\nexport class Language {\n\tid?: number;\n\tname?: string;\n\tlang?: string;\n}\n\nexport class CoreTransitionConfig {\n\tappId: string;\n\n\tconstructor(options?: CoreTransitionConfig) {\n\t\t// console.log('CoreTransitionConfig', options);\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n}\n\nexport class CoreConfig {\n\tassets?: string = '';\n\tauthStrategy?: AuthStrategy = AuthStrategy.Cookie;\n\tdefaultLanguage?: string = 'it';\n\tdefaultMarket?: string = 'it';\n\tloggerErrorStrategy?: LoggerErrorStrategy = LoggerErrorStrategy.Server;\n\tlanguages?: Language[] = [{ id: 1, name: 'Italiano', lang: 'it' }];\n\torigin?: string = '';\n\tproduction?: boolean = false;\n\tpublic?: string = '';\n\ttransition?: CoreTransitionConfig;\n\turlStrategy?: string = '';\n\tuseLang?: boolean = false;\n\tuseMarket?: boolean = false;\n\tuseServiceWorker?: boolean;\n\trouting?: any; // ExtraOptions\n\n\tconstructor(options?: CoreConfig) {\n\t\t// console.log('CoreConfig', options);\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t\tthis.transition = new CoreTransitionConfig(options.transition);\n\t\t} else {\n\t\t\tthis.transition = new CoreTransitionConfig();\n\t\t}\n\t}\n}\n\nexport const CORE_CONFIG = new InjectionToken<CoreConfig>('core.config');\n","\nimport { Inject, Injectable } from '@angular/core';\nimport { CoreConfig, CORE_CONFIG } from './core.config';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CoreService {\n\n\tpublic options: CoreConfig;\n\n\tconstructor(\n\t\t@Inject(CORE_CONFIG) options: CoreConfig\n\t) {\n\t\t// console.log('CoreService', options);\n\t\toptions = options || {};\n\t\t// options.defaultPage = (options.defaultPage || PageNotFoundComponent) as Type<PageComponent>;\n\t\t// options.notFoundPage = (options.notFoundPage || PageNotFoundComponent) as Type<PageComponent>;\n\t\tthis.options = new CoreConfig(options);\n\t}\n\n}\n","import { HttpErrorResponse, HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { CoreService } from '../config/core.service';\nimport { LoggerError } from './logger';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class Logger {\n\n\thttpError: LoggerError;\n\tlogs: string[] = [];\n\n\tconstructor(\n\t\tprivate coreService: CoreService,\n\t) {\n\t\t//\n\t}\n\n\trequest(...args: any[]) {\n\t\tif (!this.coreService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\t// console.log.apply(this, ['%c %s', 'background: #dddddd; color: #111'].concat(args));\n\t\t}\n\t}\n\n\tlog(...args: any[]) {\n\t\tif (!this.coreService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #1976d2; color: #fff; border-radius: 3px; padding: 4px 8px; margin-bottom: 4px;'].concat(args));\n\t\t}\n\t}\n\n\twarn(...args: any[]) {\n\t\tif (!this.coreService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #ff5500; color: #fff'].concat(args));\n\t\t}\n\t}\n\n\terror(...args: any[]) {\n\t\tif (!this.coreService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.error.apply(console, args);\n\t\t}\n\t}\n\n\thttp(response: HttpErrorResponse | HttpResponse<any>) {\n\t\tthis.httpError = new LoggerError(response);\n\t\tif (!this.coreService.options.production) {\n\t\t\tthis.logs.push(this.httpError.message);\n\t\t}\n\t\tconsole.warn('Logger.http.response', response.status, response.statusText, response.url);\n\t}\n\n\tclear() {\n\t\tthis.httpError = null;\n\t\tthis.logs = [];\n\t}\n}\n","import { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { makeStateKey, StateKey, TransferState } from '@angular/platform-browser';\nimport { Observable, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { CoreConfig } from '../config/core.config';\nimport { CoreService } from '../config/core.service';\nimport { Logger } from '../logger/logger.service';\n\nexport class ApiRequestOptions {\n\theaders?: HttpHeaders;\n\tparams?: HttpParams;\n\tconstructor(params?: {}) {\n\t\tthis.headers = new HttpHeaders({\n\t\t\t'Content-Type': 'application/json'\n\t\t});\n\t\tthis.params = params as HttpParams;\n\t}\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ApiService<T> {\n\n\tget collection(): string {\n\t\treturn '/api';\n\t}\n\n\tprivate _logger: Logger;\n\tget logger(): Logger {\n\t\tif (!this._logger) {\n\t\t\tthis._logger = this.injector.get(Logger);\n\t\t}\n\t\treturn this._logger;\n\t}\n\n\tprivate _http: HttpClient;\n\tget http(): HttpClient {\n\t\tif (!this._http) {\n\t\t\tthis._http = this.injector.get(HttpClient);\n\t\t}\n\t\treturn this._http;\n\t}\n\n\tprivate _state: TransferState;\n\tget state(): TransferState {\n\t\tif (!this._state) {\n\t\t\tthis._state = this.injector.get(TransferState);\n\t\t}\n\t\treturn this._state;\n\t}\n\n\tprivate _platformId: string;\n\tget platformId(): string {\n\t\tif (!this._platformId) {\n\t\t\tthis._platformId = this.injector.get<string>(PLATFORM_ID);\n\t\t}\n\t\treturn this._platformId;\n\t}\n\n\tprivate _config: CoreConfig;\n\tget config(): CoreConfig {\n\t\tif (!this._config) {\n\t\t\tthis._config = this.injector.get(CoreService).options;\n\t\t}\n\t\treturn this._config;\n\t}\n\n\tprivate _origin: string;\n\tget origin(): string {\n\t\tif (!this._origin) {\n\t\t\tthis._origin = this.config.origin;\n\t\t}\n\t\treturn this._origin;\n\t}\n\n\tget url(): string {\n\t\tlet base: string = this.origin;\n\t\tconst collection = this.collection.toLowerCase();\n\t\tif (collection.indexOf('http') === 0) {\n\t\t\tbase = '';\n\t\t}\n\t\treturn `${base}${collection}`;\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) { }\n\n\tgetUrl(method: string = ''): string {\n\t\treturn `${this.url}${method}`;\n\t}\n\n\tget(first?: string | {}, second?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.get<T[]>(url, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tpost(first: string | {}, second?: {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.post<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tput(first: string | T, second?: T | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.put<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tpatch(first: string | T, second?: T | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.patch<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tdelete(first: string | T | number, second?: T | number | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst identity: T | number = (typeof first !== 'string' ? first : second) as T | number;\n\t\tconst id = identity ? (typeof identity === 'number' ? identity : (identity as any).id) : null;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = id !== null ? this.getUrl(`${method}/${id}`) : this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.delete<T[]>(url, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\ttoCamelCase(input: any): any {\n\t\tlet output, key, keyCamelCase, value;\n\t\tif (input instanceof Array) {\n\t\t\treturn input.map((value: any) => {\n\t\t\t\tif (typeof value === 'object') {\n\t\t\t\t\tvalue = this.toCamelCase(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t} else {\n\t\t\toutput = {};\n\t\t\tfor (key in input) {\n\t\t\t\tif (input.hasOwnProperty(key)) {\n\t\t\t\t\tkeyCamelCase = (key.charAt(0).toLowerCase() + key.slice(1) || key).toString();\n\t\t\t\t\tvalue = input[key];\n\t\t\t\t\tif (value instanceof Array || (value !== null && value.constructor === Object)) {\n\t\t\t\t\t\tvalue = this.toCamelCase(value);\n\t\t\t\t\t}\n\t\t\t\t\toutput[keyCamelCase] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// TRANSFER STATE\n\n\tgetStateKey(url: string, model: {}): StateKey<any> {\n\t\tconst flatMap = (s: string, x: any) => {\n\t\t\tif (typeof x === 'number') {\n\t\t\t\ts += x.toString();\n\t\t\t} else if (typeof x === 'string') {\n\t\t\t\ts += x.substr(0, 10);\n\t\t\t} else if (x && typeof x === 'object') {\n\t\t\t\ts += '_' + Object.keys(x).map(k => k + '_' + flatMap('', x[k])).join('_');\n\t\t\t}\n\t\t\treturn s;\n\t\t};\n\t\turl = flatMap(url, model);\n\t\t// console.log('ApiService.getStateKey.url', url);\n\t\tconst key: string = url.replace(/(\\W)/gm, '_');\n\t\t// this.logger.log('ApiService.getStateKey.key', key);\n\t\treturn makeStateKey(key);\n\t}\n\n\tstateGet(first?: string | {}, second?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\tconst stateKey = this.getStateKey(url, params);\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\n\t\t\tconst cached = this.state.get(stateKey, null);\n\t\t\tthis.state.remove(stateKey);\n\t\t\treturn of(cached);\n\t\t} else {\n\t\t\treturn this.http.get<any>(url, options).pipe(\n\t\t\t\ttap(x => {\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\n\tstatePost(first: string | {}, second?: {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\tconst stateKey = this.getStateKey(url, model);\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\n\t\t\tconst cached = this.state.get(stateKey, null);\n\t\t\tthis.state.remove(stateKey);\n\t\t\treturn of(cached);\n\t\t} else {\n\t\t\treturn this.http.post<T>(url, model, options).pipe(\n\t\t\t\ttap(x => {\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { Observable, of } from 'rxjs';\n\nconst TIMEOUT = 5 * 60 * 1000; // five minutes\n\n/*\nexport class StorageEvent extends Event {}\n\nexport class CookieStorageEvent extends StorageEvent { }\n\nexport class SessionStorageEvent extends StorageEvent { }\n\nexport class LocalStorageEvent extends StorageEvent { }\n*/\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class StorageService {\n\tpublic delete(name: string): void { }\n\tpublic exist(name: string): boolean { return false; }\n\tpublic get(name: string): any { return null; }\n\tpublic set(name: string, value: any, days?: number): void { }\n\tpublic on(): Observable<any> { return of(null); }\n\tpublic tryGet(): StorageService {\n\t\t// console.log('no StorageService available...');\n\t\treturn this;\n\t}\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CookieStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate storageService: StorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('CookieStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.storageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\tthis.setter(name, '', -1);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn document.cookie.indexOf(';' + name + '=') !== -1 || document.cookie.indexOf(name + '=') === 0;\n\t}\n\n\tpublic get(name: string): any {\n\t\tconst cookieName = name + '=';\n\t\tconst ca = document.cookie.split(';');\n\t\tfor (let i = 0; i < ca.length; i++) {\n\t\t\tlet c = ca[i];\n\t\t\twhile (c.charAt(0) === ' ') {\n\t\t\t\tc = c.substring(1, c.length);\n\t\t\t}\n\t\t\tif (c.indexOf(cookieName) === 0) {\n\t\t\t\tconst value = c.substring(cookieName.length, c.length);\n\t\t\t\tlet model = null;\n\t\t\t\ttry {\n\t\t\t\t\tmodel = JSON.parse(decodeURIComponent(atob(value)));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log('Cookie.get.error parsing', name, e);\n\t\t\t\t}\n\t\t\t\treturn model;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic set(name: string, value: any, days?: number) {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\tthis.setter(name, btoa(encodeURIComponent(json)), days);\n\t\t} catch (e) {\n\t\t\tconsole.log('CookieSet.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t// todo\n\t\tconst interval: number = 1000, timeout: number = TIMEOUT;\n\t\tlet i, elapsed: number = 0;\n\t\tfunction checkCookie() {\n\t\t\tif (elapsed > timeout) {\n\t\t\t\t// promise.reject('timeout');\n\t\t\t} else {\n\t\t\t\tconst c: any = this.get(name);\n\t\t\t\tif (c) {\n\t\t\t\t\t// promise.resolve(c);\n\t\t\t\t} else {\n\t\t\t\t\telapsed += interval;\n\t\t\t\t\ti = setTimeout(checkCookie, interval);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcheckCookie();\n\t\treturn of(null);\n\t}\n\n\tprivate setter(name: string, value: any, days?: number) {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tconst date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = '; expires=' + date.toUTCString();\n\t\t} else {\n\t\t\texpires = '';\n\t\t}\n\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\n\t}\n\n\tprivate isSupported(): boolean {\n\t\treturn isPlatformBrowser(this.platformId);\n\t}\n\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SessionStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate cookieStorageService: CookieStorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('SessionStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.cookieStorageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\twindow.sessionStorage.removeItem(name);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn window.sessionStorage[name] !== undefined;\n\t}\n\n\tpublic get(name: string): any {\n\t\tlet value = null;\n\t\tif (window.sessionStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('SessionStorage.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t/*\n\t\treturn $promise(function (promise) {\n\t\t\tconst timeout = TIMEOUT;\n\t\t\tlet i;\n\t\t\tfunction storageEvent(e) {\n\t\t\t\tif (i) {\n\t\t\t\t\tclearTimeout(i);\n\t\t\t\t}\n\t\t\t\tif (e.originalEvent.key === name) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\n\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log('SessionStorage.on.error parsing', name, error);\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return fromEvent(window, 'storage');\n\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\ti = setTimeout(function () {\n\t\t\t\tpromise.reject('timeout');\n\t\t\t}, timeout);\n\t\t});\n\t\t*/\n\t\treturn of(null);\n\t}\n\n\tpublic set(name: string, value: any, days?: number): void {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\twindow.sessionStorage.setItem(name, json);\n\t\t} catch (e) {\n\t\t\tconsole.log('SessionStorage.set.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tprivate isSupported(): boolean {\n\t\tlet supported: boolean = false;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\ttry {\n\t\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.sessionStorage.setItem('test', '1');\n\t\t\t\t\twindow.sessionStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t}\n\t\treturn supported;\n\t}\n\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LocalStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate cookieStorageService: CookieStorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('LocalStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.cookieStorageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\twindow.localStorage.removeItem(name);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn window.localStorage[name] !== undefined;\n\t}\n\n\tpublic get(name: string): any {\n\t\tlet value = null;\n\t\tif (window.localStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('LocalStorage.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t/*\n\t\treturn $promise(function (promise) {\n\t\t\tconst timeout = TIMEOUT;\n\t\t\tlet i;\n\t\t\tfunction storageEvent(e) {\n\t\t\t\tif (i) {\n\t\t\t\t\tclearTimeout(i);\n\t\t\t\t}\n\t\t\t\tif (e.originalEvent.key === name) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\n\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log('LocalStorage.on.error parsing', name, error);\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return fromEvent(window, 'storage');\n\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\ti = setTimeout(function () {\n\t\t\t\tpromise.reject('timeout');\n\t\t\t}, timeout);\n\t\t});\n\t\t*/\n\t\treturn of(null);\n\t}\n\n\tpublic set(name: string, value: any, days?: number): void {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\twindow.localStorage.setItem(name, json);\n\t\t} catch (e) {\n\t\t\tconsole.log('LocalStorage.set.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tprivate isSupported(): boolean {\n\t\tlet supported: boolean = false;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\ttry {\n\t\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.localStorage.setItem('test', '1');\n\t\t\t\t\twindow.localStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t}\n\t\treturn supported;\n\t}\n\n}\n","import { HttpRequest } from '@angular/common/http';\nimport { Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { AuthToken } from './auth';\nimport { LocalStorageService } from '../storage/storage.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class AuthService {\n\n\tprivate cachedRequests: Array<HttpRequest<any>> = [];\n\tprivate paths: string[] = [];\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate injector: Injector,\n\t\tprivate localStorageService: LocalStorageService,\n\t) { }\n\n\tsetToken(authToken: AuthToken): void {\n\t\tthis.localStorageService.set('authToken', authToken);\n\t\tthis.retryFailedRequests();\n\t}\n\n\tgetToken(): AuthToken {\n\t\treturn this.localStorageService.get('authToken') as AuthToken;\n\t}\n\n\tgetFakeToken(): AuthToken {\n\t\treturn new AuthToken('fakeToken');\n\t}\n\n\tisValid(authToken: AuthToken): boolean {\n\t\t// return a boolean reflecting whether or not the token is expired\n\t\treturn authToken && (authToken.expiresIn > Date.now() || authToken.expiresIn === 0);\n\t}\n\n\tisAuthenticated(): boolean {\n\t\tconst authToken = this.getToken();\n\t\treturn this.isValid(authToken);\n\t}\n\n\tcollectFailedRequest(request): void {\n\t\tthis.cachedRequests.push(request);\n\t}\n\n\tretryFailedRequests(): void {\n\t\t// this method can be called after the token is refreshed\n\t\t// console.log('AuthService.retryFailedRequests');\n\t\t// retry the requests.\n\t}\n\n}\n","import { InjectionToken } from '@angular/core';\n\nexport interface Bundles { [key: string]: () => any; }\n\nexport const BUNDLES = new InjectionToken<Bundles>('core.bundles');\n","import { ComponentRef, Directive, Inject, Injector, Input, NgModuleFactory, NgModuleFactoryLoader, NgModuleRef, OnDestroy, OnInit, Type, ViewContainerRef } from '@angular/core';\nimport { Bundles, BUNDLES } from './bundle';\n\nexport type ModuleWithRoot = Type<any> & { rootComponent: Type<any> };\n\n@Directive({\n\tselector: '[bundle]'\n})\nexport class BundleDirective implements OnInit, OnDestroy {\n\n\t@Input() bundle: keyof Bundles;\n\t@Input() data?: any;\n\tprivate moduleRef_: NgModuleRef<any>;\n\tprivate componentRef_: ComponentRef<any>;\n\n\tconstructor(\n\t\t@Inject(BUNDLES) private bundles,\n\t\tprivate injector: Injector,\n\t\tprivate loader: NgModuleFactoryLoader,\n\t\tprivate container: ViewContainerRef,\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tthis.loader.load(this.bundles[this.bundle]).then((moduleFactory: NgModuleFactory<any>) => {\n\t\t\tconst moduleRef = moduleFactory.create(this.injector);\n\t\t\tthis.moduleRef_ = moduleRef;\n\t\t\tconst rootComponentType = moduleRef.injector.get('LAZY_ROOT_COMPONENT');\n\t\t\t// console.log(rootComponentType);\n\t\t\tconst factory = moduleRef.componentFactoryResolver.resolveComponentFactory(rootComponentType);\n\t\t\tconst componentRef = this.container.createComponent(factory);\n\t\t\tconst instance = componentRef.instance;\n\t\t\t// instance.data = this.data; // !!!\n\t\t\tthis.componentRef_ = componentRef;\n\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.componentRef_) {\n\t\t\tthis.componentRef_.destroy();\n\t\t}\n\t\tif (this.moduleRef_) {\n\t\t\tthis.moduleRef_.destroy();\n\t\t}\n\t}\n\n}\n","import { AfterContentChecked, Directive, ElementRef, Input, Renderer2, TemplateRef, ViewContainerRef } from '@angular/core';\n\n@Directive({\n\tselector: '[default]',\n})\nexport class DefaultContentDirective implements AfterContentChecked {\n\n\t@Input() default: TemplateRef<any>;\n\tprivate element: HTMLElement;\n\tprivate hasContent = true;\n\n\tconstructor(\n\t\telement: ElementRef,\n\t\tprivate container: ViewContainerRef,\n\t\tprivate renderer: Renderer2) {\n\t\tthis.element = element.nativeElement;\n\t}\n\n\tngAfterContentChecked(): void {\n\t\tlet hasContent = false;\n\t\tconsole.log('DefaultContentDirective', this.element.childNodes);\n\t\tfor (let i = this.element.childNodes.length - 1; i >= 0; --i) {\n\t\t\tconst node = this.element.childNodes[i];\n\t\t\tif (node.nodeType === 1 || node.nodeType === 3) {\n\t\t\t\thasContent = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (hasContent !== this.hasContent) {\n\t\t\tthis.hasContent = hasContent;\n\t\t\tif (hasContent) {\n\t\t\t\t// this.renderer.removeClass(this.element, 'is-empty');\n\t\t\t\tthis.container.clear();\n\t\t\t} else {\n\t\t\t\t// this.renderer.addClass(this.element, 'is-empty');\n\t\t\t\tthis.container.createEmbeddedView(this.default);\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n\tselector: 'core-module',\n\ttemplate: `<span class=\"core-module\">core {{version}}</span>`,\n\tstyles: []\n})\nexport class CoreModuleComponent implements OnInit {\n\n\tversion: string = '0.0.12';\n\n\tconstructor() { }\n\n\tngOnInit() {\n\t}\n\n}\n","\nimport { Component, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Component({\n\ttemplate: ''\n})\nexport class DisposableComponent implements OnDestroy {\n\n\tprotected unsubscribe: any = new Subject();\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe.next();\n\t\tthis.unsubscribe.complete();\n\t\t// console.log('DisposableComponent.ngOnDestroy', this);\n\t}\n\n}\n","\nimport { Directive, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Directive({\n\tselector: '[disposable-directive]'\n})\nexport class DisposableDirective implements OnDestroy {\n\n\tprotected unsubscribe: any = new Subject();\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe.next();\n\t\tthis.unsubscribe.complete();\n\t\t// console.log('DisposableDirective.ngOnDestroy', this);\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'highlight',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HighlightPipe implements PipeTransform {\n\n\ttransform(text: string, query: string): string {\n\t\tif (!query) {\n\t\t\treturn text;\n\t\t}\n\t\ttext = this.encodeHTML(text);\n\t\tquery = this.encodeHTML(query);\n\t\tconst regExp = new RegExp('&[^;]+;|' + this.escapeRegexChars(query), 'gi');\n\t\treturn text.replace(regExp, function (match) {\n\t\t\treturn match.toLowerCase() === query.toLowerCase() ? '<strong>' + match + '</strong>' : match;\n\t\t});\n\t}\n\n\tescapeRegexChars(text: string) {\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n\t}\n\n\tsafeToString(text: string) {\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\n\t}\n\n\tencodeHTML(text: string) {\n\t\treturn this.safeToString(text)\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;');\n\t}\n\n}\n","\nimport { Location } from '@angular/common';\nimport { Injectable, Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'segment',\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SegmentPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate location: Location\n\t) { }\n\n\ttransform(segments: any[] | string): any[] {\n\t\tsegments = segments != null ? (Array.isArray(segments) ? segments : segments.split('/')) : [];\n\t\tlet path: string = segments.join('/');\n\t\tpath = this.location.normalize(path);\n\t\tif (path.indexOf('/') !== 0) {\n\t\t\tpath = `/${path}`;\n\t\t}\n\t\tsegments = path.split('/');\n\t\treturn segments;\n\t}\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ApiService } from '../api/api.service';\nimport { Identity } from './identity';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class IdentityService<T extends Identity> extends ApiService<T> {\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t}\n\n\tget collection(): string {\n\t\treturn '/api/identity';\n\t}\n\n\tgetDetailById(id: number | string): Observable<T> {\n\t\treturn this.get({ id });\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { EventEmitter, Injectable, Injector } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { filter, map, switchMap } from 'rxjs/operators';\nimport { IdentityService } from '../models/identity.service';\nimport { Translate } from './translate';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class TranslateService<T extends Translate> extends IdentityService<T> {\n\n\tstatic cache: {} = {};\n\tstatic lang_: string = null;\n\n\tget collection(): string {\n\t\treturn '/api/translate';\n\t}\n\n\tpublic events: EventEmitter<any> = new EventEmitter();\n\tpublic missingHandler?: Function;\n\n\tprivate language_: any = new BehaviorSubject<any>(undefined);\n\tprivate languages_: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\n\n\tpublic get lang(): string {\n\t\treturn TranslateService.lang_;\n\t}\n\tpublic set lang(lang: string) {\n\t\tif (lang !== TranslateService.lang_) {\n\t\t\tTranslateService.lang_ = lang;\n\t\t\tconst languages = this.languages_.getValue();\n\t\t\tif (languages.length) {\n\t\t\t\tconst language = languages.find(x => x.lang === lang);\n\t\t\t\tthis.language_.next(language);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get language() {\n\t\treturn this.language_.getValue();\n\t}\n\n\tpublic get languages() {\n\t\treturn this.languages_.getValue();\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t\tthis.languages_.next(this.config.languages);\n\t}\n\n\tpublic observe$(): Observable<{}> {\n\t\t// console.log(new Error().stack);\n\t\treturn this.language_.pipe(\n\t\t\tfilter(x => x !== undefined),\n\t\t\tswitchMap((language: any) => this.getTranslation(language.lang)),\n\t\t);\n\t}\n\n\tpublic getTranslation(lang: string): Observable<{}> {\n\t\tif (!lang || !lang.trim()) {\n\t\t\treturn of(null);\n\t\t}\n\t\tTranslateService.lang_ = lang;\n\t\tif (TranslateService.cache[lang]) {\n\t\t\treturn of(TranslateService.cache[lang]);\n\t\t} else {\n\t\t\treturn this.get(`?lang=${lang}`, { lang }).pipe(\n\t\t\t\t// take(1),\n\t\t\t\tmap((x: Translate[]) => {\n\t\t\t\t\tif (x.length && x[0]) {\n\t\t\t\t\t\tconst labels = x[0].labels;\n\t\t\t\t\t\tTranslateService.cache[lang] = labels;\n\t\t\t\t\t\tthis.events.emit(labels);\n\t\t\t\t\t\treturn labels;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn of(null);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\t// tap(x => this.logger.log(`found label matching \"${lang}\"`))\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic getTranslate(key: string, defaultValue?: string, params?: any): string | any {\n\t\t// console.log('TranslateService.getTranslate', key, TranslateService.cache, TranslateService.lang_);\n\t\tif (key) {\n\t\t\tlet value: string | null = null;\n\t\t\tlet labels: any = TranslateService.cache[TranslateService.lang_];\n\t\t\t// console.log('labels', TranslateService.lang_, TranslateService.cache, labels);\n\t\t\tif (labels) {\n\t\t\t\tconst keys: string[] = key.split('.');\n\t\t\t\tlet k = keys.shift();\n\t\t\t\twhile (keys.length > 0 && labels[k]) {\n\t\t\t\t\tlabels = labels[k];\n\t\t\t\t\tk = keys.shift();\n\t\t\t\t}\n\t\t\t\tvalue = labels[k]; // || `{${k}}`;\n\t\t\t\tif (typeof value !== 'string') {\n\t\t\t\t\tvalue = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.parseTranslate(value, key, defaultValue, params);\n\t\t}\n\t}\n\n\tpublic transform(key: string, defaultValue?: string, params?: any): string | undefined {\n\t\tconst value = this.getTranslate(key, defaultValue, params);\n\t\treturn value;\n\t}\n\n\tprivate parseTranslate(value: string | null, key: string, defaultValue?: string, params?: any): string | any {\n\t\tif (value == null) {\n\t\t\treturn defaultValue || this.missingTranslate(key);\n\t\t} else if (params) {\n\t\t\treturn this.parseParams(value, params);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprivate missingTranslate(key: string): string {\n\t\tif (this.missingHandler) {\n\t\t\treturn typeof this.missingHandler === 'function' ?\n\t\t\t\tthis.missingHandler(key) :\n\t\t\t\tthis.missingHandler;\n\t\t}\n\t\treturn key;\n\t}\n\n\tprivate parseParams(value: string, params: any): string {\n\t\tconst TEMPLATEREGEXP_: RegExp = /@([^{}\\s]*)/g; // /{{\\s?([^{}\\s]*)\\s?}}/g;\n\t\treturn value.replace(TEMPLATEREGEXP_, (text: string, key: string) => {\n\t\t\tconst replacer: string = params[key] as string;\n\t\t\treturn typeof replacer !== 'undefined' ? replacer : text;\n\t\t});\n\t}\n\n\tpublic use(lang: string) {\n\n\t}\n\n\tpublic setDefaultLang(lang: string) {\n\n\t}\n\n\tpublic addLangs(lang: string[]) {\n\n\t}\n\n\tpublic getBrowserLang(): string {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tconst lang = this.getFirstBrowserLang() || this.config.defaultLanguage; // navigator.languages ? navigator.languages[0] : (navigator.language || navigator['userLanguage'] || this.config.defaultLanguage);\n\t\t\t// console.log('getBrowserLang', lang, navigator.languages);\n\t\t\treturn lang;\n\t\t} else {\n\t\t\treturn this.config.defaultLanguage;\n\t\t}\n\t}\n\n\tpublic getFirstBrowserLang() {\n\t\tconst lang = this.getFirstBrowserLocale();\n\t\tif (lang) {\n\t\t\treturn lang.split('-')[0];\n\t\t}\n\t}\n\n\tpublic getFirstBrowserLocale() {\n\t\tconst navigator = window.navigator;\n\t\tconst properties = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'];\n\t\tlet lang;\n\t\tif (Array.isArray(navigator.languages)) {\n\t\t\tlang = navigator.languages[0];\n\t\t}\n\t\tlet i = 0;\n\t\twhile (!lang && i < properties.length) {\n\t\t\tlang = navigator[properties[i]];\n\t\t\ti++;\n\t\t}\n\t\treturn lang;\n\t}\n\n}\n","\n\nimport { isPlatformBrowser, isPlatformServer, Location } from '@angular/common';\nimport { Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { ActivatedRoute, NavigationStart, Params, Router } from '@angular/router';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { distinctUntilChanged, filter, switchMap } from 'rxjs/operators';\nimport { CoreService } from '../config/core.service';\nimport { SegmentPipe } from '../pipes/segment.pipe';\nimport { Translate } from '../translate/translate';\nimport { TranslateService } from '../translate/translate.service';\n\ndeclare const Buffer;\ndeclare const process;\n\n// @dynamic\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class RouteService {\n\n\tstatic startTime: number;\n\tstatic endTime: number;\n\tprivate urlStrategy: string;\n\tprivate _language: any = new BehaviorSubject({});\n\tpublic readonly language: Observable<any> = this._language.asObservable();\n\tprivate _languages: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\n\tpublic readonly languages: Observable<any[]> = this._languages.asObservable();\n\tprivate _lang: string;\n\tprivate path: string;\n\tpublic params: Observable<Params>;\n\tpublic queryParams: Observable<Params>;\n\tpublic currentMarket: string;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate coreService: CoreService,\n\t\tprivate injector: Injector,\n\t\tprivate translateService: TranslateService<Translate>,\n\t\tprivate location: Location,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate segment: SegmentPipe,\n\t) {\n\t\tthis.urlStrategy = this.coreService.options.urlStrategy;\n\t\tthis._languages.next(this.coreService.options.languages);\n\t\tthis.currentMarket = this.coreService.options.defaultMarket;\n\t\tthis.setLanguages();\n\t\tif (this.coreService.options.useLang || this.coreService.options.useMarket) {\n\t\t\tthis.subscribeToRouter();\n\t\t}\n\t}\n\n\tprivate get lang(): string {\n\t\treturn this._lang;\n\t}\n\n\tprivate set lang(lang: string) {\n\t\tif (lang !== this._lang) {\n\t\t\tthis._lang = lang;\n\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\tthis._language.next(language);\n\t\t\tthis.translateService.use(lang);\n\t\t\t// console.log('RouteService.set lang', lang, this.coreService.options.useLang);\n\t\t\tif (this.coreService.options.useLang) {\n\t\t\t\tconst _lang: string = this._lang;\n\t\t\t\tlet path = this.location.path();\n\t\t\t\tif (path.indexOf(`/${_lang}`) === 0) {\n\t\t\t\t\tpath = path.replace(`/${_lang}`, `/${lang}`);\n\t\t\t\t} else if (path.indexOf(`/${lang}`) !== 0) {\n\t\t\t\t\tpath = `/${lang}` + path;\n\t\t\t\t}\n\t\t\t\tthis.path = path;\n\t\t\t\t// const langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get currentLang(): string {\n\t\treturn this._lang;\n\t}\n\n\tpublic pageParams$: BehaviorSubject<Params> = new BehaviorSubject({});\n\tpublic getPageParams(): Observable<Params> {\n\t\t// console.log('RouteService.getPageParams', this.router.url);\n\t\treturn this.route.queryParams.pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tswitchMap(params => {\n\t\t\t\t// console.log(params);\n\t\t\t\tconst parsed = this.parseParams(params);\n\t\t\t\tthis.pageParams$.next(parsed);\n\t\t\t\treturn of(parsed);\n\t\t\t}),\n\t\t\t// tap(params => console.log('RouteService.getPageParams', params)),\n\t\t);\n\t}\n\n\tpublic parseParams(params: any): any {\n\t\tconst parsed = {};\n\t\tObject.keys(params).forEach(k => parsed[k] = this.parse(params[k]));\n\t\t/*\n\t\tfor (const key in params) {\n\t\t\tif (typeof (params[key]) === 'string') {\n\t\t\t\tparsed[key] = this.parse(params[key]);\n\t\t\t} else {\n\t\t\t\tparsed[key] = params[key];\n\t\t\t}\n\t\t}\n\t\t*/\n\t\treturn parsed;\n\t}\n\n\tpublic serializeParams(params: any) {\n\t\tconst serialized = {};\n\t\tObject.keys(params).forEach(k => serialized[k] = this.serialize(params[k]));\n\t\treturn serialized;\n\t}\n\n\tpublic parse(base64) {\n\t\ttry {\n\t\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t\treturn JSON.parse(window.atob(base64));\n\t\t\t} else {\n\t\t\t\treturn JSON.parse(Buffer.from(base64, 'base64').toString('ascii'));\n\t\t\t}\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic serialize(object) {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\treturn window.btoa(JSON.stringify(object));\n\t\t} else {\n\t\t\treturn Buffer.from(JSON.stringify(object), 'ascii').toString('base64');\n\t\t}\n\t}\n\n\tpublic getId(): number {\n\t\treturn +this.route.snapshot.paramMap.get('id');\n\t}\n\n\tpublic getSlug(): string {\n\t\treturn this.route.snapshot.paramMap.get('slug');\n\t}\n\n\tpublic toRoute(data: any[] | string): any[] {\n\t\tconst segments = this.segment.transform(data);\n\t\tif (this.coreService.options.useMarket) {\n\t\t\tconst market: string = this.currentMarket;\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\tsegments.splice(marketIndex, 0, market);\n\t\t}\n\t\tif (this.coreService.options.useLang) {\n\t\t\tconst lang: string = this._lang;\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\tsegments.splice(langIndex, 0, lang);\n\t\t}\n\t\t// console.log('RouteService.toRoute', segments);\n\t\treturn segments;\n\t}\n\n\tpublic toSlug(data: any[] | string): any[] {\n\t\tconst segments = this.segment.transform(data);\n\t\tlet paths = segments.filter(x => {\n\t\t\treturn typeof x === 'string';\n\t\t});\n\t\tconst datas = segments.filter(x => {\n\t\t\treturn typeof x !== 'string';\n\t\t});\n\t\tif (this.coreService.options.useMarket) {\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\tif (paths.length > marketIndex) {\n\t\t\t\tpaths[marketIndex] = '*';\n\t\t\t}\n\t\t}\n\t\tif (this.coreService.options.useLang) {\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\tif (paths.length > langIndex) {\n\t\t\t\tpaths[langIndex] = '*';\n\t\t\t}\n\t\t}\n\t\tpaths = paths.join('/').replace(/\\/\\*/gi, '').split('/');\n\t\t// console.log('RouteService.toSlug', data, paths);\n\t\treturn paths.concat(datas);\n\t}\n\n\tpublic toParams(data: any): any {\n\t\treturn {\n\t\t\tdata: window.btoa(JSON.stringify(data))\n\t\t};\n\t}\n\n\tpublic toData(params: any): any {\n\t\tif (params && params.data) {\n\t\t\treturn JSON.parse(window.atob(params.data));\n\t\t}\n\t}\n\n\t/*\n\tpublic getParams(): Observable<ComponentFactory<PageComponent>> {\n\t\treturn this.router.events.pipe(\n\t\t\tfilter(event => event instanceof ActivationEnd),\n\t\t\tmap(() => this.route),\n\t\t\tdistinctUntilChanged(),\n\t\t\tmap(route => route.firstChild),\n\t\t\tswitchMap(route => route.params),\n\t\t\tconcatMap(x => {\n\t\t\t\treturn of(this.toData(x));\n\t\t\t})\n\t\t);\n\t}\n\t*/\n\n\tpublic setLanguage(lang: string, silent?: boolean) {\n\t\tthis.lang = lang;\n\t\tif (this.coreService.options.useLang && this.path) {\n\t\t\t// console.log('RouteService.setLanguage', this.path, this._lang, lang, silent);\n\t\t\tif (silent) {\n\t\t\t\tthis.location.replaceState(this.path);\n\t\t\t} else {\n\t\t\t\tthis.router.navigate([this.path]);\n\t\t\t}\n\t\t}\n\t}\n\n\t// PRIVATE METHODS\n\n\tprivate setLanguages() {\n\t\tthis.translateService.addLangs(this.coreService.options.languages ? this.coreService.options.languages.map(x => x.lang) : []);\n\t\tthis.translateService.setDefaultLang(this.coreService.options.defaultLanguage);\n\t\t// this.setLanguage(this.detectLanguage(), true);\n\t\tthis.setLanguage(this.coreService.options.defaultLanguage, true);\n\t\t/*\n\t\tthis.translateService.onLangChange.subscribe((e: LangChangeEvent) => {\n\t\t\t// console.log('RouteService.onLangChange', e);\n\t\t});\n\t\t*/\n\t}\n\n\tprivate subscribeToRouter() {\n\t\tthis.router.events.pipe(\n\t\t\tfilter(event => event instanceof NavigationStart)\n\t\t).subscribe((event: NavigationStart) => {\n\t\t\tconst location = this.location.normalize(event.url).split('/');\n\t\t\tif (this.coreService.options.useMarket) {\n\t\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\t\tconst market = location[marketIndex];\n\t\t\t\tif (market !== this.currentMarket) {\n\t\t\t\t\tthis.currentMarket = market;\n\t\t\t\t\t// console.log('RouteService.setMarket', market, event.url);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.coreService.options.useLang) {\n\t\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\t\tconst lang = location[langIndex];\n\t\t\t\tif (lang !== this._lang) {\n\t\t\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\t\t\tthis._language.next(language);\n\t\t\t\t\tthis.translateService.use(lang);\n\t\t\t\t\t// console.log('RouteService.setLang', lang, this._lang, langIndex, location, event.url);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate detectLanguage(): string {\n\t\tlet acceptLanguage: string = null;\n\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t/*\n\t\t\t// server side express engine\n\t\t\tapp.engine('html',  (_, options, callback) => {\n\t\t\t\tlet engine = ngExpressEngine({\n\t\t\t\t\tbootstrap: ServerAppModule,\n\t\t\t\t\tproviders: [ { provide: 'request', useFactory: () => options.req } ]\n\t\t\t\t});\n\t\t\t\tengine(_, options, callback)\n\t\t\t})\n\t\t\t*/\n\t\t\tconst request = this.injector.get('request');\n\t\t\tif (request) {\n\t\t\t\tacceptLanguage = request.headers['accept-language'];\n\t\t\t\tconst languages: string[] = acceptLanguage.match(/[a-zA-Z\\-]{2,10}/g) || [];\n\t\t\t\tif (languages.length > 0) {\n\t\t\t\t\tacceptLanguage = languages[0].split('-')[0];\n\t\t\t\t} else {\n\t\t\t\t\tacceptLanguage = null;\n\t\t\t\t}\n\t\t\t\t// console.log('request', request, 'acceptLanguage', acceptLanguage);\n\t\t\t}\n\t\t\t// console.log('RouteService.isPlatformServer', this.platformId, acceptLanguage);\n\t\t} else if (isPlatformBrowser(this.platformId)) {\n\t\t\tacceptLanguage = this.translateService.getBrowserLang();\n\t\t\t// console.log('RouteService.isPlatformBrowser', this.platformId, acceptLanguage);\n\t\t}\n\t\tlet detectedLanguage: string = this.coreService.options.defaultLanguage;\n\t\tconst regexp: RegExp = new RegExp(`(${this.coreService.options.languages ? this.coreService.options.languages.map(x => x.lang).join('|') : ''})`, 'gi');\n\t\tconst match = (acceptLanguage || '').match(regexp);\n\t\tdetectedLanguage = match ? match[0] : detectedLanguage;\n\t\t// console.log('RouteService.detectLanguage', detectedLanguage);\n\t\treturn detectedLanguage;\n\t}\n\n\tpublic getTime() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\treturn (performance || Date).now();\n\t\t} else {\n\t\t\tconst time = process.hrtime();\n\t\t\treturn (time[0] * 1e9 + time[1]) / 1e6;\n\t\t}\n\t}\n\n\tpublic start() {\n\t\tRouteService.startTime = this.getTime();\n\t}\n\n\tpublic end() {\n\t\tRouteService.endTime = this.getTime();\n\t\tconsole.log('RouteService.end', RouteService.endTime - RouteService.startTime);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HttpStatusCodeService {\n\n\tprivate statusCode: number;\n\tprivate redirectUrl: string;\n\n\tconstructor() {\n\t\tthis.statusCode = 200;\n\t\tthis.redirectUrl = null;\n\t}\n\n\tpublic setStatusCode(statusCode: number, redirectUrl: string = null) {\n\t\tthis.statusCode = statusCode;\n\t\tthis.redirectUrl = redirectUrl;\n\t}\n\n\tpublic getStatusCode(): number {\n\t\treturn (this.statusCode === 309 ? 301 : this.statusCode);\n\t}\n\n\tpublic getRedirectUrl(): string {\n\t\treturn this.redirectUrl;\n\t}\n\n}\n","\nimport { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse, HttpResponseBase } from '@angular/common/http';\nimport { Injectable, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { CoreConfig } from '../config/core.config';\nimport { CoreService } from '../config/core.service';\nimport { LoggerErrorStrategy } from '../logger/logger';\nimport { Logger } from '../logger/logger.service';\nimport { RouteService } from '../route/route.service';\nimport { HttpStatusCodeService } from './http-status-code.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HttpResponseInterceptor implements HttpInterceptor {\n\n\tprivate loggerErrorStrategy_: LoggerErrorStrategy = LoggerErrorStrategy.Server;\n\n\tprivate config_: CoreConfig;\n\tget config(): CoreConfig {\n\t\tif (!this.config_) {\n\t\t\tthis.config_ = this.injector.get(CoreService).options;\n\t\t}\n\t\treturn this.config_;\n\t}\n\n\tprivate logger_: Logger;\n\tget logger() {\n\t\tif (!this.logger_) {\n\t\t\tthis.logger_ = this.injector.get(Logger);\n\t\t}\n\t\treturn this.logger_;\n\t}\n\n\tprivate router_: Router;\n\tget router() {\n\t\tif (!this.router_) {\n\t\t\tthis.router_ = this.injector.get(Router);\n\t\t}\n\t\treturn this.router_;\n\t}\n\n\tprivate routeService_: RouteService;\n\tget routeService() {\n\t\tif (!this.routeService_) {\n\t\t\tthis.routeService_ = this.injector.get(RouteService);\n\t\t}\n\t\treturn this.routeService;\n\t}\n\n\tconstructor(\n\t\tprivate injector: Injector,\n\t\tprivate statusCodeService: HttpStatusCodeService,\n\t) {\n\t\tthis.loggerErrorStrategy_ = this.config.loggerErrorStrategy || LoggerErrorStrategy.Server;\n\t}\n\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\t\t// injecting request\n\t\t// parsing response\n\t\treturn next.handle(request).pipe(\n\t\t\ttap((response: HttpEvent<any>) => {\n\t\t\t\tthis.logger.httpError = null;\n\t\t\t\t// this.logger.log(response);\n\t\t\t\tif (response instanceof HttpResponse) {\n\t\t\t\t\t// console.log('response instanceof HttpResponse');\n\t\t\t\t\t// do stuff with response if you want\n\t\t\t\t\tif (response.status >= this.loggerErrorStrategy_) {\n\t\t\t\t\t\tthis.logger.http(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcatchError((response: HttpResponseBase) => {\n\t\t\t\t// console.warn('HttpResponseInterceptor', response);\n\t\t\t\tif (response instanceof HttpErrorResponse) {\n\t\t\t\t\t// this.statusCodeService.setStatusCode(response.status);\n\t\t\t\t\t// !!! add logErrorStrategy (100 INFORMATIONAL, 200 SUCCESS, 300 REDIRECT, 400 CLIENT, 500 SERVER, 999 NONE)\n\t\t\t\t\tif (response.status >= this.loggerErrorStrategy_) {\n\t\t\t\t\t\tthis.logger.http(response);\n\t\t\t\t\t}\n\t\t\t\t\t/*\n\t\t\t\t\tswitch (response.status) {\n\t\t\t\t\t\tcase 401:\n\t\t\t\t\t\t\t// unauthorized\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 404:\n\t\t\t\t\t\t\t// not found\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 409:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 410:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis.logger.http(response);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t}\n\t\t\t\treturn throwError(response);\n\t\t\t})\n\t\t);\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Component, ElementRef, Inject, Input, OnChanges, PLATFORM_ID, ViewChild, ViewEncapsulation } from '@angular/core';\n// require('json-formatter-js').default\nimport JSONFormatter from 'json-formatter-js';\nimport { isArray, isObject } from 'util';\n\n@Component({\n\tselector: 'json-formatter',\n\ttemplate: `<div #jsonFormatter></div>`,\n\tstyleUrls: ['./json-formatter.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class JsonFormatterComponent implements OnChanges {\n\t@ViewChild(`jsonFormatter`, { static: true }) input: ElementRef;\n\n\t@Input() json: Array<any> | Object | any;\n\n\telementRef: ElementRef;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t) { }\n\n\tngOnChanges() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tif (!isObject(this.json) && !isArray(this.json)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// console.log('JsonFormatterComponent', this.json);\n\t\t\tif (this.elementRef) {\n\t\t\t\tthis.input.nativeElement.removeChild(this.elementRef.nativeElement);\n\t\t\t}\n\t\t\t// const JSONFormatter = require('json-formatter-js').default;\n\t\t\tconst formatter = new JSONFormatter(this.json);\n\t\t\tconst elementRef = formatter.render();\n\t\t\tthis.input.nativeElement.appendChild(elementRef);\n\t\t\tthis.elementRef = new ElementRef(elementRef);\n\t\t}\n\t}\n}\n","import { EventEmitter, Injectable, Injector } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { catchError, debounceTime, filter, map, switchMap, tap } from 'rxjs/operators';\nimport { ApiService } from '../api/api.service';\nimport { Label } from './label';\n\nexport class LabelKey {\n\tid?: string;\n\tvalue?: string;\n\tdefaultValue?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelService<T extends Label> extends ApiService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/label';\n\t}\n\n\tprivate keys: { [key: string]: LabelKey; } = {};\n\tprivate values$: BehaviorSubject<{ [key: string]: string; }> = new BehaviorSubject({});\n\tprivate emitter$: EventEmitter<any> = new EventEmitter();\n\n\tpublic missingHandler?: Function;\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t}\n\n\ttransform(key: string, defaultValue?: string, params?: any): string | undefined {\n\t\tconst values = this.values$.getValue();\n\t\tif (values.hasOwnProperty(key)) {\n\t\t\treturn this.parseLabel(values[key], params);\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\n\t\t\tvalues[key] = null;\n\t\t\tObject.defineProperty(this.keys, key, {\n\t\t\t\tvalue: { id: key, defaultValue: defaultValue },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.emitter$.emit();\n\t\t\treturn null;\n\t\t}\n\t}\n\n\ttransform$(key: string, defaultValue?: string, params?: any): Observable<string | undefined> {\n\t\tconst values = this.values$.getValue();\n\t\tif (values.hasOwnProperty(key)) {\n\t\t\treturn of(this.parseLabel(values[key], params));\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\n\t\t\tvalues[key] = null;\n\t\t\tObject.defineProperty(this.keys, key, {\n\t\t\t\tvalue: { id: key, defaultValue: defaultValue },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.emitter$.emit();\n\t\t}\n\t\treturn this.values$.pipe(\n\t\t\tmap(values => this.parseLabel(values[key], params))\n\t\t);\n\t}\n\n\tobserve$(): Observable<{ [key: string]: string; }> {\n\t\treturn this.emitter$.pipe(\n\t\t\tdebounceTime(1),\n\t\t\tswitchMap(x => this.collect$()),\n\t\t\tfilter(x => x !== null),\n\t\t);\n\t}\n\n\tcollect$(): Observable<{ [key: string]: string; }> {\n\t\tif (Object.keys(this.keys).length) {\n\t\t\tconst keys = Object.keys(this.keys).map(x => this.keys[x]);\n\t\t\tthis.keys = {};\n\t\t\treturn this.statePost(keys).pipe(\n\t\t\t\tmap((labels: LabelKey[]) => {\n\t\t\t\t\treturn labels.reduce((values, x) => {\n\t\t\t\t\t\tvalues[x.id] = this.getLabel(x);\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}, {});\n\t\t\t\t}),\n\t\t\t\ttap((labels: { [key: string]: string; }) => {\n\t\t\t\t\tconst values = this.values$.getValue();\n\t\t\t\t\tObject.assign(values, labels);\n\t\t\t\t\tthis.values$.next(values);\n\t\t\t\t}),\n\t\t\t\tcatchError(error => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tconst labels = keys.reduce((values, x) => {\n\t\t\t\t\t\tvalues[x.id] = this.getLabel(x);\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}, {});\n\t\t\t\t\tconst values = this.values$.getValue();\n\t\t\t\t\tObject.assign(values, labels);\n\t\t\t\t\t// return this.values$.next(values);\n\t\t\t\t\treturn of(null);\n\t\t\t\t}),\n\t\t\t);\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n\tpublic parseLabel(value: string, params: any): string {\n\t\tif (value && params) {\n\t\t\tconst TEMPLATE_REGEXP: RegExp = /@([^{}\\s]*)/g;\n\t\t\treturn value.replace(TEMPLATE_REGEXP, (text: string, key: string) => {\n\t\t\t\tconst replacer: string = params[key] as string;\n\t\t\t\treturn typeof replacer !== 'undefined' ? replacer : text;\n\t\t\t});\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t}\n\n\tprivate getLabel(label: LabelKey): string | undefined {\n\t\treturn label.value || label.defaultValue || this.getMissingLabel(label);\n\t}\n\n\tprivate getMissingLabel(label: LabelKey): string | undefined {\n\t\tif (typeof this.missingHandler === 'function') {\n\t\t\treturn this.missingHandler(label);\n\t\t}\n\t\treturn label.id;\n\t}\n\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisposableDirective } from '../disposable/disposable.directive';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Directive({\n\tselector: '[label]'\n})\nexport class LabelDirective extends DisposableDirective implements OnInit {\n\n\t// key: string;\n\t// innerHTML: string;\n\t@Input() label: string;\n\t@Input() labelParams: any;\n\n\tconstructor(\n\t\tprivate element: ElementRef,\n\t\tprivate labelService: LabelService<Label>,\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\tthis.labelService.transform$(this.label, this.element.nativeElement.innerHTML, this.labelParams).pipe(\n\t\t\ttakeUntil(this.unsubscribe)\n\t\t).subscribe(label => {\n\t\t\tthis.element.nativeElement.innerHTML = label;\n\t\t});\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Pipe({\n\tname: 'label',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate labelService: LabelService<Label>,\n\t) { }\n\n\ttransform(key: string, defaultValue?: string, params?: any): string | undefined {\n\t\treturn this.labelService.transform(key, defaultValue, params);\n\t}\n\n}\n","<div class=\"error-http\" [ngClass]=\"'http--' + logger.httpError.statusType\" *ngIf=\"logger.httpError\">\n\t<span>{{logger.httpError.statusType}}</span>&nbsp;\n\t<span class=\"status\">{{logger.httpError.status}}</span>&nbsp;\n\t<span class=\"url\">{{logger.httpError.url}}</span>&nbsp;\n\t<span class=\"message\">{{logger.httpError.body?.error}}</span>\n</div>\n<!--\n<div *ngIf=\"logger.logs.length\">\n\t<ul class=\"list-group \">\n\t\t<li class=\"list-group-item\">\n\t\t\t<button type=\"button\" class=\"btn btn-outline-primary btn-sm float-right\" (click)=\"logger.clear()\" title=\"Clear Logs\">{{ 'app.clear' | translate }}</button>\n\t\t</li>\n\t\t<li class=\"list-group-item\" *ngFor='let log of logger.logs'>\n\t\t\t<span>{{log}}</span>\n\t\t</li>\n\t</ul>\n\t<br>\n</div>\n-->\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Logger } from './logger.service';\n\n@Component({\n\tselector: 'core-logger',\n\ttemplateUrl: './logger.component.html',\n\tstyleUrls: ['./logger.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class LoggerComponent implements OnInit {\n\tconstructor(public logger: Logger) { }\n\n\tngOnInit() {\n\t}\n}\n","import { InjectionToken, Type } from '@angular/core';\nimport { OutletDefaultComponent } from './outlet-default.component';\n\nexport interface OutletInit {\n\tOutletInit(): void;\n}\n\nexport interface Outlets { [key: string]: Type<OutletDefaultComponent>; }\n\nexport const OUTLETS = new InjectionToken<Outlets>('core.outlets');\n\nexport class Outlet {\n\t// id: number | string;\n\tname?: string;\n\tcomponent?: number | string;\n}\n","\nimport { Component, Input } from '@angular/core';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { Outlet } from './outlet';\n\n@Component({\n\tselector: 'outlet-content-component',\n\ttemplate: `<div class=\"outlet\">Outlet not found!</div>`,\n})\nexport class OutletDefaultComponent extends DisposableComponent {\n\t@Input() outlet: Outlet;\n}\n","import { Inject, Injectable, Type } from '@angular/core';\nimport { Outlet, OUTLETS, Outlets } from './outlet';\nimport { OutletDefaultComponent } from './outlet-default.component';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class OutletResolverService {\n\n\tpublic outlets: Outlets;\n\n\tconstructor(\n\t\t@Inject(OUTLETS) outlets: Outlets,\n\t) {\n\t\toutlets = outlets || {};\n\t}\n\n\tresolve(outlet: Outlet): Type<OutletDefaultComponent> {\n\t\tlet component: Type<OutletDefaultComponent>;\n\t\tif (outlet) {\n\t\t\tcomponent = this.outlets[outlet.component] || OutletDefaultComponent;\n\t\t} else {\n\t\t\tcomponent = OutletDefaultComponent;\n\t\t}\n\t\treturn component;\n\t}\n\n}\n","import { Component, ComponentFactory, ComponentFactoryResolver, ComponentRef, Input, OnDestroy, OnInit, Type, ViewChild, ViewContainerRef } from '@angular/core';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { Outlet } from './outlet';\nimport { OutletDefaultComponent } from './outlet-default.component';\nimport { OutletResolverService } from './outlet-resolver.service';\n\n@Component({\n\tselector: 'outlet-component',\n\ttemplate: '',\n})\nexport class OutletComponent extends DisposableComponent implements OnInit, OnDestroy {\n\n\t@Input() outlet: Outlet;\n\n\t@ViewChild('outlet', { read: ViewContainerRef, static: false }) viewContainerRef: ViewContainerRef;\n\tprivate componentRef: ComponentRef<DisposableComponent>;\n\n\tconstructor(\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate outletResolverService: OutletResolverService,\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\tconst component: Type<OutletDefaultComponent> = this.outletResolverService.resolve(this.outlet);\n\t\tconst factory: ComponentFactory<OutletDefaultComponent> = this.componentFactoryResolver.resolveComponentFactory(component);\n\t\tthis.viewContainerRef.clear();\n\t\tconst componentRef = this.viewContainerRef.createComponent(factory);\n\t\tconst instance = componentRef.instance;\n\t\tinstance.outlet = this.outlet;\n\t\tif (typeof instance['OutletInit'] === 'function') {\n\t\t\tinstance['OutletInit']();\n\t\t}\n\t\tthis.componentRef = componentRef;\n\t}\n\n\tngOnDestroy() {\n\t\tthis.componentRef.destroy();\n\t}\n\n}\n","\nimport { Component, Input } from '@angular/core';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { Outlet } from './outlet';\n\n@Component({\n\tselector: 'outlet-repeater-component',\n\ttemplate: `<ng-container *ngFor=\"let outlet of outlets\"><outlet-component [outlet]=\"outlet\"></outlet-component></ng-container>`,\n})\nexport class OutletRepeaterComponent extends DisposableComponent {\n\t@Input() outlets: Outlet[];\n}\n","\nexport enum ImageType {\n\tDefault = 1,\n\tGallery = 2,\n\tShare = 3,\n}\n\nexport class Image {\n\tid: number | string;\n\turl: string;\n\ttitle?: string;\n\tdescription?: string;\n\tfileName?: string;\n\ttype?: ImageType;\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { CoreService } from '../config/core.service';\nimport { SegmentPipe } from './segment.pipe';\n\n@Pipe({\n\tname: 'asset',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class AssetPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate coreService: CoreService,\n\t\tprivate segment: SegmentPipe\n\t) { }\n\n\ttransform(data: any[] | string): string {\n\t\tif (typeof data === 'string' && (data.indexOf('http') === 0 || data.indexOf('/media/') === 0)) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\tconst segments = this.segment.transform(data);\n\t\t\tsegments.unshift(this.coreService.options.assets);\n\t\t\treturn segments.join('/');\n\t\t}\n\t}\n\n}\n","import { ChangeDetectorRef, OnDestroy, Pipe, PipeTransform, WrappedValue } from '@angular/core';\nimport { Observable, SubscriptionLike } from 'rxjs';\n\n@Pipe({\n\tname: 'customAsync',\n\tpure: false\n})\nexport class CustomAsyncPipe implements OnDestroy, PipeTransform {\n\n\tprivate subject: Observable<any> | null = null;\n\tprivate subscription: SubscriptionLike | null = null;\n\tprivate value: any = null;\n\tprivate cachedValue: any = null;\n\n\tconstructor(\n\t\tprivate changeDetector: ChangeDetectorRef\n\t) { }\n\n\ttransform(subject: Observable<any> | null | undefined): any {\n\t\treturn this.observableToValue(subject);\n\t}\n\n\tprivate observableToValue(subject: Observable<any> | null | undefined): any {\n\t\tif (subject !== this.subject) {\n\t\t\tif (this.subject) {\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t\tif (subject) {\n\t\t\t\tthis.subject = subject;\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\n\t\t\t\t\t// console.log('CustomAsyncPipe.A', value);\n\t\t\t\t\tthis.value = value;\n\t\t\t\t\tthis.changeDetector.markForCheck(); // mark pipe as dirty\n\t\t\t\t});\n\t\t\t\tthis.cachedValue = this.value; // ???\n\t\t\t\treturn this.value;\n\t\t\t}\n\t\t}\n\t\t// console.log('CustomAsyncPipe.B', this.value);\n\t\tif (this.cachedValue !== this.value) {\n\t\t\tthis.cachedValue = this.value;\n\t\t\treturn WrappedValue.wrap(this.value); // notify that value has changed\n\t\t}\n\t\treturn this.cachedValue; // return cachedValue\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.subscription) {\n\t\t\tthis.subscription.unsubscribe();\n\t\t}\n\t\tthis.value = null;\n\t\tthis.cachedValue = null;\n\t\tthis.subscription = null;\n\t\tthis.subject = null;\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.dispose();\n\t}\n\n\tprivate _observableToValue(subject: Observable<any> | null | undefined): any {\n\t\tif (!this.subject) {\n\t\t\tif (subject) {\n\t\t\t\tthis.subject = subject;\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\n\t\t\t\t\tthis.value = value;\n\t\t\t\t\tthis.changeDetector.markForCheck(); // value has changed\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.cachedValue = this.value;\n\t\t\treturn this.value;\n\t\t}\n\t\tif (subject !== this.subject) {\n\t\t\tthis.dispose();\n\t\t\treturn this.transform(subject as any);\n\t\t}\n\t\tif (this.value === this.cachedValue) {\n\t\t\treturn this.cachedValue;\n\t\t}\n\t\tthis.cachedValue = this.value;\n\t\treturn WrappedValue.wrap(this.value); // value has changed\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Image, ImageType } from '../models/image';\n\n@Pipe({\n\tname: 'imageUrl',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ImageUrlPipe implements PipeTransform {\n\n\ttransform(images: Image[], type?: string, queryString?: string): string {\n\t\ttype = type || 'Default';\n\t\tqueryString = queryString ? `?${queryString}` : '';\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\n\t\tlet image: Image = null;\n\t\tif (images && images.length) {\n\t\t\timage = images.find(i => i.type === imageType) || images[0];\n\t\t}\n\t\treturn image ? (image.url + queryString).replace(/ /g, '%20') : null;\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Image, ImageType } from '../models/image';\n\n@Pipe({\n\tname: 'image',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ImagePipe implements PipeTransform {\n\n\ttransform(images: Image[], type?: string, queryString?: string): Image {\n\t\ttype = type || 'Default';\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\n\t\treturn (images && images.length) ? images.find(i => i.type === imageType) || null : null; // images[0]\n\t}\n\n\t// 21 marzo 2019\n\ttransform__(images: Image[], type?: string, queryString?: string): string {\n\t\ttype = type || 'Default';\n\t\tqueryString = queryString ? `?${queryString}` : '';\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\n\t\tlet image: Image = null;\n\t\tif (images && images.length) {\n\t\t\timage = images.find(i => i.type === imageType); // || images[0];\n\t\t\tif (!image && imageType !== ImageType.Default) {\n\t\t\t\timage = images.find(i => i.type === ImageType.Default);\n\t\t\t}\n\t\t}\n\t\treturn image ? (image.url + queryString).replace(/ /g, '%20') : null;\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { CoreService } from '../config/core.service';\nimport { SegmentPipe } from './segment.pipe';\n\n@Pipe({\n\tname: 'public',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class PublicPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate coreService: CoreService,\n\t\tprivate segment: SegmentPipe\n\t) { }\n\n\ttransform(data: any[] | string): string {\n\t\tconst segments = this.segment.transform(data);\n\t\tsegments.unshift(this.coreService.options.public);\n\t\treturn segments.join('/');\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { RouteService } from './route.service';\n\n@Pipe({\n\tname: 'route',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class RoutePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate routeService: RouteService,\n\t) { }\n\n\ttransform(data: any[] | string): string[] {\n\t\treturn this.routeService.toRoute(data);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { Entity } from './entity';\nimport { IdentityService } from './identity.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class EntityService<T extends Entity> extends IdentityService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/entity';\n\t}\n\n\tgetDetailByName(name: string): Observable<any> {\n\t\tif (!name.trim()) {\n\t\t\treturn of([]);\n\t\t}\n\t\treturn this.get({ name });\n\t}\n\n}\n","import { EventEmitter, Injectable, Injector } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { catchError, debounceTime, filter, first, map, switchMap, tap } from 'rxjs/operators';\nimport { DocumentIndex } from '../models/document';\nimport { EntityService } from '../models/entity.service';\n\nexport class SlugKey {\n\tid?: number;\n\tmnemonic?: string;\n\tslug?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugService extends EntityService<DocumentIndex> {\n\n\tget collection(): string {\n\t\treturn `/api/slug`;\n\t}\n\n\tprivate keys: { [key: string]: SlugKey; } = {};\n\tprivate values$: BehaviorSubject<{ [key: string]: string; }> = new BehaviorSubject({});\n\tprivate emitter$: EventEmitter<any> = new EventEmitter();\n\n\tpublic missingHandler?: Function;\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t}\n\n\ttransform(key: string): string | undefined {\n\t\tconst values = this.values$.getValue();\n\t\tif (values.hasOwnProperty(key)) {\n\t\t\treturn values[key];\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\n\t\t\tvalues[key] = null;\n\t\t\tObject.defineProperty(this.keys, key, {\n\t\t\t\tvalue: { mnemonic: key },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.emitter$.emit();\n\t\t\treturn null;\n\t\t}\n\t}\n\n\ttransform$(key: string): Observable<string | undefined> {\n\t\tconst values = this.values$.getValue();\n\t\tif (values.hasOwnProperty(key)) {\n\t\t\treturn of(values[key]);\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\n\t\t\tObject.defineProperty(this.keys, key, {\n\t\t\t\tvalue: { mnemonic: key },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.emitter$.emit();\n\t\t}\n\t\treturn this.values$.pipe(\n\t\t\tmap(values => values[key])\n\t\t);\n\t}\n\n\tobserve$(): Observable<{ [key: string]: string; }> {\n\t\treturn this.emitter$.pipe(\n\t\t\tdebounceTime(1),\n\t\t\tswitchMap(x => this.collect$()),\n\t\t\tfilter(x => x !== null),\n\t\t\tfirst(), //\n\t\t);\n\t}\n\n\tcollect$(): Observable<{ [key: string]: string; }> {\n\t\tif (Object.keys(this.keys).length) {\n\t\t\tconst keys = Object.keys(this.keys).map(x => this.keys[x]);\n\t\t\tthis.keys = {};\n\t\t\treturn this.statePost(keys).pipe(\n\t\t\t\tmap((items: DocumentIndex[]) => {\n\t\t\t\t\treturn items.reduce((values, x) => {\n\t\t\t\t\t\tvalues[x.mnemonic] = [x.slug];\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}, {});\n\t\t\t\t}),\n\t\t\t\ttap((slugs: { [key: string]: string; }) => {\n\t\t\t\t\tconst values = this.values$.getValue();\n\t\t\t\t\tObject.assign(values, slugs);\n\t\t\t\t\tthis.values$.next(values);\n\t\t\t\t}),\n\t\t\t\tcatchError(error => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tconst labels = keys.reduce((values, x) => {\n\t\t\t\t\t\tvalues[x.mnemonic] = null;\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}, {});\n\t\t\t\t\tconst values = this.values$.getValue();\n\t\t\t\t\tObject.assign(values, labels);\n\t\t\t\t\treturn of(null);\n\t\t\t\t}),\n\t\t\t);\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { RoutePipe } from '../route/route.pipe';\nimport { SlugService } from './slug.service';\n\n@Pipe({\n\tname: 'slug',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate slugService: SlugService,\n\t\tprivate routePipe: RoutePipe,\n\t) { }\n\n\ttransform(key: string, segments?: string[]): string[] {\n\t\tconst slug = this.slugService.transform(key);\n\t\tif (slug) {\n\t\t\tlet slugs = this.routePipe.transform(slug);\n\t\t\tif (slugs && segments) {\n\t\t\t\tslugs = slugs.concat(segments);\n\t\t\t}\n\t\t\treturn slugs;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisposableDirective } from '../disposable/disposable.directive';\nimport { Translate } from './translate';\nimport { TranslateService } from './translate.service';\n\n@Directive({\n\tselector: '[translate]'\n})\nexport class TranslateDirective extends DisposableDirective implements OnInit {\n\n\tkey: string;\n\tinnerHTML: string;\n\n\t/*\n\t@Input() set translate(key: string) {\n\t\t// console.log('TranslateDirective.translate', this.key, this.translateParams, this.template, this.view);\n\t}\n\t*/\n\t@Input() translate: string;\n\t@Input() translateParams: any;\n\n\tconstructor(\n\t\tprivate element: ElementRef,\n\t\tprivate translateService: TranslateService<Translate>,\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\t// console.log('TranslateDirective.ngOnInit', this.element.nativeElement.innerHTML);\n\t\tthis.translateService.getTranslate(this.translate, this.element.nativeElement.innerHTML, this.translateParams).pipe(\n\t\t\ttakeUntil(this.unsubscribe)\n\t\t).subscribe(translate => {\n\t\t\tthis.element.nativeElement.innerHTML = translate;\n\t\t\t// console.log('TranslateDirective.ngOnInit', translate);\n\t\t});\n\t\t// console.log('TranslateDirective.ngOnInit', this.translate, this.translateParams, this.template, this.view);\n\t}\n}\n","import { ChangeDetectorRef, Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Translate } from './translate';\nimport { TranslateService } from './translate.service';\n\n@Pipe({\n\tname: 'translate',\n\tpure: false,\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class TranslatePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate ref: ChangeDetectorRef,\n\t\tprotected translateService: TranslateService<Translate>\n\t) {\n\t\tthis.translateService.events.subscribe(\n\t\t\tx => this.ref.markForCheck()\n\t\t);\n\t}\n\n\tpublic transform(key: string, text?: string, params?: any): string {\n\t\t// console.log(key, params);\n\t\tconst label = this.translateService.getTranslate(key, text, params);\n\t\t// console.log('label', label, this.translateService.cache);\n\t\treturn label;\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeStyle'\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SafeStylePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(style: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustStyle(style);\n\t}\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeUrl'\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SafeUrlPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(url: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustResourceUrl(url);\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeHtml'\n})\nexport class TrustPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(text: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustHtml(text);\n\t\t// return this.sanitizer.bypassSecurityTrustStyle(text);\n\t\t// return this.sanitizer.bypassSecurityTrustXxx(text); - see docs\n\t}\n}\n","import { CommonModule } from '@angular/common';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { ModuleWithProviders, NgModule, NgModuleFactoryLoader, Optional, SkipSelf, SystemJsNgModuleLoader } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Bundles, BUNDLES } from './bundle/bundle';\r\nimport { BundleDirective } from './bundle/bundle.directive';\r\nimport { CoreConfig, CORE_CONFIG } from './config/core.config';\r\nimport { DefaultContentDirective } from './content/default-content.directive';\r\nimport { CoreModuleComponent } from './core-module.component';\r\nimport { DisposableComponent } from './disposable/disposable.component';\r\nimport { DisposableDirective } from './disposable/disposable.directive';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HttpResponseInterceptor } from './http/http-response.interceptor';\r\nimport { JsonFormatterComponent } from './json-formatter/json-formatter.component';\r\nimport { LabelDirective } from './label/label.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { LoggerComponent } from './logger/logger.component';\r\nimport { OutletDefaultComponent } from './outlet/outlet-default.component';\r\nimport { OutletRepeaterComponent } from './outlet/outlet-repeater.component';\r\nimport { OutletComponent } from './outlet/outlet.component';\r\nimport { AssetPipe } from './pipes/asset.pipe';\r\nimport { CustomAsyncPipe } from './pipes/custom-async.pipe';\r\nimport { ImageUrlPipe } from './pipes/image-url.pipe';\r\nimport { ImagePipe } from './pipes/image.pipe';\r\nimport { PublicPipe } from './pipes/public.pipe';\r\nimport { SegmentPipe } from './pipes/segment.pipe';\r\nimport { RoutePipe } from './route/route.pipe';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { TranslateDirective } from './translate/translate.directive';\r\nimport { TranslatePipe } from './translate/translate.pipe';\r\nimport { SafeStylePipe } from './trust/safe-style.pipe';\r\nimport { SafeUrlPipe } from './trust/safe-url.pipe';\r\nimport { TrustPipe } from './trust/trust.pipe';\r\n\r\nconst components = [\r\n\tCoreModuleComponent,\r\n\tDisposableComponent,\r\n\tDisposableDirective,\r\n\tJsonFormatterComponent,\r\n\tLoggerComponent,\r\n\tOutletComponent,\r\n\tOutletDefaultComponent,\r\n\tOutletRepeaterComponent,\r\n];\r\n\r\nconst directives = [\r\n\tBundleDirective,\r\n\tDefaultContentDirective,\r\n\tLabelDirective,\r\n\tTranslateDirective,\r\n];\r\n\r\nconst pipes = [\r\n\tAssetPipe,\r\n\tCustomAsyncPipe,\r\n\tHighlightPipe,\r\n\tImagePipe,\r\n\tImageUrlPipe,\r\n\tLabelPipe,\r\n\tPublicPipe,\r\n\tRoutePipe,\r\n\tSafeStylePipe,\r\n\tSafeUrlPipe,\r\n\tSegmentPipe,\r\n\tSlugPipe,\r\n\tTranslatePipe,\r\n\tTrustPipe,\r\n];\r\n\r\nconst validators = [];\r\n\r\nconst guards = [];\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\tCommonModule,\r\n\t\tHttpClientModule,\r\n\t\tFormsModule,\r\n\t\tReactiveFormsModule,\r\n\t],\r\n\tproviders: [\r\n\t\t{ provide: HTTP_INTERCEPTORS, useClass: HttpResponseInterceptor, multi: true },\r\n\t\t{ provide: NgModuleFactoryLoader, useClass: SystemJsNgModuleLoader },\r\n\t\t...validators,\r\n\t],\r\n\tdeclarations: [\r\n\t\t...components,\r\n\t\t...directives,\r\n\t\t...pipes,\r\n\t\t...validators,\r\n\t],\r\n\tentryComponents: [\r\n\t\t...components\r\n\t],\r\n\texports: [\r\n\t\t...components,\r\n\t\t...directives,\r\n\t\t...pipes,\r\n\t\t...validators,\r\n\t],\r\n})\r\n\r\nexport class CoreModule {\r\n\r\n\tconstructor(\r\n\t\t@Optional() @SkipSelf() parentModule: CoreModule\r\n\t) {\r\n\t\t/*\r\n\t\tif (parentModule) {\r\n\t\t\tthrow new Error('CoreModule is already loaded. Import it in the AppModule only');\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\tpublic static forRoot(\r\n\t\tbundles?: Bundles,\r\n\t\tconfig?: CoreConfig,\r\n\t): ModuleWithProviders {\r\n\t\treturn {\r\n\t\t\tngModule: CoreModule,\r\n\t\t\tproviders: [{\r\n\t\t\t\tprovide: CORE_CONFIG, useValue: config\r\n\t\t\t}, {\r\n\t\t\t\tprovide: BUNDLES, useValue: bundles || {}\r\n\t\t\t}]\r\n\t\t};\r\n\t}\r\n\r\n}\r\n","import { Entity } from '../models/entity';\n\nexport class Label implements Entity {\n\tid: string;\n\tvalue?: string;\n\tdefaultValue?: string;\n}\n","import { Entity } from './entity';\n\nexport class Document implements Entity {\n\tid: number | string;\n\tname?: string;\n\ttitle?: string;\n\tdescription?: string;\n\tslug?: string;\n}\n\nexport class DocumentIndex {\n\tid: number | string;\n\tmnemonic?: string;\n\tslug?: string;\n}\n\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Document } from './document'; // !!! Document class conflict?\nimport { EntityService } from './entity.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class DocumentService<T extends Document> extends EntityService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/document';\n\t}\n\n\tgetDetailBySlug(slug: string): Observable<T> {\n\t\tif (!slug.trim()) {\n\t\t\t// if not search term, return empty identity array.\n\t\t\treturn of();\n\t\t}\n\t\treturn this.get({ slug }).pipe(\n\t\t\t// tap(x => this.logger.log(`found identities matching \"${slug}\"`)),\n\t\t\tswitchMap(x => of(x[0]))\n\t\t);\n\t}\n\n}\n","import { Identity } from './identity';\n\nexport class Entity implements Identity {\n\tid: number | string;\n\tname?: string;\n}\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\nexport class EventEntity {\n\ttype: string | number;\n\tdata?: any;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class EventDispatcherService {\n\n\tprivate emitter: EventEmitter<EventEntity>;\n\n\tconstructor() {\n\t\tthis.emitter = new EventEmitter<EventEntity>();\n\t}\n\n\temit(event: EventEntity): void {\n\t\treturn this.emitter.emit(event);\n\t}\n\n\tobserve(): Observable<EventEntity> {\n\t\treturn this.emitter.pipe(\n\t\t\ttap((event: EventEntity) => console.log('EventDispatcherService', event))\n\t\t);\n\t}\n\n}\n","\nexport class Feature {\n\tid: number | string;\n\tslug?: string;\n\ttitle?: string;\n\tabstract?: string;\n\ttype?: number;\n\treadmore?: boolean = false;\n}\n","\nexport class Identity {\n\tid: number | string;\n}\n","import { Document } from './document';\nimport { Image } from './image';\n\nexport class MenuItem implements Document {\n\tid: number | string;\n\tname?: string;\n\ttitle?: string;\n\tabstract?: string;\n\tslug?: string;\n\turl?: string;\n\ttype?: number | string;\n\timages?: Image[];\n\titems?: MenuItem[];\n\n\tconstructor(options?: any) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t\tif (options.items) {\n\t\t\t\tthis.items = options.items.map(item => new MenuItem(item));\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { EntityService } from './entity.service';\nimport { MenuItem } from './menu-item';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class MenuService extends EntityService<MenuItem> {\n\n\tget collection(): string {\n\t\treturn '/api/menu';\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t}\n\n}\n","\nexport class Taxonomy {\n\tid: number | string;\n\tname?: string;\n\ttype?: number;\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, NgZone, PLATFORM_ID } from '@angular/core';\nimport { from, fromEvent, Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n// export class OnceEvent extends Event { }\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class OnceService {\n\n\tprivate uid: number = 0;\n\tprivate paths: string[] = [];\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate zone: NgZone,\n\t) { }\n\n\tscript(url: string, callback?: string | boolean): Observable<Event> {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t// !!! this.zone.runOutsideAngular(() => {\n\t\t\tif (this.paths.indexOf(url) === -1) {\n\t\t\t\tthis.paths.push(url);\n\t\t\t\tlet callbackName: string;\n\t\t\t\tif (callback === true) {\n\t\t\t\t\tcallbackName = 'OnceCallback' + (++this.uid);\n\t\t\t\t\turl = url.split('{{callback}}').join(callbackName);\n\t\t\t\t} else {\n\t\t\t\t\tcallbackName = callback as string;\n\t\t\t\t}\n\t\t\t\tlet callback$: Observable<any>;\n\t\t\t\tconst element = document.createElement('script');\n\t\t\t\telement.type = 'text/javascript';\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback$ = from(\n\t\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\t\twindow[callbackName] = function (data) {\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\telement.async = true;\n\t\t\t\t\tcallback$ = fromEvent(element, 'load').pipe(\n\t\t\t\t\t\tmap(x => x as Event)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst scripts = document.getElementsByTagName('script');\n\t\t\t\tif (scripts.length) {\n\t\t\t\t\tconst script = scripts[scripts.length - 1];\n\t\t\t\t\tscript.parentNode.insertBefore(element, script.nextSibling);\n\t\t\t\t}\n\t\t\t\telement.src = url;\n\t\t\t\treturn callback$;\n\t\t\t} else {\n\t\t\t\treturn of(new Event('loaded!'));\n\t\t\t}\n\t\t\t// });\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n}\n","import { Entity } from '../models/entity';\n\nexport class Translate implements Entity {\n\tid: number | string;\n\tname: string;\n\tlang: string;\n\tlabels?: any;\n}\n"]}