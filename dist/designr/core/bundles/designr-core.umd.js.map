{"version":3,"file":"designr-core.umd.js.map","sources":["ng://@designr/core/lib/auth/auth.ts","node_modules/tslib/tslib.es6.js","ng://@designr/core/lib/logger/logger.ts","ng://@designr/core/lib/config/core.config.ts","ng://@designr/core/lib/config/core.service.ts","ng://@designr/core/lib/logger/logger.service.ts","ng://@designr/core/lib/api/api.service.ts","ng://@designr/core/lib/storage/storage.service.ts","ng://@designr/core/lib/auth/auth.service.ts","ng://@designr/core/lib/bundle/bundle.ts","ng://@designr/core/lib/content/default-content.directive.ts","ng://@designr/core/lib/core-module.component.ts","ng://@designr/core/lib/bundle/bundle.directive.ts","ng://@designr/core/lib/disposable/disposable.component.ts","ng://@designr/core/lib/highlight/highlight.pipe.ts","ng://@designr/core/lib/pipes/segment.pipe.ts","ng://@designr/core/lib/models/identity.service.ts","ng://@designr/core/lib/translate/translate.service.ts","ng://@designr/core/lib/route/route.service.ts","ng://@designr/core/lib/http/http-status-code.service.ts","ng://@designr/core/lib/http/http-response.interceptor.ts","ng://@designr/core/lib/json-formatter/json-formatter.component.ts","ng://@designr/core/lib/label/label.service.ts","ng://@designr/core/lib/label/label.directive.ts","ng://@designr/core/lib/label/label.pipe.ts","ng://@designr/core/lib/logger/logger.component.ts","ng://@designr/core/lib/outlet/outlet-default.component.ts","ng://@designr/core/lib/outlet/outlet-repeater.component.ts","ng://@designr/core/lib/outlet/outlet.ts","ng://@designr/core/lib/outlet/outlet-resolver.service.ts","ng://@designr/core/lib/outlet/outlet.component.ts","ng://@designr/core/lib/pipes/asset.pipe.ts","ng://@designr/core/lib/pipes/custom-async.pipe.ts","ng://@designr/core/lib/models/image.ts","ng://@designr/core/lib/pipes/image-url.pipe.ts","ng://@designr/core/lib/pipes/image.pipe.ts","ng://@designr/core/lib/pipes/public.pipe.ts","ng://@designr/core/lib/route/route.pipe.ts","ng://@designr/core/lib/models/entity.service.ts","ng://@designr/core/lib/slug/slug.service.ts","ng://@designr/core/lib/slug/slug.pipe.ts","ng://@designr/core/lib/translate/translate.directive.ts","ng://@designr/core/lib/translate/translate.pipe.ts","ng://@designr/core/lib/trust/safe-style.pipe.ts","ng://@designr/core/lib/trust/safe-url.pipe.ts","ng://@designr/core/lib/trust/trust.pipe.ts","ng://@designr/core/lib/core.module.ts","ng://@designr/core/lib/label/label.ts","ng://@designr/core/lib/models/document.ts","ng://@designr/core/lib/models/document.service.ts","ng://@designr/core/lib/models/entity.ts","ng://@designr/core/lib/models/event-dispatcher.service.ts","ng://@designr/core/lib/models/feature.ts","ng://@designr/core/lib/models/identity.ts","ng://@designr/core/lib/models/menu-item.ts","ng://@designr/core/lib/models/menu.service.ts","ng://@designr/core/lib/models/taxonomy.ts","ng://@designr/core/lib/once/once.service.ts","ng://@designr/core/lib/translate/translate.ts"],"sourcesContent":["\r\nexport enum AuthStrategy {\r\n\tBearer = 0,\r\n\tCookie = 1,\r\n}\r\n\r\nexport class AuthToken {\r\n\tconstructor(\r\n\t\tpublic accessToken: string,\r\n\t\tpublic expiresIn: number = 0\r\n\t) { }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { HttpErrorResponse, HttpResponse } from '@angular/common/http';\r\n\r\nexport enum LoggerErrorStrategy {\r\n\tInformational = 100,\r\n\tSuccess = 200,\r\n\tRedirect = 300,\r\n\tClient = 400,\r\n\tServer = 500,\r\n\tNone = 999,\r\n}\r\n\r\nexport class LoggerError extends HttpErrorResponse {\r\n\tbody?: any;\r\n\r\n\tconstructor(response?: HttpErrorResponse | HttpResponse<any>) {\r\n\t\tsuper({\r\n\t\t\terror: response instanceof HttpErrorResponse ? response.error : response.statusText,\r\n\t\t\theaders: response.headers,\r\n\t\t\tstatus: response.status,\r\n\t\t\tstatusText: response.statusText,\r\n\t\t\turl: response.url,\r\n\t\t});\r\n\t}\r\n\r\n\tget statusType(): string {\r\n\t\treturn Object.keys(LoggerErrorStrategy).reduce((type: string, key: string) => {\r\n\t\t\tif (this.status >= LoggerErrorStrategy[key]) {\r\n\t\t\t\ttype = key.toLowerCase();\r\n\t\t\t}\r\n\t\t\treturn type;\r\n\t\t}, null);\r\n\t}\r\n\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { AuthStrategy } from '../auth/auth';\r\nimport { LoggerErrorStrategy } from '../logger/logger';\r\n\r\nexport class Language {\r\n\tid?: number;\r\n\tname?: string;\r\n\tlang?: string;\r\n}\r\n\r\nexport class CoreTransitionConfig {\r\n\tappId: string;\r\n\r\n\tconstructor(options?: CoreTransitionConfig) {\r\n\t\t// console.log('CoreTransitionConfig', options);\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class CoreConfig {\r\n\tassets?: string = '';\r\n\tauthStrategy?: AuthStrategy = AuthStrategy.Cookie;\r\n\tdefaultLanguage?: string = 'it';\r\n\tdefaultMarket?: string = 'it';\r\n\tloggerErrorStrategy?: LoggerErrorStrategy = LoggerErrorStrategy.Server;\r\n\tlanguages?: Language[] = [{ id: 1, name: 'Italiano', lang: 'it' }];\r\n\torigin?: string = '';\r\n\tproduction?: boolean = false;\r\n\tpublic?: string = '';\r\n\ttransition?: CoreTransitionConfig;\r\n\turlStrategy?: string = '';\r\n\tuseLang?: boolean = false;\r\n\tuseMarket?: boolean = false;\r\n\tuseServiceWorker?: boolean;\r\n\trouting?: any; // ExtraOptions\r\n\r\n\tconstructor(options?: CoreConfig) {\r\n\t\t// console.log('CoreConfig', options);\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t\tthis.transition = new CoreTransitionConfig(options.transition);\r\n\t\t} else {\r\n\t\t\tthis.transition = new CoreTransitionConfig();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const CORE_CONFIG = new InjectionToken<CoreConfig>('core.config');\r\n","\r\nimport { Inject, Injectable } from '@angular/core';\r\nimport { CoreConfig, CORE_CONFIG } from './core.config';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class CoreService {\r\n\r\n\tpublic options: CoreConfig;\r\n\r\n\tconstructor(\r\n\t\t@Inject(CORE_CONFIG) options: CoreConfig\r\n\t) {\r\n\t\t// console.log('CoreService', options);\r\n\t\toptions = options || {};\r\n\t\t// options.defaultPage = (options.defaultPage || PageNotFoundComponent) as Type<PageComponent>;\r\n\t\t// options.notFoundPage = (options.notFoundPage || PageNotFoundComponent) as Type<PageComponent>;\r\n\t\tthis.options = new CoreConfig(options);\r\n\t}\r\n\r\n}\r\n","import { HttpErrorResponse, HttpResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { CoreService } from '../config/core.service';\r\nimport { LoggerError } from './logger';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class Logger {\r\n\r\n\thttpError: LoggerError;\r\n\tlogs: string[] = [];\r\n\r\n\tconstructor(\r\n\t\tprivate coreService: CoreService,\r\n\t) {\r\n\t\t//\r\n\t}\r\n\r\n\trequest(...args: any[]) {\r\n\t\tif (!this.coreService.options.production) {\r\n\t\t\tconst s = args.join(', ');\r\n\t\t\tthis.logs.push(s);\r\n\t\t\t// console.log.apply(this, ['%c %s', 'background: #dddddd; color: #111'].concat(args));\r\n\t\t}\r\n\t}\r\n\r\n\tlog(...args: any[]) {\r\n\t\tif (!this.coreService.options.production) {\r\n\t\t\tconst s = args.join(', ');\r\n\t\t\tthis.logs.push(s);\r\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #1976d2; color: #fff; border-radius: 3px; padding: 4px 8px; margin-bottom: 4px;'].concat(args));\r\n\t\t}\r\n\t}\r\n\r\n\twarn(...args: any[]) {\r\n\t\tif (!this.coreService.options.production) {\r\n\t\t\tconst s = args.join(', ');\r\n\t\t\tthis.logs.push(s);\r\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #ff5500; color: #fff'].concat(args));\r\n\t\t}\r\n\t}\r\n\r\n\terror(...args: any[]) {\r\n\t\tif (!this.coreService.options.production) {\r\n\t\t\tconst s = args.join(', ');\r\n\t\t\tthis.logs.push(s);\r\n\t\t\tconsole.error.apply(console, args);\r\n\t\t}\r\n\t}\r\n\r\n\thttp(response: HttpErrorResponse | HttpResponse<any>) {\r\n\t\tthis.httpError = new LoggerError(response);\r\n\t\tif (!this.coreService.options.production) {\r\n\t\t\tthis.logs.push(this.httpError.message);\r\n\t\t}\r\n\t\tconsole.warn('Logger.http.response', response.status, response.statusText, response.url);\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.httpError = null;\r\n\t\tthis.logs = [];\r\n\t}\r\n}\r\n","import { isPlatformBrowser, isPlatformServer } from '@angular/common';\r\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\nimport { Injectable, Injector, PLATFORM_ID } from '@angular/core';\r\nimport { makeStateKey, StateKey, TransferState } from '@angular/platform-browser';\r\nimport { Observable, of } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { CoreConfig } from '../config/core.config';\r\nimport { CoreService } from '../config/core.service';\r\nimport { Logger } from '../logger/logger.service';\r\n\r\nexport class ApiRequestOptions {\r\n\theaders?: HttpHeaders;\r\n\tparams?: HttpParams;\r\n\tconstructor(params?: {}) {\r\n\t\tthis.headers = new HttpHeaders({\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t});\r\n\t\tthis.params = params as HttpParams;\r\n\t}\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class ApiService<T> {\r\n\r\n\tget collection(): string {\r\n\t\treturn '/api';\r\n\t}\r\n\r\n\tprivate _logger: Logger;\r\n\tget logger(): Logger {\r\n\t\tif (!this._logger) {\r\n\t\t\tthis._logger = this.injector.get(Logger);\r\n\t\t}\r\n\t\treturn this._logger;\r\n\t}\r\n\r\n\tprivate _http: HttpClient;\r\n\tget http(): HttpClient {\r\n\t\tif (!this._http) {\r\n\t\t\tthis._http = this.injector.get(HttpClient);\r\n\t\t}\r\n\t\treturn this._http;\r\n\t}\r\n\r\n\tprivate _state: TransferState;\r\n\tget state(): TransferState {\r\n\t\tif (!this._state) {\r\n\t\t\tthis._state = this.injector.get(TransferState);\r\n\t\t}\r\n\t\treturn this._state;\r\n\t}\r\n\r\n\tprivate _platformId: string;\r\n\tget platformId(): string {\r\n\t\tif (!this._platformId) {\r\n\t\t\tthis._platformId = this.injector.get<string>(PLATFORM_ID);\r\n\t\t}\r\n\t\treturn this._platformId;\r\n\t}\r\n\r\n\tprivate _config: CoreConfig;\r\n\tget config(): CoreConfig {\r\n\t\tif (!this._config) {\r\n\t\t\tthis._config = this.injector.get(CoreService).options;\r\n\t\t}\r\n\t\treturn this._config;\r\n\t}\r\n\r\n\tprivate _origin: string;\r\n\tget origin(): string {\r\n\t\tif (!this._origin) {\r\n\t\t\tthis._origin = this.config.origin;\r\n\t\t}\r\n\t\treturn this._origin;\r\n\t}\r\n\r\n\tget url(): string {\r\n\t\tlet base: string = this.origin;\r\n\t\tconst collection = this.collection.toLowerCase();\r\n\t\tif (collection.indexOf('http') === 0) {\r\n\t\t\tbase = '';\r\n\t\t}\r\n\t\treturn `${base}${collection}`;\r\n\t}\r\n\r\n\tconstructor(\r\n\t\tprotected injector: Injector\r\n\t) { }\r\n\r\n\tgetUrl(method: string = ''): string {\r\n\t\treturn `${this.url}${method}`;\r\n\t}\r\n\r\n\tget(first?: string | {}, second?: {}): Observable<any> {\r\n\t\tconst method: string = (typeof first === 'string' ? first : '');\r\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\r\n\t\tconst url: string = this.getUrl(method);\r\n\t\tconst options = new ApiRequestOptions(params);\r\n\t\treturn this.http.get<T[]>(url, options).pipe(\r\n\t\t\ttap(x => this.logger.request(url)),\r\n\t\t);\r\n\t}\r\n\r\n\tpost(first: string | {}, second?: {}, third?: {}): Observable<any> {\r\n\t\tconst method: string = (typeof first === 'string' ? first : '');\r\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\r\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\r\n\t\tconst url: string = this.getUrl(method);\r\n\t\tconst options = new ApiRequestOptions(params);\r\n\t\treturn this.http.post<T>(url, model, options).pipe(\r\n\t\t\ttap(x => this.logger.request(url)),\r\n\t\t);\r\n\t}\r\n\r\n\tput(first: string | T, second?: T | {}, third?: {}): Observable<any> {\r\n\t\tconst method: string = (typeof first === 'string' ? first : '');\r\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\r\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\r\n\t\tconst url: string = this.getUrl(method);\r\n\t\tconst options = new ApiRequestOptions(params);\r\n\t\treturn this.http.put<T>(url, model, options).pipe(\r\n\t\t\ttap(x => this.logger.request(url)),\r\n\t\t);\r\n\t}\r\n\r\n\tpatch(first: string | T, second?: T | {}, third?: {}): Observable<any> {\r\n\t\tconst method: string = (typeof first === 'string' ? first : '');\r\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\r\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\r\n\t\tconst url: string = this.getUrl(method);\r\n\t\tconst options = new ApiRequestOptions(params);\r\n\t\treturn this.http.patch<T>(url, model, options).pipe(\r\n\t\t\ttap(x => this.logger.request(url)),\r\n\t\t);\r\n\t}\r\n\r\n\tdelete(first: string | T | number, second?: T | number | {}, third?: {}): Observable<any> {\r\n\t\tconst method: string = (typeof first === 'string' ? first : '');\r\n\t\tconst identity: T | number = (typeof first !== 'string' ? first : second) as T | number;\r\n\t\tconst id = identity ? (typeof identity === 'number' ? identity : (identity as any).id) : null;\r\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\r\n\t\tconst url: string = id !== null ? this.getUrl(`${method}/${id}`) : this.getUrl(method);\r\n\t\tconst options = new ApiRequestOptions(params);\r\n\t\treturn this.http.delete<T[]>(url, options).pipe(\r\n\t\t\ttap(x => this.logger.request(url)),\r\n\t\t);\r\n\t}\r\n\r\n\ttoCamelCase(input: any): any {\r\n\t\tlet output, key, keyCamelCase, value;\r\n\t\tif (input instanceof Array) {\r\n\t\t\treturn input.map((value: any) => {\r\n\t\t\t\tif (typeof value === 'object') {\r\n\t\t\t\t\tvalue = this.toCamelCase(value);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\toutput = {};\r\n\t\t\tfor (key in input) {\r\n\t\t\t\tif (input.hasOwnProperty(key)) {\r\n\t\t\t\t\tkeyCamelCase = (key.charAt(0).toLowerCase() + key.slice(1) || key).toString();\r\n\t\t\t\t\tvalue = input[key];\r\n\t\t\t\t\tif (value instanceof Array || (value !== null && value.constructor === Object)) {\r\n\t\t\t\t\t\tvalue = this.toCamelCase(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\toutput[keyCamelCase] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\r\n\t// TRANSFER STATE\r\n\r\n\tgetStateKey(url: string, model: {}): StateKey<any> {\r\n\t\tconst flatMap = (s: string, x: any) => {\r\n\t\t\tif (typeof x === 'number') {\r\n\t\t\t\ts += x.toString();\r\n\t\t\t} else if (typeof x === 'string') {\r\n\t\t\t\ts += x.substr(0, 10);\r\n\t\t\t} else if (x && typeof x === 'object') {\r\n\t\t\t\ts += '_' + Object.keys(x).map(k => k + '_' + flatMap('', x[k])).join('_');\r\n\t\t\t}\r\n\t\t\treturn s;\r\n\t\t};\r\n\t\turl = flatMap(url, model);\r\n\t\t// console.log('ApiService.getStateKey.url', url);\r\n\t\tconst key: string = url.replace(/(\\W)/gm, '_');\r\n\t\t// this.logger.log('ApiService.getStateKey.key', key);\r\n\t\treturn makeStateKey(key);\r\n\t}\r\n\r\n\tstateGet(first?: string | {}, second?: {}): Observable<any> {\r\n\t\tconst method: string = (typeof first === 'string' ? first : '');\r\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\r\n\t\tconst url: string = this.getUrl(method);\r\n\t\tconst options = new ApiRequestOptions(params);\r\n\t\tconst stateKey = this.getStateKey(url, params);\r\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\r\n\t\t\tconst cached = this.state.get(stateKey, null);\r\n\t\t\tthis.state.remove(stateKey);\r\n\t\t\treturn of(cached);\r\n\t\t} else {\r\n\t\t\treturn this.http.get<any>(url, options).pipe(\r\n\t\t\t\ttap(x => {\r\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\r\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tstatePost(first: string | {}, second?: {}, third?: {}): Observable<any> {\r\n\t\tconst method: string = (typeof first === 'string' ? first : '');\r\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\r\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\r\n\t\tconst url: string = this.getUrl(method);\r\n\t\tconst options = new ApiRequestOptions(params);\r\n\t\tconst stateKey = this.getStateKey(url, model);\r\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\r\n\t\t\tconst cached = this.state.get(stateKey, null);\r\n\t\t\tthis.state.remove(stateKey);\r\n\t\t\treturn of(cached);\r\n\t\t} else {\r\n\t\t\treturn this.http.post<T>(url, model, options).pipe(\r\n\t\t\t\ttap(x => {\r\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\r\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { isPlatformBrowser } from '@angular/common';\r\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\n\r\nconst TIMEOUT = 5 * 60 * 1000; // five minutes\r\n\r\n/*\r\nexport class StorageEvent extends Event {}\r\n\r\nexport class CookieStorageEvent extends StorageEvent { }\r\n\r\nexport class SessionStorageEvent extends StorageEvent { }\r\n\r\nexport class LocalStorageEvent extends StorageEvent { }\r\n*/\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class StorageService {\r\n\tpublic delete(name: string): void { }\r\n\tpublic exist(name: string): boolean { return false; }\r\n\tpublic get(name: string): any { return null; }\r\n\tpublic set(name: string, value: any, days?: number): void { }\r\n\tpublic on(): Observable<any> { return of(null); }\r\n\tpublic tryGet(): StorageService {\r\n\t\t// console.log('no StorageService available...');\r\n\t\treturn this;\r\n\t}\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class CookieStorageService implements StorageService {\r\n\r\n\tconstructor(\r\n\t\t@Inject(PLATFORM_ID) private platformId: string,\r\n\t\tprivate storageService: StorageService,\r\n\t) { }\r\n\r\n\tpublic tryGet(): StorageService {\r\n\t\tif (this.isSupported()) {\r\n\t\t\t// console.log('CookieStorageService.supported');\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\treturn this.storageService.tryGet();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic delete(name: string): void {\r\n\t\tthis.setter(name, '', -1);\r\n\t}\r\n\r\n\tpublic exist(name: string): boolean {\r\n\t\treturn document.cookie.indexOf(';' + name + '=') !== -1 || document.cookie.indexOf(name + '=') === 0;\r\n\t}\r\n\r\n\tpublic get(name: string): any {\r\n\t\tconst cookieName = name + '=';\r\n\t\tconst ca = document.cookie.split(';');\r\n\t\tfor (let i = 0; i < ca.length; i++) {\r\n\t\t\tlet c = ca[i];\r\n\t\t\twhile (c.charAt(0) === ' ') {\r\n\t\t\t\tc = c.substring(1, c.length);\r\n\t\t\t}\r\n\t\t\tif (c.indexOf(cookieName) === 0) {\r\n\t\t\t\tconst value = c.substring(cookieName.length, c.length);\r\n\t\t\t\tlet model = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmodel = JSON.parse(decodeURIComponent(atob(value)));\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log('Cookie.get.error parsing', name, e);\r\n\t\t\t\t}\r\n\t\t\t\treturn model;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic set(name: string, value: any, days?: number) {\r\n\t\ttry {\r\n\t\t\tlet cache = [];\r\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\r\n\t\t\t\tif (key === 'pool') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcache.push(value);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t\tcache = null;\r\n\t\t\tthis.setter(name, btoa(encodeURIComponent(json)), days);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('CookieSet.error serializing', name, value, e);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic on(): Observable<any> {\r\n\t\t// todo\r\n\t\tconst interval: number = 1000, timeout: number = TIMEOUT;\r\n\t\tlet i, elapsed: number = 0;\r\n\t\tfunction checkCookie() {\r\n\t\t\tif (elapsed > timeout) {\r\n\t\t\t\t// promise.reject('timeout');\r\n\t\t\t} else {\r\n\t\t\t\tconst c: any = this.get(name);\r\n\t\t\t\tif (c) {\r\n\t\t\t\t\t// promise.resolve(c);\r\n\t\t\t\t} else {\r\n\t\t\t\t\telapsed += interval;\r\n\t\t\t\t\ti = setTimeout(checkCookie, interval);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckCookie();\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tprivate setter(name: string, value: any, days?: number) {\r\n\t\tlet expires;\r\n\t\tif (days) {\r\n\t\t\tconst date = new Date();\r\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n\t\t\texpires = '; expires=' + date.toUTCString();\r\n\t\t} else {\r\n\t\t\texpires = '';\r\n\t\t}\r\n\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\r\n\t}\r\n\r\n\tprivate isSupported(): boolean {\r\n\t\treturn isPlatformBrowser(this.platformId);\r\n\t}\r\n\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class SessionStorageService implements StorageService {\r\n\r\n\tconstructor(\r\n\t\t@Inject(PLATFORM_ID) private platformId: string,\r\n\t\tprivate cookieStorageService: CookieStorageService,\r\n\t) { }\r\n\r\n\tpublic tryGet(): StorageService {\r\n\t\tif (this.isSupported()) {\r\n\t\t\t// console.log('SessionStorageService.supported');\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\treturn this.cookieStorageService.tryGet();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic delete(name: string): void {\r\n\t\twindow.sessionStorage.removeItem(name);\r\n\t}\r\n\r\n\tpublic exist(name: string): boolean {\r\n\t\treturn window.sessionStorage[name] !== undefined;\r\n\t}\r\n\r\n\tpublic get(name: string): any {\r\n\t\tlet value = null;\r\n\t\tif (window.sessionStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorage.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic on(): Observable<any> {\r\n\t\t/*\r\n\t\treturn $promise(function (promise) {\r\n\t\t\tconst timeout = TIMEOUT;\r\n\t\t\tlet i;\r\n\t\t\tfunction storageEvent(e) {\r\n\t\t\t\tif (i) {\r\n\t\t\t\t\tclearTimeout(i);\r\n\t\t\t\t}\r\n\t\t\t\tif (e.originalEvent.key === name) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\r\n\t\t\t\t\t\tpromise.resolve(value);\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log('SessionStorage.on.error parsing', name, error);\r\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// return fromEvent(window, 'storage');\r\n\t\t\tangular.element(window).on('storage', storageEvent);\r\n\t\t\ti = setTimeout(function () {\r\n\t\t\t\tpromise.reject('timeout');\r\n\t\t\t}, timeout);\r\n\t\t});\r\n\t\t*/\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tpublic set(name: string, value: any, days?: number): void {\r\n\t\ttry {\r\n\t\t\tlet cache = [];\r\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\r\n\t\t\t\tif (key === 'pool') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcache.push(value);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t\tcache = null;\r\n\t\t\twindow.sessionStorage.setItem(name, json);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('SessionStorage.set.error serializing', name, value, e);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate isSupported(): boolean {\r\n\t\tlet supported: boolean = false;\r\n\t\tif (isPlatformBrowser(this.platformId)) {\r\n\t\t\ttry {\r\n\t\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\r\n\t\t\t\tif (supported) {\r\n\t\t\t\t\twindow.sessionStorage.setItem('test', '1');\r\n\t\t\t\t\twindow.sessionStorage.removeItem('test');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsupported = false;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn supported;\r\n\t}\r\n\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class LocalStorageService implements StorageService {\r\n\r\n\tconstructor(\r\n\t\t@Inject(PLATFORM_ID) private platformId: string,\r\n\t\tprivate cookieStorageService: CookieStorageService,\r\n\t) { }\r\n\r\n\tpublic tryGet(): StorageService {\r\n\t\tif (this.isSupported()) {\r\n\t\t\t// console.log('LocalStorageService.supported');\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\treturn this.cookieStorageService.tryGet();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic delete(name: string): void {\r\n\t\twindow.localStorage.removeItem(name);\r\n\t}\r\n\r\n\tpublic exist(name: string): boolean {\r\n\t\treturn window.localStorage[name] !== undefined;\r\n\t}\r\n\r\n\tpublic get(name: string): any {\r\n\t\tlet value = null;\r\n\t\tif (window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorage.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic on(): Observable<any> {\r\n\t\t/*\r\n\t\treturn $promise(function (promise) {\r\n\t\t\tconst timeout = TIMEOUT;\r\n\t\t\tlet i;\r\n\t\t\tfunction storageEvent(e) {\r\n\t\t\t\tif (i) {\r\n\t\t\t\t\tclearTimeout(i);\r\n\t\t\t\t}\r\n\t\t\t\tif (e.originalEvent.key === name) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\r\n\t\t\t\t\t\tpromise.resolve(value);\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log('LocalStorage.on.error parsing', name, error);\r\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// return fromEvent(window, 'storage');\r\n\t\t\tangular.element(window).on('storage', storageEvent);\r\n\t\t\ti = setTimeout(function () {\r\n\t\t\t\tpromise.reject('timeout');\r\n\t\t\t}, timeout);\r\n\t\t});\r\n\t\t*/\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tpublic set(name: string, value: any, days?: number): void {\r\n\t\ttry {\r\n\t\t\tlet cache = [];\r\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\r\n\t\t\t\tif (key === 'pool') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcache.push(value);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t\tcache = null;\r\n\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('LocalStorage.set.error serializing', name, value, e);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate isSupported(): boolean {\r\n\t\tlet supported: boolean = false;\r\n\t\tif (isPlatformBrowser(this.platformId)) {\r\n\t\t\ttry {\r\n\t\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\t\tif (supported) {\r\n\t\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsupported = false;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn supported;\r\n\t}\r\n\r\n}\r\n","import { HttpRequest } from '@angular/common/http';\r\nimport { Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\r\nimport { AuthToken } from './auth';\r\nimport { LocalStorageService } from '../storage/storage.service';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class AuthService {\r\n\r\n\tprivate cachedRequests: Array<HttpRequest<any>> = [];\r\n\tprivate paths: string[] = [];\r\n\r\n\tconstructor(\r\n\t\t@Inject(PLATFORM_ID) private platformId: string,\r\n\t\tprivate injector: Injector,\r\n\t\tprivate localStorageService: LocalStorageService,\r\n\t) { }\r\n\r\n\tsetToken(authToken: AuthToken): void {\r\n\t\tthis.localStorageService.set('authToken', authToken);\r\n\t\tthis.retryFailedRequests();\r\n\t}\r\n\r\n\tgetToken(): AuthToken {\r\n\t\treturn this.localStorageService.get('authToken') as AuthToken;\r\n\t}\r\n\r\n\tgetFakeToken(): AuthToken {\r\n\t\treturn new AuthToken('fakeToken');\r\n\t}\r\n\r\n\tisValid(authToken: AuthToken): boolean {\r\n\t\t// return a boolean reflecting whether or not the token is expired\r\n\t\treturn authToken && (authToken.expiresIn > Date.now() || authToken.expiresIn === 0);\r\n\t}\r\n\r\n\tisAuthenticated(): boolean {\r\n\t\tconst authToken = this.getToken();\r\n\t\treturn this.isValid(authToken);\r\n\t}\r\n\r\n\tcollectFailedRequest(request): void {\r\n\t\tthis.cachedRequests.push(request);\r\n\t}\r\n\r\n\tretryFailedRequests(): void {\r\n\t\t// this method can be called after the token is refreshed\r\n\t\t// console.log('AuthService.retryFailedRequests');\r\n\t\t// retry the requests.\r\n\t}\r\n\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport interface Bundles { [key: string]: string; }\r\n\r\nexport const BUNDLES = new InjectionToken<Bundles>('core.bundles');\r\n","import { AfterContentChecked, Directive, ElementRef, Input, Renderer2, TemplateRef, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n\tselector: '[default]',\r\n})\r\nexport class DefaultContentDirective implements AfterContentChecked {\r\n\r\n\t@Input() default: TemplateRef<any>;\r\n\tprivate element: HTMLElement;\r\n\tprivate hasContent = true;\r\n\r\n\tconstructor(\r\n\t\telement: ElementRef,\r\n\t\tprivate container: ViewContainerRef,\r\n\t\tprivate renderer: Renderer2) {\r\n\t\tthis.element = element.nativeElement;\r\n\t}\r\n\r\n\tngAfterContentChecked(): void {\r\n\t\tlet hasContent = false;\r\n\t\tconsole.log('DefaultContentDirective', this.element.childNodes);\r\n\t\tfor (let i = this.element.childNodes.length - 1; i >= 0; --i) {\r\n\t\t\tconst node = this.element.childNodes[i];\r\n\t\t\tif (node.nodeType === 1 || node.nodeType === 3) {\r\n\t\t\t\thasContent = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (hasContent !== this.hasContent) {\r\n\t\t\tthis.hasContent = hasContent;\r\n\t\t\tif (hasContent) {\r\n\t\t\t\t// this.renderer.removeClass(this.element, 'is-empty');\r\n\t\t\t\tthis.container.clear();\r\n\t\t\t} else {\r\n\t\t\t\t// this.renderer.addClass(this.element, 'is-empty');\r\n\t\t\t\tthis.container.createEmbeddedView(this.default);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n\tselector: 'core-module',\r\n\ttemplate: `<span class=\"core-module\">core {{version}}</span>`,\r\n\tstyles: []\r\n})\r\nexport class CoreModuleComponent implements OnInit {\r\n\r\n\tversion: string = '0.0.13';\r\n\r\n\tconstructor() { }\r\n\r\n\tngOnInit() {\r\n\t}\r\n\r\n}\r\n","import { ComponentRef, Directive, Inject, Injector, Input, NgModuleFactory, NgModuleFactoryLoader, NgModuleRef, OnDestroy, OnInit, Type, ViewContainerRef } from '@angular/core';\r\nimport { Bundles, BUNDLES } from './bundle';\r\n\r\nexport type ModuleWithRoot = Type<any> & { rootComponent: Type<any> };\r\n\r\n@Directive({\r\n\tselector: '[bundle]'\r\n})\r\nexport class BundleDirective implements OnInit, OnDestroy {\r\n\r\n\t@Input() bundle: keyof Bundles;\r\n\t@Input() data?: any;\r\n\tprivate moduleRef_: NgModuleRef<any>;\r\n\tprivate componentRef_: ComponentRef<any>;\r\n\r\n\tconstructor(\r\n\t\t@Inject(BUNDLES) private bundles,\r\n\t\tprivate injector: Injector,\r\n\t\tprivate loader: NgModuleFactoryLoader,\r\n\t\tprivate container: ViewContainerRef,\r\n\t) {\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tthis.loader.load(this.bundles[this.bundle]).then((moduleFactory: NgModuleFactory<any>) => {\r\n\t\t\tconst moduleRef = moduleFactory.create(this.injector);\r\n\t\t\tthis.moduleRef_ = moduleRef;\r\n\t\t\tconst rootComponentType = moduleRef.injector.get('LAZY_ROOT_COMPONENT');\r\n\t\t\t// console.log(rootComponentType);\r\n\t\t\tconst factory = moduleRef.componentFactoryResolver.resolveComponentFactory(rootComponentType);\r\n\t\t\tconst componentRef = this.container.createComponent(factory);\r\n\t\t\tconst instance = componentRef.instance;\r\n\t\t\t// instance.data = this.data; // !!!\r\n\t\t\tthis.componentRef_ = componentRef;\r\n\t\t});\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\tif (this.componentRef_) {\r\n\t\t\tthis.componentRef_.destroy();\r\n\t\t}\r\n\t\tif (this.moduleRef_) {\r\n\t\t\tthis.moduleRef_.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","\r\nimport { Component, OnDestroy } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Component({\r\n\ttemplate: ''\r\n})\r\nexport class DisposableComponent implements OnDestroy {\r\n\r\n\tprotected unsubscribe: any = new Subject();\r\n\r\n\tngOnDestroy() {\r\n\t\tthis.unsubscribe.next();\r\n\t\tthis.unsubscribe.complete();\r\n\t\t// console.log('DisposableComponent.ngOnDestroy', this);\r\n\t}\r\n\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n\tname: 'highlight',\r\n\t// pure: false\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class HighlightPipe implements PipeTransform {\r\n\r\n\ttransform(text: string, query: string): string {\r\n\t\tif (!query) {\r\n\t\t\treturn text;\r\n\t\t}\r\n\t\ttext = this.encodeHTML(text);\r\n\t\tquery = this.encodeHTML(query);\r\n\t\tconst regExp = new RegExp('&[^;]+;|' + this.escapeRegexChars(query), 'gi');\r\n\t\treturn text.replace(regExp, function (match) {\r\n\t\t\treturn match.toLowerCase() === query.toLowerCase() ? '<strong>' + match + '</strong>' : match;\r\n\t\t});\r\n\t}\r\n\r\n\tescapeRegexChars(text: string) {\r\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\r\n\t}\r\n\r\n\tsafeToString(text: string) {\r\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\r\n\t}\r\n\r\n\tencodeHTML(text: string) {\r\n\t\treturn this.safeToString(text)\r\n\t\t\t.replace(/&/g, '&amp;')\r\n\t\t\t.replace(/</g, '&lt;')\r\n\t\t\t.replace(/>/g, '&gt;');\r\n\t}\r\n\r\n}\r\n","\r\nimport { Location } from '@angular/common';\r\nimport { Injectable, Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n\tname: 'segment',\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class SegmentPipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate location: Location\r\n\t) { }\r\n\r\n\ttransform(segments: any[] | string): any[] {\r\n\t\tsegments = segments != null ? (Array.isArray(segments) ? segments : segments.split('/')) : [];\r\n\t\tlet path: string = segments.join('/');\r\n\t\tpath = this.location.normalize(path);\r\n\t\tif (path.indexOf('/') !== 0) {\r\n\t\t\tpath = `/${path}`;\r\n\t\t}\r\n\t\tsegments = path.split('/');\r\n\t\treturn segments;\r\n\t}\r\n\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { ApiService } from '../api/api.service';\r\nimport { Identity } from './identity';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class IdentityService<T extends Identity> extends ApiService<T> {\r\n\r\n\tconstructor(\r\n\t\tprotected injector: Injector\r\n\t) {\r\n\t\tsuper(injector);\r\n\t}\r\n\r\n\tget collection(): string {\r\n\t\treturn '/api/identity';\r\n\t}\r\n\r\n\tgetDetailById(id: number | string): Observable<T> {\r\n\t\treturn this.get({ id });\r\n\t}\r\n\r\n}\r\n","import { isPlatformBrowser } from '@angular/common';\r\nimport { EventEmitter, Injectable, Injector } from '@angular/core';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\nimport { filter, map, switchMap } from 'rxjs/operators';\r\nimport { IdentityService } from '../models/identity.service';\r\nimport { Translate } from './translate';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class TranslateService<T extends Translate> extends IdentityService<T> {\r\n\r\n\tstatic cache: {} = {};\r\n\tstatic lang_: string = null;\r\n\r\n\tget collection(): string {\r\n\t\treturn '/api/translate';\r\n\t}\r\n\r\n\tpublic events: EventEmitter<any> = new EventEmitter();\r\n\tpublic missingHandler?: Function;\r\n\r\n\tprivate language_: any = new BehaviorSubject<any>(undefined);\r\n\tprivate languages_: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\r\n\r\n\tpublic get lang(): string {\r\n\t\treturn TranslateService.lang_;\r\n\t}\r\n\tpublic set lang(lang: string) {\r\n\t\tif (lang !== TranslateService.lang_) {\r\n\t\t\tTranslateService.lang_ = lang;\r\n\t\t\tconst languages = this.languages_.getValue();\r\n\t\t\tif (languages.length) {\r\n\t\t\t\tconst language = languages.find(x => x.lang === lang);\r\n\t\t\t\tthis.language_.next(language);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic get language() {\r\n\t\treturn this.language_.getValue();\r\n\t}\r\n\r\n\tpublic get languages() {\r\n\t\treturn this.languages_.getValue();\r\n\t}\r\n\r\n\tconstructor(\r\n\t\tprotected injector: Injector\r\n\t) {\r\n\t\tsuper(injector);\r\n\t\tthis.languages_.next(this.config.languages);\r\n\t}\r\n\r\n\tpublic observe$(): Observable<{}> {\r\n\t\t// console.log(new Error().stack);\r\n\t\treturn this.language_.pipe(\r\n\t\t\tfilter(x => x !== undefined),\r\n\t\t\tswitchMap((language: any) => this.getTranslation(language.lang)),\r\n\t\t);\r\n\t}\r\n\r\n\tpublic getTranslation(lang: string): Observable<{}> {\r\n\t\tif (!lang || !lang.trim()) {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t\tTranslateService.lang_ = lang;\r\n\t\tif (TranslateService.cache[lang]) {\r\n\t\t\treturn of(TranslateService.cache[lang]);\r\n\t\t} else {\r\n\t\t\treturn this.get(`?lang=${lang}`, { lang }).pipe(\r\n\t\t\t\t// take(1),\r\n\t\t\t\tmap((x: Translate[]) => {\r\n\t\t\t\t\tif (x.length && x[0]) {\r\n\t\t\t\t\t\tconst labels = x[0].labels;\r\n\t\t\t\t\t\tTranslateService.cache[lang] = labels;\r\n\t\t\t\t\t\tthis.events.emit(labels);\r\n\t\t\t\t\t\treturn labels;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn of(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\t// tap(x => this.logger.log(`found label matching \"${lang}\"`))\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getTranslate(key: string, defaultValue?: string, params?: any): string | any {\r\n\t\t// console.log('TranslateService.getTranslate', key, TranslateService.cache, TranslateService.lang_);\r\n\t\tif (key) {\r\n\t\t\tlet value: string | null = null;\r\n\t\t\tlet labels: any = TranslateService.cache[TranslateService.lang_];\r\n\t\t\t// console.log('labels', TranslateService.lang_, TranslateService.cache, labels);\r\n\t\t\tif (labels) {\r\n\t\t\t\tconst keys: string[] = key.split('.');\r\n\t\t\t\tlet k = keys.shift();\r\n\t\t\t\twhile (keys.length > 0 && labels[k]) {\r\n\t\t\t\t\tlabels = labels[k];\r\n\t\t\t\t\tk = keys.shift();\r\n\t\t\t\t}\r\n\t\t\t\tvalue = labels[k]; // || `{${k}}`;\r\n\t\t\t\tif (typeof value !== 'string') {\r\n\t\t\t\t\tvalue = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this.parseTranslate(value, key, defaultValue, params);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic transform(key: string, defaultValue?: string, params?: any): string | undefined {\r\n\t\tconst value = this.getTranslate(key, defaultValue, params);\r\n\t\treturn value;\r\n\t}\r\n\r\n\tprivate parseTranslate(value: string | null, key: string, defaultValue?: string, params?: any): string | any {\r\n\t\tif (value == null) {\r\n\t\t\treturn defaultValue || this.missingTranslate(key);\r\n\t\t} else if (params) {\r\n\t\t\treturn this.parseParams(value, params);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tprivate missingTranslate(key: string): string {\r\n\t\tif (this.missingHandler) {\r\n\t\t\treturn typeof this.missingHandler === 'function' ?\r\n\t\t\t\tthis.missingHandler(key) :\r\n\t\t\t\tthis.missingHandler;\r\n\t\t}\r\n\t\treturn key;\r\n\t}\r\n\r\n\tprivate parseParams(value: string, params: any): string {\r\n\t\tconst TEMPLATEREGEXP_: RegExp = /@([^{}\\s]*)/g; // /{{\\s?([^{}\\s]*)\\s?}}/g;\r\n\t\treturn value.replace(TEMPLATEREGEXP_, (text: string, key: string) => {\r\n\t\t\tconst replacer: string = params[key] as string;\r\n\t\t\treturn typeof replacer !== 'undefined' ? replacer : text;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic use(lang: string) {\r\n\r\n\t}\r\n\r\n\tpublic setDefaultLang(lang: string) {\r\n\r\n\t}\r\n\r\n\tpublic addLangs(lang: string[]) {\r\n\r\n\t}\r\n\r\n\tpublic getBrowserLang(): string {\r\n\t\tif (isPlatformBrowser(this.platformId)) {\r\n\t\t\tconst lang = this.getFirstBrowserLang() || this.config.defaultLanguage; // navigator.languages ? navigator.languages[0] : (navigator.language || navigator['userLanguage'] || this.config.defaultLanguage);\r\n\t\t\t// console.log('getBrowserLang', lang, navigator.languages);\r\n\t\t\treturn lang;\r\n\t\t} else {\r\n\t\t\treturn this.config.defaultLanguage;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getFirstBrowserLang() {\r\n\t\tconst lang = this.getFirstBrowserLocale();\r\n\t\tif (lang) {\r\n\t\t\treturn lang.split('-')[0];\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getFirstBrowserLocale() {\r\n\t\tconst navigator = window.navigator;\r\n\t\tconst properties = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'];\r\n\t\tlet lang;\r\n\t\tif (Array.isArray(navigator.languages)) {\r\n\t\t\tlang = navigator.languages[0];\r\n\t\t}\r\n\t\tlet i = 0;\r\n\t\twhile (!lang && i < properties.length) {\r\n\t\t\tlang = navigator[properties[i]];\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn lang;\r\n\t}\r\n\r\n}\r\n","\r\n\r\nimport { isPlatformBrowser, isPlatformServer, Location } from '@angular/common';\r\nimport { Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\r\nimport { ActivatedRoute, NavigationStart, Params, Router } from '@angular/router';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\nimport { distinctUntilChanged, filter, switchMap } from 'rxjs/operators';\r\nimport { CoreService } from '../config/core.service';\r\nimport { SegmentPipe } from '../pipes/segment.pipe';\r\nimport { Translate } from '../translate/translate';\r\nimport { TranslateService } from '../translate/translate.service';\r\n\r\ndeclare const Buffer;\r\ndeclare const process;\r\n\r\n// @dynamic\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class RouteService {\r\n\r\n\tstatic startTime: number;\r\n\tstatic endTime: number;\r\n\tprivate urlStrategy: string;\r\n\tprivate _language: any = new BehaviorSubject({});\r\n\tpublic readonly language: Observable<any> = this._language.asObservable();\r\n\tprivate _languages: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\r\n\tpublic readonly languages: Observable<any[]> = this._languages.asObservable();\r\n\tprivate _lang: string;\r\n\tprivate path: string;\r\n\tpublic params: Observable<Params>;\r\n\tpublic queryParams: Observable<Params>;\r\n\tpublic currentMarket: string;\r\n\r\n\tconstructor(\r\n\t\t@Inject(PLATFORM_ID) private platformId: string,\r\n\t\tprivate coreService: CoreService,\r\n\t\tprivate injector: Injector,\r\n\t\tprivate translateService: TranslateService<Translate>,\r\n\t\tprivate location: Location,\r\n\t\tprivate route: ActivatedRoute,\r\n\t\tprivate router: Router,\r\n\t\tprivate segment: SegmentPipe,\r\n\t) {\r\n\t\tthis.urlStrategy = this.coreService.options.urlStrategy;\r\n\t\tthis._languages.next(this.coreService.options.languages);\r\n\t\tthis.currentMarket = this.coreService.options.defaultMarket;\r\n\t\tthis.setLanguages();\r\n\t\tif (this.coreService.options.useLang || this.coreService.options.useMarket) {\r\n\t\t\tthis.subscribeToRouter();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate get lang(): string {\r\n\t\treturn this._lang;\r\n\t}\r\n\r\n\tprivate set lang(lang: string) {\r\n\t\tif (lang !== this._lang) {\r\n\t\t\tthis._lang = lang;\r\n\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\r\n\t\t\tthis._language.next(language);\r\n\t\t\tthis.translateService.use(lang);\r\n\t\t\t// console.log('RouteService.set lang', lang, this.coreService.options.useLang);\r\n\t\t\tif (this.coreService.options.useLang) {\r\n\t\t\t\tconst _lang: string = this._lang;\r\n\t\t\t\tlet path = this.location.path();\r\n\t\t\t\tif (path.indexOf(`/${_lang}`) === 0) {\r\n\t\t\t\t\tpath = path.replace(`/${_lang}`, `/${lang}`);\r\n\t\t\t\t} else if (path.indexOf(`/${lang}`) !== 0) {\r\n\t\t\t\t\tpath = `/${lang}` + path;\r\n\t\t\t\t}\r\n\t\t\t\tthis.path = path;\r\n\t\t\t\t// const langIndex = this.urlStrategy.split('/').indexOf(':lang');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic get currentLang(): string {\r\n\t\treturn this._lang;\r\n\t}\r\n\r\n\tpublic pageParams$: BehaviorSubject<Params> = new BehaviorSubject({});\r\n\tpublic getPageParams(): Observable<Params> {\r\n\t\t// console.log('RouteService.getPageParams', this.router.url);\r\n\t\treturn this.route.queryParams.pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tswitchMap(params => {\r\n\t\t\t\t// console.log(params);\r\n\t\t\t\tconst parsed = this.parseParams(params);\r\n\t\t\t\tthis.pageParams$.next(parsed);\r\n\t\t\t\treturn of(parsed);\r\n\t\t\t}),\r\n\t\t\t// tap(params => console.log('RouteService.getPageParams', params)),\r\n\t\t);\r\n\t}\r\n\r\n\tpublic parseParams(params: any): any {\r\n\t\tconst parsed = {};\r\n\t\tObject.keys(params).forEach(k => parsed[k] = this.parse(params[k]));\r\n\t\t/*\r\n\t\tfor (const key in params) {\r\n\t\t\tif (typeof (params[key]) === 'string') {\r\n\t\t\t\tparsed[key] = this.parse(params[key]);\r\n\t\t\t} else {\r\n\t\t\t\tparsed[key] = params[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\treturn parsed;\r\n\t}\r\n\r\n\tpublic serializeParams(params: any) {\r\n\t\tconst serialized = {};\r\n\t\tObject.keys(params).forEach(k => serialized[k] = this.serialize(params[k]));\r\n\t\treturn serialized;\r\n\t}\r\n\r\n\tpublic parse(base64) {\r\n\t\ttry {\r\n\t\t\tif (isPlatformBrowser(this.platformId)) {\r\n\t\t\t\treturn JSON.parse(window.atob(base64));\r\n\t\t\t} else {\r\n\t\t\t\treturn JSON.parse(Buffer.from(base64, 'base64').toString('ascii'));\r\n\t\t\t}\r\n\t\t} catch {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic serialize(object) {\r\n\t\tif (isPlatformBrowser(this.platformId)) {\r\n\t\t\treturn window.btoa(JSON.stringify(object));\r\n\t\t} else {\r\n\t\t\treturn Buffer.from(JSON.stringify(object), 'ascii').toString('base64');\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getId(): number {\r\n\t\treturn +this.route.snapshot.paramMap.get('id');\r\n\t}\r\n\r\n\tpublic getSlug(): string {\r\n\t\treturn this.route.snapshot.paramMap.get('slug');\r\n\t}\r\n\r\n\tpublic toRoute(data: any[] | string): any[] {\r\n\t\tconst segments = this.segment.transform(data);\r\n\t\tif (this.coreService.options.useMarket) {\r\n\t\t\tconst market: string = this.currentMarket;\r\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\r\n\t\t\tsegments.splice(marketIndex, 0, market);\r\n\t\t}\r\n\t\tif (this.coreService.options.useLang) {\r\n\t\t\tconst lang: string = this._lang;\r\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\r\n\t\t\tsegments.splice(langIndex, 0, lang);\r\n\t\t}\r\n\t\t// console.log('RouteService.toRoute', segments);\r\n\t\treturn segments;\r\n\t}\r\n\r\n\tpublic toSlug(data: any[] | string): any[] {\r\n\t\tconst segments = this.segment.transform(data);\r\n\t\tlet paths = segments.filter(x => {\r\n\t\t\treturn typeof x === 'string';\r\n\t\t});\r\n\t\tconst datas = segments.filter(x => {\r\n\t\t\treturn typeof x !== 'string';\r\n\t\t});\r\n\t\tif (this.coreService.options.useMarket) {\r\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\r\n\t\t\tif (paths.length > marketIndex) {\r\n\t\t\t\tpaths[marketIndex] = '*';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.coreService.options.useLang) {\r\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\r\n\t\t\tif (paths.length > langIndex) {\r\n\t\t\t\tpaths[langIndex] = '*';\r\n\t\t\t}\r\n\t\t}\r\n\t\tpaths = paths.join('/').replace(/\\/\\*/gi, '').split('/');\r\n\t\t// console.log('RouteService.toSlug', data, paths);\r\n\t\treturn paths.concat(datas);\r\n\t}\r\n\r\n\tpublic toParams(data: any): any {\r\n\t\treturn {\r\n\t\t\tdata: window.btoa(JSON.stringify(data))\r\n\t\t};\r\n\t}\r\n\r\n\tpublic toData(params: any): any {\r\n\t\tif (params && params.data) {\r\n\t\t\treturn JSON.parse(window.atob(params.data));\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tpublic getParams(): Observable<ComponentFactory<PageComponent>> {\r\n\t\treturn this.router.events.pipe(\r\n\t\t\tfilter(event => event instanceof ActivationEnd),\r\n\t\t\tmap(() => this.route),\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tmap(route => route.firstChild),\r\n\t\t\tswitchMap(route => route.params),\r\n\t\t\tconcatMap(x => {\r\n\t\t\t\treturn of(this.toData(x));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tpublic setLanguage(lang: string, silent?: boolean) {\r\n\t\tthis.lang = lang;\r\n\t\tif (this.coreService.options.useLang && this.path) {\r\n\t\t\t// console.log('RouteService.setLanguage', this.path, this._lang, lang, silent);\r\n\t\t\tif (silent) {\r\n\t\t\t\tthis.location.replaceState(this.path);\r\n\t\t\t} else {\r\n\t\t\t\tthis.router.navigate([this.path]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// PRIVATE METHODS\r\n\r\n\tprivate setLanguages() {\r\n\t\tthis.translateService.addLangs(this.coreService.options.languages ? this.coreService.options.languages.map(x => x.lang) : []);\r\n\t\tthis.translateService.setDefaultLang(this.coreService.options.defaultLanguage);\r\n\t\t// this.setLanguage(this.detectLanguage(), true);\r\n\t\tthis.setLanguage(this.coreService.options.defaultLanguage, true);\r\n\t\t/*\r\n\t\tthis.translateService.onLangChange.subscribe((e: LangChangeEvent) => {\r\n\t\t\t// console.log('RouteService.onLangChange', e);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tprivate subscribeToRouter() {\r\n\t\tthis.router.events.pipe(\r\n\t\t\tfilter(event => event instanceof NavigationStart)\r\n\t\t).subscribe((event: NavigationStart) => {\r\n\t\t\tconst location = this.location.normalize(event.url).split('/');\r\n\t\t\tif (this.coreService.options.useMarket) {\r\n\t\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\r\n\t\t\t\tconst market = location[marketIndex];\r\n\t\t\t\tif (market !== this.currentMarket) {\r\n\t\t\t\t\tthis.currentMarket = market;\r\n\t\t\t\t\t// console.log('RouteService.setMarket', market, event.url);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.coreService.options.useLang) {\r\n\t\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\r\n\t\t\t\tconst lang = location[langIndex];\r\n\t\t\t\tif (lang !== this._lang) {\r\n\t\t\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\r\n\t\t\t\t\tthis._language.next(language);\r\n\t\t\t\t\tthis.translateService.use(lang);\r\n\t\t\t\t\t// console.log('RouteService.setLang', lang, this._lang, langIndex, location, event.url);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate detectLanguage(): string {\r\n\t\tlet acceptLanguage: string = null;\r\n\t\tif (isPlatformServer(this.platformId)) {\r\n\t\t\t/*\r\n\t\t\t// server side express engine\r\n\t\t\tapp.engine('html',  (_, options, callback) => {\r\n\t\t\t\tlet engine = ngExpressEngine({\r\n\t\t\t\t\tbootstrap: ServerAppModule,\r\n\t\t\t\t\tproviders: [ { provide: 'request', useFactory: () => options.req } ]\r\n\t\t\t\t});\r\n\t\t\t\tengine(_, options, callback)\r\n\t\t\t})\r\n\t\t\t*/\r\n\t\t\tconst request = this.injector.get('request');\r\n\t\t\tif (request) {\r\n\t\t\t\tacceptLanguage = request.headers['accept-language'];\r\n\t\t\t\tconst languages: string[] = acceptLanguage.match(/[a-zA-Z\\-]{2,10}/g) || [];\r\n\t\t\t\tif (languages.length > 0) {\r\n\t\t\t\t\tacceptLanguage = languages[0].split('-')[0];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tacceptLanguage = null;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('request', request, 'acceptLanguage', acceptLanguage);\r\n\t\t\t}\r\n\t\t\t// console.log('RouteService.isPlatformServer', this.platformId, acceptLanguage);\r\n\t\t} else if (isPlatformBrowser(this.platformId)) {\r\n\t\t\tacceptLanguage = this.translateService.getBrowserLang();\r\n\t\t\t// console.log('RouteService.isPlatformBrowser', this.platformId, acceptLanguage);\r\n\t\t}\r\n\t\tlet detectedLanguage: string = this.coreService.options.defaultLanguage;\r\n\t\tconst regexp: RegExp = new RegExp(`(${this.coreService.options.languages ? this.coreService.options.languages.map(x => x.lang).join('|') : ''})`, 'gi');\r\n\t\tconst match = (acceptLanguage || '').match(regexp);\r\n\t\tdetectedLanguage = match ? match[0] : detectedLanguage;\r\n\t\t// console.log('RouteService.detectLanguage', detectedLanguage);\r\n\t\treturn detectedLanguage;\r\n\t}\r\n\r\n\tpublic getTime() {\r\n\t\tif (isPlatformBrowser(this.platformId)) {\r\n\t\t\treturn (performance || Date).now();\r\n\t\t} else {\r\n\t\t\tconst time = process.hrtime();\r\n\t\t\treturn (time[0] * 1e9 + time[1]) / 1e6;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic start() {\r\n\t\tRouteService.startTime = this.getTime();\r\n\t}\r\n\r\n\tpublic end() {\r\n\t\tRouteService.endTime = this.getTime();\r\n\t\tconsole.log('RouteService.end', RouteService.endTime - RouteService.startTime);\r\n\t}\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class HttpStatusCodeService {\r\n\r\n\tprivate statusCode: number;\r\n\tprivate redirectUrl: string;\r\n\r\n\tconstructor() {\r\n\t\tthis.statusCode = 200;\r\n\t\tthis.redirectUrl = null;\r\n\t}\r\n\r\n\tpublic setStatusCode(statusCode: number, redirectUrl: string = null) {\r\n\t\tthis.statusCode = statusCode;\r\n\t\tthis.redirectUrl = redirectUrl;\r\n\t}\r\n\r\n\tpublic getStatusCode(): number {\r\n\t\treturn (this.statusCode === 309 ? 301 : this.statusCode);\r\n\t}\r\n\r\n\tpublic getRedirectUrl(): string {\r\n\t\treturn this.redirectUrl;\r\n\t}\r\n\r\n}\r\n","\r\nimport { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse, HttpResponseBase } from '@angular/common/http';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, tap } from 'rxjs/operators';\r\nimport { CoreConfig } from '../config/core.config';\r\nimport { CoreService } from '../config/core.service';\r\nimport { LoggerErrorStrategy } from '../logger/logger';\r\nimport { Logger } from '../logger/logger.service';\r\nimport { RouteService } from '../route/route.service';\r\nimport { HttpStatusCodeService } from './http-status-code.service';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class HttpResponseInterceptor implements HttpInterceptor {\r\n\r\n\tprivate loggerErrorStrategy_: LoggerErrorStrategy = LoggerErrorStrategy.Server;\r\n\r\n\tprivate config_: CoreConfig;\r\n\tget config(): CoreConfig {\r\n\t\tif (!this.config_) {\r\n\t\t\tthis.config_ = this.injector.get(CoreService).options;\r\n\t\t}\r\n\t\treturn this.config_;\r\n\t}\r\n\r\n\tprivate logger_: Logger;\r\n\tget logger() {\r\n\t\tif (!this.logger_) {\r\n\t\t\tthis.logger_ = this.injector.get(Logger);\r\n\t\t}\r\n\t\treturn this.logger_;\r\n\t}\r\n\r\n\tprivate router_: Router;\r\n\tget router() {\r\n\t\tif (!this.router_) {\r\n\t\t\tthis.router_ = this.injector.get(Router);\r\n\t\t}\r\n\t\treturn this.router_;\r\n\t}\r\n\r\n\tprivate routeService_: RouteService;\r\n\tget routeService() {\r\n\t\tif (!this.routeService_) {\r\n\t\t\tthis.routeService_ = this.injector.get(RouteService);\r\n\t\t}\r\n\t\treturn this.routeService;\r\n\t}\r\n\r\n\tconstructor(\r\n\t\tprivate injector: Injector,\r\n\t\tprivate statusCodeService: HttpStatusCodeService,\r\n\t) {\r\n\t\tthis.loggerErrorStrategy_ = this.config.loggerErrorStrategy || LoggerErrorStrategy.Server;\r\n\t}\r\n\r\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\t\t// injecting request\r\n\t\t// parsing response\r\n\t\treturn next.handle(request).pipe(\r\n\t\t\ttap((response: HttpEvent<any>) => {\r\n\t\t\t\tthis.logger.httpError = null;\r\n\t\t\t\t// this.logger.log(response);\r\n\t\t\t\tif (response instanceof HttpResponse) {\r\n\t\t\t\t\t// console.log('response instanceof HttpResponse');\r\n\t\t\t\t\t// do stuff with response if you want\r\n\t\t\t\t\tif (response.status >= this.loggerErrorStrategy_) {\r\n\t\t\t\t\t\tthis.logger.http(response);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tcatchError((response: HttpResponseBase) => {\r\n\t\t\t\t// console.warn('HttpResponseInterceptor', response);\r\n\t\t\t\tif (response instanceof HttpErrorResponse) {\r\n\t\t\t\t\t// this.statusCodeService.setStatusCode(response.status);\r\n\t\t\t\t\t// !!! add logErrorStrategy (100 INFORMATIONAL, 200 SUCCESS, 300 REDIRECT, 400 CLIENT, 500 SERVER, 999 NONE)\r\n\t\t\t\t\tif (response.status >= this.loggerErrorStrategy_) {\r\n\t\t\t\t\t\tthis.logger.http(response);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tswitch (response.status) {\r\n\t\t\t\t\t\tcase 401:\r\n\t\t\t\t\t\t\t// unauthorized\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 404:\r\n\t\t\t\t\t\t\t// not found\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 409:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 410:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tthis.logger.http(response);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t}\r\n\t\t\t\treturn throwError(response);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { isPlatformBrowser } from '@angular/common';\r\nimport { Component, ElementRef, Inject, Input, OnChanges, PLATFORM_ID, ViewChild, ViewEncapsulation } from '@angular/core';\r\n// require('json-formatter-js').default\r\nimport JSONFormatter from 'json-formatter-js';\r\nimport { isArray, isObject } from 'util';\r\n\r\n@Component({\r\n\tselector: 'json-formatter',\r\n\ttemplate: `<div #jsonFormatter></div>`,\r\n\tstyleUrls: ['./json-formatter.component.scss'],\r\n\tencapsulation: ViewEncapsulation.Emulated,\r\n})\r\nexport class JsonFormatterComponent implements OnChanges {\r\n\t@ViewChild(`jsonFormatter`) input: ElementRef;\r\n\r\n\t@Input() json: Array<any> | Object | any;\r\n\r\n\telementRef: ElementRef;\r\n\r\n\tconstructor(\r\n\t\t@Inject(PLATFORM_ID) private platformId: string,\r\n\t) { }\r\n\r\n\tngOnChanges() {\r\n\t\tif (isPlatformBrowser(this.platformId)) {\r\n\t\t\tif (!isObject(this.json) && !isArray(this.json)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// console.log('JsonFormatterComponent', this.json);\r\n\t\t\tif (this.elementRef) {\r\n\t\t\t\tthis.input.nativeElement.removeChild(this.elementRef.nativeElement);\r\n\t\t\t}\r\n\t\t\t// const JSONFormatter = require('json-formatter-js').default;\r\n\t\t\tconst formatter = new JSONFormatter(this.json);\r\n\t\t\tconst elementRef = formatter.render();\r\n\t\t\tthis.input.nativeElement.appendChild(elementRef);\r\n\t\t\tthis.elementRef = new ElementRef(elementRef);\r\n\t\t}\r\n\t}\r\n}\r\n","import { EventEmitter, Injectable, Injector } from '@angular/core';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\nimport { catchError, debounceTime, filter, map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../api/api.service';\r\nimport { Label } from './label';\r\n\r\nexport class LabelKey {\r\n\tid?: string;\r\n\tvalue?: string;\r\n\tdefaultValue?: string;\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class LabelService<T extends Label> extends ApiService<T> {\r\n\r\n\tget collection(): string {\r\n\t\treturn '/api/label';\r\n\t}\r\n\r\n\tprivate keys: { [key: string]: LabelKey; } = {};\r\n\tprivate values$: BehaviorSubject<{ [key: string]: string; }> = new BehaviorSubject({});\r\n\tprivate emitter$: EventEmitter<any> = new EventEmitter();\r\n\r\n\tpublic missingHandler?: Function;\r\n\r\n\tconstructor(\r\n\t\tprotected injector: Injector,\r\n\t) {\r\n\t\tsuper(injector);\r\n\t}\r\n\r\n\ttransform(key: string, defaultValue?: string, params?: any): string | undefined {\r\n\t\tconst values = this.values$.getValue();\r\n\t\tif (values.hasOwnProperty(key)) {\r\n\t\t\treturn this.parseLabel(values[key], params);\r\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\r\n\t\t\tvalues[key] = null;\r\n\t\t\tObject.defineProperty(this.keys, key, {\r\n\t\t\t\tvalue: { id: key, defaultValue: defaultValue },\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\twritable: false,\r\n\t\t\t});\r\n\t\t\tthis.emitter$.emit();\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\ttransform$(key: string, defaultValue?: string, params?: any): Observable<string | undefined> {\r\n\t\tconst values = this.values$.getValue();\r\n\t\tif (values.hasOwnProperty(key)) {\r\n\t\t\treturn of(this.parseLabel(values[key], params));\r\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\r\n\t\t\tvalues[key] = null;\r\n\t\t\tObject.defineProperty(this.keys, key, {\r\n\t\t\t\tvalue: { id: key, defaultValue: defaultValue },\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\twritable: false,\r\n\t\t\t});\r\n\t\t\tthis.emitter$.emit();\r\n\t\t}\r\n\t\treturn this.values$.pipe(\r\n\t\t\tmap(values => this.parseLabel(values[key], params))\r\n\t\t);\r\n\t}\r\n\r\n\tobserve$(): Observable<{ [key: string]: string; }> {\r\n\t\treturn this.emitter$.pipe(\r\n\t\t\tdebounceTime(1),\r\n\t\t\tswitchMap(x => this.collect$()),\r\n\t\t\tfilter(x => x !== null),\r\n\t\t);\r\n\t}\r\n\r\n\tcollect$(): Observable<{ [key: string]: string; }> {\r\n\t\tif (Object.keys(this.keys).length) {\r\n\t\t\tconst keys = Object.keys(this.keys).map(x => this.keys[x]);\r\n\t\t\tthis.keys = {};\r\n\t\t\treturn this.statePost(keys).pipe(\r\n\t\t\t\tmap((labels: LabelKey[]) => {\r\n\t\t\t\t\treturn labels.reduce((values, x) => {\r\n\t\t\t\t\t\tvalues[x.id] = this.getLabel(x);\r\n\t\t\t\t\t\treturn values;\r\n\t\t\t\t\t}, {});\r\n\t\t\t\t}),\r\n\t\t\t\ttap((labels: { [key: string]: string; }) => {\r\n\t\t\t\t\tconst values = this.values$.getValue();\r\n\t\t\t\t\tObject.assign(values, labels);\r\n\t\t\t\t\tthis.values$.next(values);\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError(error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\tconst labels = keys.reduce((values, x) => {\r\n\t\t\t\t\t\tvalues[x.id] = this.getLabel(x);\r\n\t\t\t\t\t\treturn values;\r\n\t\t\t\t\t}, {});\r\n\t\t\t\t\tconst values = this.values$.getValue();\r\n\t\t\t\t\tObject.assign(values, labels);\r\n\t\t\t\t\t// return this.values$.next(values);\r\n\t\t\t\t\treturn of(null);\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic parseLabel(value: string, params: any): string {\r\n\t\tif (value && params) {\r\n\t\t\tconst TEMPLATE_REGEXP: RegExp = /@([^{}\\s]*)/g;\r\n\t\t\treturn value.replace(TEMPLATE_REGEXP, (text: string, key: string) => {\r\n\t\t\t\tconst replacer: string = params[key] as string;\r\n\t\t\t\treturn typeof replacer !== 'undefined' ? replacer : text;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getLabel(label: LabelKey): string | undefined {\r\n\t\treturn label.value || label.defaultValue || this.getMissingLabel(label);\r\n\t}\r\n\r\n\tprivate getMissingLabel(label: LabelKey): string | undefined {\r\n\t\tif (typeof this.missingHandler === 'function') {\r\n\t\t\treturn this.missingHandler(label);\r\n\t\t}\r\n\t\treturn label.id;\r\n\t}\r\n\r\n}\r\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DisposableComponent } from '../disposable/disposable.component';\r\nimport { Label } from './label';\r\nimport { LabelService } from './label.service';\r\n\r\n@Directive({\r\n\tselector: '[label]'\r\n})\r\nexport class LabelDirective extends DisposableComponent implements OnInit {\r\n\r\n\t// key: string;\r\n\t// innerHTML: string;\r\n\t@Input() label: string;\r\n\t@Input() labelParams: any;\r\n\r\n\tconstructor(\r\n\t\tprivate element: ElementRef,\r\n\t\tprivate labelService: LabelService<Label>,\r\n\t) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tthis.labelService.transform$(this.label, this.element.nativeElement.innerHTML, this.labelParams).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe)\r\n\t\t).subscribe(label => {\r\n\t\t\tthis.element.nativeElement.innerHTML = label;\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { Label } from './label';\r\nimport { LabelService } from './label.service';\r\n\r\n@Pipe({\r\n\tname: 'label',\r\n\tpure: false\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class LabelPipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate labelService: LabelService<Label>,\r\n\t) { }\r\n\r\n\ttransform(key: string, defaultValue?: string, params?: any): string | undefined {\r\n\t\treturn this.labelService.transform(key, defaultValue, params);\r\n\t}\r\n\r\n}\r\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { Logger } from './logger.service';\r\n\r\n@Component({\r\n\tselector: 'core-logger',\r\n\ttemplateUrl: './logger.component.html',\r\n\tstyleUrls: ['./logger.component.scss'],\r\n\tencapsulation: ViewEncapsulation.Emulated,\r\n})\r\nexport class LoggerComponent implements OnInit {\r\n\tconstructor(public logger: Logger) { }\r\n\r\n\tngOnInit() {\r\n\t}\r\n}\r\n","\r\nimport { Component, Input } from '@angular/core';\r\nimport { DisposableComponent } from '../disposable/disposable.component';\r\nimport { Outlet } from './outlet';\r\n\r\n@Component({\r\n\tselector: 'outlet-content-component',\r\n\ttemplate: `<div class=\"outlet\">Outlet not found!</div>`,\r\n})\r\nexport class OutletDefaultComponent extends DisposableComponent {\r\n\t@Input() outlet: Outlet;\r\n}\r\n","\r\nimport { Component, Input } from '@angular/core';\r\nimport { DisposableComponent } from '../disposable/disposable.component';\r\nimport { Outlet } from './outlet';\r\n\r\n@Component({\r\n\tselector: 'outlet-repeater-component',\r\n\ttemplate: `<ng-container *ngFor=\"let outlet of outlets\"><outlet-component [outlet]=\"outlet\"></outlet-component></ng-container>`,\r\n})\r\nexport class OutletRepeaterComponent extends DisposableComponent {\r\n\t@Input() outlets: Outlet[];\r\n}\r\n","import { InjectionToken, Type } from '@angular/core';\r\nimport { OutletDefaultComponent } from './outlet-default.component';\r\n\r\nexport interface OutletInit {\r\n\tOutletInit(): void;\r\n}\r\n\r\nexport interface Outlets { [key: string]: Type<OutletDefaultComponent>; }\r\n\r\nexport const OUTLETS = new InjectionToken<Outlets>('core.outlets');\r\n\r\nexport class Outlet {\r\n\t// id: number | string;\r\n\tname?: string;\r\n\tcomponent?: number | string;\r\n}\r\n","import { Inject, Injectable, Type } from '@angular/core';\r\nimport { Outlet, OUTLETS, Outlets } from './outlet';\r\nimport { OutletDefaultComponent } from './outlet-default.component';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class OutletResolverService {\r\n\r\n\tpublic outlets: Outlets;\r\n\r\n\tconstructor(\r\n\t\t@Inject(OUTLETS) outlets: Outlets,\r\n\t) {\r\n\t\toutlets = outlets || {};\r\n\t}\r\n\r\n\tresolve(outlet: Outlet): Type<OutletDefaultComponent> {\r\n\t\tlet component: Type<OutletDefaultComponent>;\r\n\t\tif (outlet) {\r\n\t\t\tcomponent = this.outlets[outlet.component] || OutletDefaultComponent;\r\n\t\t} else {\r\n\t\t\tcomponent = OutletDefaultComponent;\r\n\t\t}\r\n\t\treturn component;\r\n\t}\r\n\r\n}\r\n","import { Component, ComponentFactory, ComponentFactoryResolver, ComponentRef, Input, OnDestroy, OnInit, Type, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { DisposableComponent } from '../disposable/disposable.component';\r\nimport { Outlet } from './outlet';\r\nimport { OutletDefaultComponent } from './outlet-default.component';\r\nimport { OutletResolverService } from './outlet-resolver.service';\r\n\r\n@Component({\r\n\tselector: 'outlet-component',\r\n\ttemplate: '',\r\n})\r\nexport class OutletComponent extends DisposableComponent implements OnInit, OnDestroy {\r\n\r\n\t@Input() outlet: Outlet;\r\n\r\n\t@ViewChild('outlet', { read: ViewContainerRef }) viewContainerRef: ViewContainerRef;\r\n\tprivate componentRef: ComponentRef<DisposableComponent>;\r\n\r\n\tconstructor(\r\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\r\n\t\tprivate outletResolverService: OutletResolverService,\r\n\t) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tconst component: Type<OutletDefaultComponent> = this.outletResolverService.resolve(this.outlet);\r\n\t\tconst factory: ComponentFactory<OutletDefaultComponent> = this.componentFactoryResolver.resolveComponentFactory(component);\r\n\t\tthis.viewContainerRef.clear();\r\n\t\tconst componentRef = this.viewContainerRef.createComponent(factory);\r\n\t\tconst instance = componentRef.instance;\r\n\t\tinstance.outlet = this.outlet;\r\n\t\tif (typeof instance['OutletInit'] === 'function') {\r\n\t\t\tinstance['OutletInit']();\r\n\t\t}\r\n\t\tthis.componentRef = componentRef;\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\tthis.componentRef.destroy();\r\n\t}\r\n\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { CoreService } from '../config/core.service';\r\nimport { SegmentPipe } from './segment.pipe';\r\n\r\n@Pipe({\r\n\tname: 'asset',\r\n\t// pure: false\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class AssetPipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate coreService: CoreService,\r\n\t\tprivate segment: SegmentPipe\r\n\t) { }\r\n\r\n\ttransform(data: any[] | string): string {\r\n\t\tif (typeof data === 'string' && (data.indexOf('http') === 0 || data.indexOf('/media/') === 0)) {\r\n\t\t\treturn data;\r\n\t\t} else {\r\n\t\t\tconst segments = this.segment.transform(data);\r\n\t\t\tsegments.unshift(this.coreService.options.assets);\r\n\t\t\treturn segments.join('/');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { ChangeDetectorRef, OnDestroy, Pipe, PipeTransform, WrappedValue } from '@angular/core';\r\nimport { Observable, SubscriptionLike } from 'rxjs';\r\n\r\n@Pipe({\r\n\tname: 'customAsync',\r\n\tpure: false\r\n})\r\nexport class CustomAsyncPipe implements OnDestroy, PipeTransform {\r\n\r\n\tprivate subject: Observable<any> | null = null;\r\n\tprivate subscription: SubscriptionLike | null = null;\r\n\tprivate value: any = null;\r\n\tprivate cachedValue: any = null;\r\n\r\n\tconstructor(\r\n\t\tprivate changeDetector: ChangeDetectorRef\r\n\t) { }\r\n\r\n\ttransform(subject: Observable<any> | null | undefined): any {\r\n\t\treturn this.observableToValue(subject);\r\n\t}\r\n\r\n\tprivate observableToValue(subject: Observable<any> | null | undefined): any {\r\n\t\tif (subject !== this.subject) {\r\n\t\t\tif (this.subject) {\r\n\t\t\t\tthis.dispose();\r\n\t\t\t}\r\n\t\t\tif (subject) {\r\n\t\t\t\tthis.subject = subject;\r\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\r\n\t\t\t\t\t// console.log('CustomAsyncPipe.A', value);\r\n\t\t\t\t\tthis.value = value;\r\n\t\t\t\t\tthis.changeDetector.markForCheck(); // mark pipe as dirty\r\n\t\t\t\t});\r\n\t\t\t\tthis.cachedValue = this.value; // ???\r\n\t\t\t\treturn this.value;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log('CustomAsyncPipe.B', this.value);\r\n\t\tif (this.cachedValue !== this.value) {\r\n\t\t\tthis.cachedValue = this.value;\r\n\t\t\treturn WrappedValue.wrap(this.value); // notify that value has changed\r\n\t\t}\r\n\t\treturn this.cachedValue; // return cachedValue\r\n\t}\r\n\r\n\tpublic dispose(): void {\r\n\t\tif (this.subscription) {\r\n\t\t\tthis.subscription.unsubscribe();\r\n\t\t}\r\n\t\tthis.value = null;\r\n\t\tthis.cachedValue = null;\r\n\t\tthis.subscription = null;\r\n\t\tthis.subject = null;\r\n\t}\r\n\r\n\tngOnDestroy(): void {\r\n\t\tthis.dispose();\r\n\t}\r\n\r\n\tprivate _observableToValue(subject: Observable<any> | null | undefined): any {\r\n\t\tif (!this.subject) {\r\n\t\t\tif (subject) {\r\n\t\t\t\tthis.subject = subject;\r\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\r\n\t\t\t\t\tthis.value = value;\r\n\t\t\t\t\tthis.changeDetector.markForCheck(); // value has changed\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.cachedValue = this.value;\r\n\t\t\treturn this.value;\r\n\t\t}\r\n\t\tif (subject !== this.subject) {\r\n\t\t\tthis.dispose();\r\n\t\t\treturn this.transform(subject as any);\r\n\t\t}\r\n\t\tif (this.value === this.cachedValue) {\r\n\t\t\treturn this.cachedValue;\r\n\t\t}\r\n\t\tthis.cachedValue = this.value;\r\n\t\treturn WrappedValue.wrap(this.value); // value has changed\r\n\t}\r\n\r\n}\r\n","\r\nexport enum ImageType {\r\n\tDefault = 1,\r\n\tGallery = 2,\r\n\tShare = 3,\r\n}\r\n\r\nexport class Image {\r\n\tid: number | string;\r\n\turl: string;\r\n\ttitle?: string;\r\n\tdescription?: string;\r\n\tfileName?: string;\r\n\ttype?: ImageType;\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { Image, ImageType } from '../models/image';\r\n\r\n@Pipe({\r\n\tname: 'imageUrl',\r\n\t// pure: false\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class ImageUrlPipe implements PipeTransform {\r\n\r\n\ttransform(images: Image[], type?: string, queryString?: string): string {\r\n\t\ttype = type || 'Default';\r\n\t\tqueryString = queryString ? `?${queryString}` : '';\r\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\r\n\t\tlet image: Image = null;\r\n\t\tif (images && images.length) {\r\n\t\t\timage = images.find(i => i.type === imageType) || images[0];\r\n\t\t}\r\n\t\treturn image ? (image.url + queryString).replace(/ /g, '%20') : null;\r\n\t}\r\n\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { Image, ImageType } from '../models/image';\r\n\r\n@Pipe({\r\n\tname: 'image',\r\n\t// pure: false\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class ImagePipe implements PipeTransform {\r\n\r\n\ttransform(images: Image[], type?: string, queryString?: string): Image {\r\n\t\ttype = type || 'Default';\r\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\r\n\t\treturn (images && images.length) ? images.find(i => i.type === imageType) || null : null; // images[0]\r\n\t}\r\n\r\n\t// 21 marzo 2019\r\n\ttransform__(images: Image[], type?: string, queryString?: string): string {\r\n\t\ttype = type || 'Default';\r\n\t\tqueryString = queryString ? `?${queryString}` : '';\r\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\r\n\t\tlet image: Image = null;\r\n\t\tif (images && images.length) {\r\n\t\t\timage = images.find(i => i.type === imageType); // || images[0];\r\n\t\t\tif (!image && imageType !== ImageType.Default) {\r\n\t\t\t\timage = images.find(i => i.type === ImageType.Default);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn image ? (image.url + queryString).replace(/ /g, '%20') : null;\r\n\t}\r\n\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { CoreService } from '../config/core.service';\r\nimport { SegmentPipe } from './segment.pipe';\r\n\r\n@Pipe({\r\n\tname: 'public',\r\n\t// pure: false\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class PublicPipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate coreService: CoreService,\r\n\t\tprivate segment: SegmentPipe\r\n\t) { }\r\n\r\n\ttransform(data: any[] | string): string {\r\n\t\tconst segments = this.segment.transform(data);\r\n\t\tsegments.unshift(this.coreService.options.public);\r\n\t\treturn segments.join('/');\r\n\t}\r\n\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { RouteService } from './route.service';\r\n\r\n@Pipe({\r\n\tname: 'route',\r\n\tpure: false\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class RoutePipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate routeService: RouteService,\r\n\t) { }\r\n\r\n\ttransform(data: any[] | string): string[] {\r\n\t\treturn this.routeService.toRoute(data);\r\n\t}\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Entity } from './entity';\r\nimport { IdentityService } from './identity.service';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class EntityService<T extends Entity> extends IdentityService<T> {\r\n\r\n\tget collection(): string {\r\n\t\treturn '/api/entity';\r\n\t}\r\n\r\n\tgetDetailByName(name: string): Observable<any> {\r\n\t\tif (!name.trim()) {\r\n\t\t\treturn of([]);\r\n\t\t}\r\n\t\treturn this.get({ name });\r\n\t}\r\n\r\n}\r\n","import { EventEmitter, Injectable, Injector } from '@angular/core';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\nimport { catchError, debounceTime, filter, first, map, switchMap, tap } from 'rxjs/operators';\r\nimport { DocumentIndex } from '../models/document';\r\nimport { EntityService } from '../models/entity.service';\r\n\r\nexport class SlugKey {\r\n\tid?: number;\r\n\tmnemonic?: string;\r\n\tslug?: string;\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class SlugService extends EntityService<DocumentIndex> {\r\n\r\n\tget collection(): string {\r\n\t\treturn `/api/slug`;\r\n\t}\r\n\r\n\tprivate keys: { [key: string]: SlugKey; } = {};\r\n\tprivate values$: BehaviorSubject<{ [key: string]: string; }> = new BehaviorSubject({});\r\n\tprivate emitter$: EventEmitter<any> = new EventEmitter();\r\n\r\n\tpublic missingHandler?: Function;\r\n\r\n\tconstructor(\r\n\t\tprotected injector: Injector,\r\n\t) {\r\n\t\tsuper(injector);\r\n\t}\r\n\r\n\ttransform(key: string): string | undefined {\r\n\t\tconst values = this.values$.getValue();\r\n\t\tif (values.hasOwnProperty(key)) {\r\n\t\t\treturn values[key];\r\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\r\n\t\t\tvalues[key] = null;\r\n\t\t\tObject.defineProperty(this.keys, key, {\r\n\t\t\t\tvalue: { mnemonic: key },\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\twritable: false,\r\n\t\t\t});\r\n\t\t\tthis.emitter$.emit();\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\ttransform$(key: string): Observable<string | undefined> {\r\n\t\tconst values = this.values$.getValue();\r\n\t\tif (values.hasOwnProperty(key)) {\r\n\t\t\treturn of(values[key]);\r\n\t\t} else if (!this.keys.hasOwnProperty(key)) {\r\n\t\t\tObject.defineProperty(this.keys, key, {\r\n\t\t\t\tvalue: { mnemonic: key },\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\twritable: false,\r\n\t\t\t});\r\n\t\t\tthis.emitter$.emit();\r\n\t\t}\r\n\t\treturn this.values$.pipe(\r\n\t\t\tmap(values => values[key])\r\n\t\t);\r\n\t}\r\n\r\n\tobserve$(): Observable<{ [key: string]: string; }> {\r\n\t\treturn this.emitter$.pipe(\r\n\t\t\tdebounceTime(1),\r\n\t\t\tswitchMap(x => this.collect$()),\r\n\t\t\tfilter(x => x !== null),\r\n\t\t\tfirst(), //\r\n\t\t);\r\n\t}\r\n\r\n\tcollect$(): Observable<{ [key: string]: string; }> {\r\n\t\tif (Object.keys(this.keys).length) {\r\n\t\t\tconst keys = Object.keys(this.keys).map(x => this.keys[x]);\r\n\t\t\tthis.keys = {};\r\n\t\t\treturn this.statePost(keys).pipe(\r\n\t\t\t\tmap((items: DocumentIndex[]) => {\r\n\t\t\t\t\treturn items.reduce((values, x) => {\r\n\t\t\t\t\t\tvalues[x.mnemonic] = [x.slug];\r\n\t\t\t\t\t\treturn values;\r\n\t\t\t\t\t}, {});\r\n\t\t\t\t}),\r\n\t\t\t\ttap((slugs: { [key: string]: string; }) => {\r\n\t\t\t\t\tconst values = this.values$.getValue();\r\n\t\t\t\t\tObject.assign(values, slugs);\r\n\t\t\t\t\tthis.values$.next(values);\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError(error => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\tconst labels = keys.reduce((values, x) => {\r\n\t\t\t\t\t\tvalues[x.mnemonic] = null;\r\n\t\t\t\t\t\treturn values;\r\n\t\t\t\t\t}, {});\r\n\t\t\t\t\tconst values = this.values$.getValue();\r\n\t\t\t\t\tObject.assign(values, labels);\r\n\t\t\t\t\treturn of(null);\r\n\t\t\t\t}),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { RoutePipe } from '../route/route.pipe';\r\nimport { SlugService } from './slug.service';\r\n\r\n@Pipe({\r\n\tname: 'slug',\r\n\tpure: false\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class SlugPipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate slugService: SlugService,\r\n\t\tprivate routePipe: RoutePipe,\r\n\t) { }\r\n\r\n\ttransform(key: string, segments?: string[]): string[] {\r\n\t\tconst slug = this.slugService.transform(key);\r\n\t\tif (slug) {\r\n\t\t\tlet slugs = this.routePipe.transform(slug);\r\n\t\t\tif (slugs && segments) {\r\n\t\t\t\tslugs = slugs.concat(segments);\r\n\t\t\t}\r\n\t\t\treturn slugs;\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DisposableComponent } from '../disposable/disposable.component';\r\nimport { Translate } from './translate';\r\nimport { TranslateService } from './translate.service';\r\n\r\n@Directive({\r\n\tselector: '[translate]'\r\n})\r\nexport class TranslateDirective extends DisposableComponent implements OnInit {\r\n\r\n\tkey: string;\r\n\tinnerHTML: string;\r\n\r\n\t/*\r\n\t@Input() set translate(key: string) {\r\n\t\t// console.log('TranslateDirective.translate', this.key, this.translateParams, this.template, this.view);\r\n\t}\r\n\t*/\r\n\t@Input() translate: string;\r\n\t@Input() translateParams: any;\r\n\r\n\tconstructor(\r\n\t\tprivate element: ElementRef,\r\n\t\tprivate translateService: TranslateService<Translate>,\r\n\t) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\t// console.log('TranslateDirective.ngOnInit', this.element.nativeElement.innerHTML);\r\n\t\tthis.translateService.getTranslate(this.translate, this.element.nativeElement.innerHTML, this.translateParams).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe)\r\n\t\t).subscribe(translate => {\r\n\t\t\tthis.element.nativeElement.innerHTML = translate;\r\n\t\t\t// console.log('TranslateDirective.ngOnInit', translate);\r\n\t\t});\r\n\t\t// console.log('TranslateDirective.ngOnInit', this.translate, this.translateParams, this.template, this.view);\r\n\t}\r\n}\r\n","import { ChangeDetectorRef, Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { Translate } from './translate';\r\nimport { TranslateService } from './translate.service';\r\n\r\n@Pipe({\r\n\tname: 'translate',\r\n\tpure: false,\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class TranslatePipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate ref: ChangeDetectorRef,\r\n\t\tprotected translateService: TranslateService<Translate>\r\n\t) {\r\n\t\tthis.translateService.events.subscribe(\r\n\t\t\tx => this.ref.markForCheck()\r\n\t\t);\r\n\t}\r\n\r\n\tpublic transform(key: string, text?: string, params?: any): string {\r\n\t\t// console.log(key, params);\r\n\t\tconst label = this.translateService.getTranslate(key, text, params);\r\n\t\t// console.log('label', label, this.translateService.cache);\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n\tname: 'safeStyle'\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class SafeStylePipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate sanitizer: DomSanitizer\r\n\t) { }\r\n\r\n\ttransform(style: string) {\r\n\t\treturn this.sanitizer.bypassSecurityTrustStyle(style);\r\n\t}\r\n}\r\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n\tname: 'safeUrl'\r\n})\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class SafeUrlPipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate sanitizer: DomSanitizer\r\n\t) { }\r\n\r\n\ttransform(url: string) {\r\n\t\treturn this.sanitizer.bypassSecurityTrustResourceUrl(url);\r\n\t}\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n\tname: 'safeHtml'\r\n})\r\nexport class TrustPipe implements PipeTransform {\r\n\r\n\tconstructor(\r\n\t\tprivate sanitizer: DomSanitizer\r\n\t) { }\r\n\r\n\ttransform(text: string) {\r\n\t\treturn this.sanitizer.bypassSecurityTrustHtml(text);\r\n\t\t// return this.sanitizer.bypassSecurityTrustStyle(text);\r\n\t\t// return this.sanitizer.bypassSecurityTrustXxx(text); - see docs\r\n\t}\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { ModuleWithProviders, NgModule, NgModuleFactoryLoader, Optional, SkipSelf, SystemJsNgModuleLoader } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Bundles, BUNDLES } from './bundle/bundle';\r\nimport { BundleDirective } from './bundle/bundle.directive';\r\nimport { CoreConfig, CORE_CONFIG } from './config/core.config';\r\nimport { DefaultContentDirective } from './content/default-content.directive';\r\nimport { CoreModuleComponent } from './core-module.component';\r\nimport { DisposableComponent } from './disposable/disposable.component';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HttpResponseInterceptor } from './http/http-response.interceptor';\r\nimport { JsonFormatterComponent } from './json-formatter/json-formatter.component';\r\nimport { LabelDirective } from './label/label.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { LoggerComponent } from './logger/logger.component';\r\nimport { OutletDefaultComponent } from './outlet/outlet-default.component';\r\nimport { OutletRepeaterComponent } from './outlet/outlet-repeater.component';\r\nimport { OutletComponent } from './outlet/outlet.component';\r\nimport { AssetPipe } from './pipes/asset.pipe';\r\nimport { CustomAsyncPipe } from './pipes/custom-async.pipe';\r\nimport { ImageUrlPipe } from './pipes/image-url.pipe';\r\nimport { ImagePipe } from './pipes/image.pipe';\r\nimport { PublicPipe } from './pipes/public.pipe';\r\nimport { SegmentPipe } from './pipes/segment.pipe';\r\nimport { RoutePipe } from './route/route.pipe';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { TranslateDirective } from './translate/translate.directive';\r\nimport { TranslatePipe } from './translate/translate.pipe';\r\nimport { SafeStylePipe } from './trust/safe-style.pipe';\r\nimport { SafeUrlPipe } from './trust/safe-url.pipe';\r\nimport { TrustPipe } from './trust/trust.pipe';\r\n\r\nconst components = [\r\n\tCoreModuleComponent,\r\n\tDisposableComponent,\r\n\tJsonFormatterComponent,\r\n\tLoggerComponent,\r\n\tOutletComponent,\r\n\tOutletDefaultComponent,\r\n\tOutletRepeaterComponent,\r\n];\r\n\r\nconst directives = [\r\n\tBundleDirective,\r\n\tDefaultContentDirective,\r\n\tLabelDirective,\r\n\tTranslateDirective,\r\n];\r\n\r\nconst pipes = [\r\n\tAssetPipe,\r\n\tCustomAsyncPipe,\r\n\tHighlightPipe,\r\n\tImagePipe,\r\n\tImageUrlPipe,\r\n\tLabelPipe,\r\n\tPublicPipe,\r\n\tRoutePipe,\r\n\tSafeStylePipe,\r\n\tSafeUrlPipe,\r\n\tSegmentPipe,\r\n\tSlugPipe,\r\n\tTranslatePipe,\r\n\tTrustPipe,\r\n];\r\n\r\nconst validators = [];\r\n\r\nconst guards = [];\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\tCommonModule,\r\n\t\tHttpClientModule,\r\n\t\tFormsModule,\r\n\t\tReactiveFormsModule,\r\n\t],\r\n\tproviders: [\r\n\t\t{ provide: HTTP_INTERCEPTORS, useClass: HttpResponseInterceptor, multi: true },\r\n\t\t{ provide: NgModuleFactoryLoader, useClass: SystemJsNgModuleLoader },\r\n\t\t...validators,\r\n\t],\r\n\tdeclarations: [\r\n\t\t...components,\r\n\t\t...directives,\r\n\t\t...pipes,\r\n\t\t...validators,\r\n\t],\r\n\tentryComponents: [\r\n\t\t...components\r\n\t],\r\n\texports: [\r\n\t\t...components,\r\n\t\t...directives,\r\n\t\t...pipes,\r\n\t\t...validators,\r\n\t],\r\n})\r\n\r\nexport class CoreModule {\r\n\r\n\tconstructor(\r\n\t\t@Optional() @SkipSelf() parentModule: CoreModule\r\n\t) {\r\n\t\t/*\r\n\t\tif (parentModule) {\r\n\t\t\tthrow new Error('CoreModule is already loaded. Import it in the AppModule only');\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\tpublic static forRoot(\r\n\t\tbundles?: Bundles,\r\n\t\tconfig?: CoreConfig,\r\n\t): ModuleWithProviders {\r\n\t\treturn {\r\n\t\t\tngModule: CoreModule,\r\n\t\t\tproviders: [{\r\n\t\t\t\tprovide: CORE_CONFIG, useValue: config\r\n\t\t\t}, {\r\n\t\t\t\tprovide: BUNDLES, useValue: bundles || {}\r\n\t\t\t}]\r\n\t\t};\r\n\t}\r\n\r\n}\r\n","import { Entity } from '../models/entity';\r\n\r\nexport class Label implements Entity {\r\n\tid: string;\r\n\tvalue?: string;\r\n\tdefaultValue?: string;\r\n}\r\n","import { Entity } from './entity';\r\n\r\nexport class Document implements Entity {\r\n\tid: number | string;\r\n\tname?: string;\r\n\ttitle?: string;\r\n\tdescription?: string;\r\n\tslug?: string;\r\n}\r\n\r\nexport class DocumentIndex {\r\n\tid: number | string;\r\n\tmnemonic?: string;\r\n\tslug?: string;\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { Document } from './document'; // !!! Document class conflict?\r\nimport { EntityService } from './entity.service';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class DocumentService<T extends Document> extends EntityService<T> {\r\n\r\n\tget collection(): string {\r\n\t\treturn '/api/document';\r\n\t}\r\n\r\n\tgetDetailBySlug(slug: string): Observable<T> {\r\n\t\tif (!slug.trim()) {\r\n\t\t\t// if not search term, return empty identity array.\r\n\t\t\treturn of();\r\n\t\t}\r\n\t\treturn this.get({ slug }).pipe(\r\n\t\t\t// tap(x => this.logger.log(`found identities matching \"${slug}\"`)),\r\n\t\t\tswitchMap(x => of(x[0]))\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Identity } from './identity';\r\n\r\nexport class Entity implements Identity {\r\n\tid: number | string;\r\n\tname?: string;\r\n}\r\n","import { EventEmitter, Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\nexport class EventEntity {\r\n\ttype: string | number;\r\n\tdata?: any;\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class EventDispatcherService {\r\n\r\n\tprivate emitter: EventEmitter<EventEntity>;\r\n\r\n\tconstructor() {\r\n\t\tthis.emitter = new EventEmitter<EventEntity>();\r\n\t}\r\n\r\n\temit(event: EventEntity): void {\r\n\t\treturn this.emitter.emit(event);\r\n\t}\r\n\r\n\tobserve(): Observable<EventEntity> {\r\n\t\treturn this.emitter.pipe(\r\n\t\t\ttap((event: EventEntity) => console.log('EventDispatcherService', event))\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","\r\nexport class Feature {\r\n\tid: number | string;\r\n\tslug?: string;\r\n\ttitle?: string;\r\n\tabstract?: string;\r\n\ttype?: number;\r\n\treadmore?: boolean = false;\r\n}\r\n","\r\nexport class Identity {\r\n\tid: number | string;\r\n}\r\n","import { Document } from './document';\r\nimport { Image } from './image';\r\n\r\nexport class MenuItem implements Document {\r\n\tid: number | string;\r\n\tname?: string;\r\n\ttitle?: string;\r\n\tabstract?: string;\r\n\tslug?: string;\r\n\turl?: string;\r\n\ttype?: number | string;\r\n\timages?: Image[];\r\n\titems?: MenuItem[];\r\n\r\n\tconstructor(options?: any) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t\tif (options.items) {\r\n\t\t\t\tthis.items = options.items.map(item => new MenuItem(item));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { EntityService } from './entity.service';\r\nimport { MenuItem } from './menu-item';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class MenuService extends EntityService<MenuItem> {\r\n\r\n\tget collection(): string {\r\n\t\treturn '/api/menu';\r\n\t}\r\n\r\n\tconstructor(\r\n\t\tprotected injector: Injector,\r\n\t) {\r\n\t\tsuper(injector);\r\n\t}\r\n\r\n}\r\n","\r\nexport class Taxonomy {\r\n\tid: number | string;\r\n\tname?: string;\r\n\ttype?: number;\r\n}\r\n","import { isPlatformBrowser } from '@angular/common';\r\nimport { Inject, Injectable, NgZone, PLATFORM_ID } from '@angular/core';\r\nimport { from, fromEvent, Observable, of } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n// export class OnceEvent extends Event { }\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class OnceService {\r\n\r\n\tprivate uid: number = 0;\r\n\tprivate paths: string[] = [];\r\n\r\n\tconstructor(\r\n\t\t@Inject(PLATFORM_ID) private platformId: string,\r\n\t\tprivate zone: NgZone,\r\n\t) { }\r\n\r\n\tscript(url: string, callback?: string | boolean): Observable<Event> {\r\n\t\tif (isPlatformBrowser(this.platformId)) {\r\n\t\t\t// !!! this.zone.runOutsideAngular(() => {\r\n\t\t\tif (this.paths.indexOf(url) === -1) {\r\n\t\t\t\tthis.paths.push(url);\r\n\t\t\t\tlet callbackName: string;\r\n\t\t\t\tif (callback === true) {\r\n\t\t\t\t\tcallbackName = 'OnceCallback' + (++this.uid);\r\n\t\t\t\t\turl = url.split('{{callback}}').join(callbackName);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallbackName = callback as string;\r\n\t\t\t\t}\r\n\t\t\t\tlet callback$: Observable<any>;\r\n\t\t\t\tconst element = document.createElement('script');\r\n\t\t\t\telement.type = 'text/javascript';\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback$ = from(\r\n\t\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\twindow[callbackName] = function (data) {\r\n\t\t\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.async = true;\r\n\t\t\t\t\tcallback$ = fromEvent(element, 'load').pipe(\r\n\t\t\t\t\t\tmap(x => x as Event)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tconst scripts = document.getElementsByTagName('script');\r\n\t\t\t\tif (scripts.length) {\r\n\t\t\t\t\tconst script = scripts[scripts.length - 1];\r\n\t\t\t\t\tscript.parentNode.insertBefore(element, script.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t\telement.src = url;\r\n\t\t\t\treturn callback$;\r\n\t\t\t} else {\r\n\t\t\t\treturn of(new Event('loaded!'));\r\n\t\t\t}\r\n\t\t\t// });\r\n\t\t} else {\r\n\t\t\treturn of(null);\r\n\t\t}\r\n\t}\r\n}\r\n","import { Entity } from '../models/entity';\r\n\r\nexport class Translate implements Entity {\r\n\tid: number | string;\r\n\tname: string;\r\n\tlang: string;\r\n\tlabels?: any;\r\n}\r\n"],"names":["tslib_1.__extends","HttpErrorResponse","InjectionToken","Injectable","Inject","HttpHeaders","HttpClient","TransferState","PLATFORM_ID","tap","makeStateKey","isPlatformBrowser","of","isPlatformServer","Injector","Directive","ElementRef","ViewContainerRef","Renderer2","Input","Component","NgModuleFactoryLoader","Subject","Pipe","Location","EventEmitter","BehaviorSubject","filter","switchMap","map","distinctUntilChanged","NavigationStart","ActivatedRoute","Router","HttpResponse","catchError","throwError","isObject","isArray","ViewEncapsulation","ViewChild","debounceTime","takeUntil","ComponentFactoryResolver","WrappedValue","ChangeDetectorRef","first","DomSanitizer","NgModule","CommonModule","HttpClientModule","FormsModule","ReactiveFormsModule","HTTP_INTERCEPTORS","SystemJsNgModuleLoader","Optional","SkipSelf","from","fromEvent","NgZone"],"mappings":"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"}
