!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/common/http"),require("@angular/core"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/router"),require("json-formatter-js"),require("util")):"function"==typeof define&&define.amd?define("@designr/core",["exports","@angular/common","@angular/common/http","@angular/core","@angular/platform-browser","rxjs","rxjs/operators","@angular/forms","@angular/router","json-formatter-js","util"],t):t(((e=e||self).designr=e.designr||{},e.designr.core={}),e.ng.common,e.ng.common.http,e.ng.core,e.ng.platformBrowser,e.rxjs,e.rxjs.operators,e.ng.forms,e.ng.router,e.JSONFormatter,e.util)}(this,(function(e,t,n,r,o,i,a,s,u,c,p){"use strict";c=c&&c.hasOwnProperty("default")?c.default:c;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function f(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var h;function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}(h=e.AuthStrategy||(e.AuthStrategy={}))[h.Bearer=0]="Bearer",h[h.Cookie=1]="Cookie";var y,v=function(e,t){void 0===t&&(t=0),this.accessToken=e,this.expiresIn=t};(y=e.LoggerErrorStrategy||(e.LoggerErrorStrategy={}))[y.Informational=100]="Informational",y[y.Success=200]="Success",y[y.Redirect=300]="Redirect",y[y.Client=400]="Client",y[y.Server=500]="Server",y[y.None=999]="None";var m=function(t){function r(e){return t.call(this,{error:e instanceof n.HttpErrorResponse?e.error:e.statusText,headers:e.headers,status:e.status,statusText:e.statusText,url:e.url})||this}return f(r,t),Object.defineProperty(r.prototype,"statusType",{get:function(){var t=this;return Object.keys(e.LoggerErrorStrategy).reduce((function(n,r){return t.status>=e.LoggerErrorStrategy[r]&&(n=r.toLowerCase()),n}),null)},enumerable:!0,configurable:!0}),r}(n.HttpErrorResponse),b=function(e){e&&Object.assign(this,e)},j=function(t){this.assets="",this.authStrategy=e.AuthStrategy.Cookie,this.defaultLanguage="it",this.defaultMarket="it",this.loggerErrorStrategy=e.LoggerErrorStrategy.Server,this.languages=[{id:1,name:"Italiano",lang:"it"}],this.origin="",this.production=!1,this.public="",this.urlStrategy="",this.useLang=!1,this.useMarket=!1,t?(Object.assign(this,t),this.transition=new b(t.transition)):this.transition=new b},S=new r.InjectionToken("core.config"),I=function(){function e(e){e=e||{},this.options=new j(e)}return e.ɵfac=function(t){return new(t||e)(r["ɵɵinject"](S))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),w=function(){function e(e){this.coreService=e,this.logs=[]}return e.prototype.request=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.coreService.options.production){var n=e.join(", ");this.logs.push(n)}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.coreService.options.production){var n=e.join(", ");this.logs.push(n),console.log.apply(this,["%c%s","background: #1976d2; color: #fff; border-radius: 3px; padding: 4px 8px; margin-bottom: 4px;"].concat(e))}},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.coreService.options.production){var n=e.join(", ");this.logs.push(n),console.log.apply(this,["%c%s","background: #ff5500; color: #fff"].concat(e))}},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.coreService.options.production){var n=e.join(", ");this.logs.push(n),console.error.apply(console,e)}},e.prototype.http=function(e){this.httpError=new m(e),this.coreService.options.production||this.logs.push(this.httpError.message),console.warn("Logger.http.response",e.status,e.statusText,e.url)},e.prototype.clear=function(){this.httpError=null,this.logs=[]},e.ɵfac=function(t){return new(t||e)(r["ɵɵinject"](I))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),O=function(e){this.headers=new n.HttpHeaders({"Content-Type":"application/json"}),this.params=e},P=function(){function e(e){this.injector=e}return Object.defineProperty(e.prototype,"collection",{get:function(){return"/api"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger||(this._logger=this.injector.get(w)),this._logger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"http",{get:function(){return this._http||(this._http=this.injector.get(n.HttpClient)),this._http},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state||(this._state=this.injector.get(o.TransferState)),this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"platformId",{get:function(){return this._platformId||(this._platformId=this.injector.get(r.PLATFORM_ID)),this._platformId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=this.injector.get(I).options),this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin||(this._origin=this.config.origin),this._origin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){var e=this.origin,t=this.collection.toLowerCase();return 0===t.indexOf("http")&&(e=""),""+e+t},enumerable:!0,configurable:!0}),e.prototype.getUrl=function(e){return void 0===e&&(e=""),""+this.url+e},e.prototype.get=function(e,t){var n=this,r="string"==typeof e?e:"",o="object"==typeof e?e:t,i=this.getUrl(r),s=new O(o);return this.http.get(i,s).pipe(a.tap((function(e){return n.logger.request(i)})))},e.prototype.post=function(e,t,n){var r=this,o="string"==typeof e?e:"",i="object"==typeof e?e:t,s="object"==typeof t?t:n,u=this.getUrl(o),c=new O(s);return this.http.post(u,i,c).pipe(a.tap((function(e){return r.logger.request(u)})))},e.prototype.put=function(e,t,n){var r=this,o="string"==typeof e?e:"",i="object"==typeof e?e:t,s="object"==typeof t?t:n,u=this.getUrl(o),c=new O(s);return this.http.put(u,i,c).pipe(a.tap((function(e){return r.logger.request(u)})))},e.prototype.patch=function(e,t,n){var r=this,o="string"==typeof e?e:"",i="object"==typeof e?e:t,s="object"==typeof t?t:n,u=this.getUrl(o),c=new O(s);return this.http.patch(u,i,c).pipe(a.tap((function(e){return r.logger.request(u)})))},e.prototype.delete=function(e,t,n){var r=this,o="string"==typeof e?e:"",i="string"!=typeof e?e:t,s=i?"number"==typeof i?i:i.id:null,u="object"==typeof t?t:n,c=null!==s?this.getUrl(o+"/"+s):this.getUrl(o),p=new O(u);return this.http.delete(c,p).pipe(a.tap((function(e){return r.logger.request(c)})))},e.prototype.toCamelCase=function(e){var t,n,r,o,i=this;if(e instanceof Array)return e.map((function(e){return"object"==typeof e&&(e=i.toCamelCase(e)),e}));for(n in t={},e)e.hasOwnProperty(n)&&(r=(n.charAt(0).toLowerCase()+n.slice(1)||n).toString(),((o=e[n])instanceof Array||null!==o&&o.constructor===Object)&&(o=this.toCamelCase(o)),t[r]=o);return t},e.prototype.getStateKey=function(e,t){var n=function(e,t){return"number"==typeof t?e+=t.toString():"string"==typeof t?e+=t.substr(0,10):t&&"object"==typeof t&&(e+="_"+Object.keys(t).map((function(e){return e+"_"+n("",t[e])})).join("_")),e},r=(e=n(e,t)).replace(/(\W)/gm,"_");return o.makeStateKey(r)},e.prototype.stateGet=function(e,n){var r=this,o="string"==typeof e?e:"",s="object"==typeof e?e:n,u=this.getUrl(o),c=new O(s),p=this.getStateKey(u,s);if(t.isPlatformBrowser(this.platformId)&&this.state.hasKey(p)){var l=this.state.get(p,null);return this.state.remove(p),i.of(l)}return this.http.get(u,c).pipe(a.tap((function(e){t.isPlatformServer(r.platformId)&&r.state.onSerialize(p,(function(){return e}))})))},e.prototype.statePost=function(e,n,r){var o=this,s="string"==typeof e?e:"",u="object"==typeof e?e:n,c="object"==typeof n?n:r,p=this.getUrl(s),l=new O(c),f=this.getStateKey(p,u);if(t.isPlatformBrowser(this.platformId)&&this.state.hasKey(f)){var h=this.state.get(f,null);return this.state.remove(f),i.of(h)}return this.http.post(p,u,l).pipe(a.tap((function(e){t.isPlatformServer(o.platformId)&&o.state.onSerialize(f,(function(){return e}))})))},e.ɵfac=function(t){return new(t||e)(r["ɵɵinject"](r.Injector))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),k=function(){function e(){}return e.prototype.delete=function(e){},e.prototype.exist=function(e){return!1},e.prototype.get=function(e){return null},e.prototype.set=function(e,t,n){},e.prototype.on=function(){return i.of(null)},e.prototype.tryGet=function(){return this},e.ɵfac=function(t){return new(t||e)},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),C=function(){function e(e,t){this.platformId=e,this.storageService=t}return e.prototype.tryGet=function(){return this.isSupported()?this:this.storageService.tryGet()},e.prototype.delete=function(e){this.setter(e,"",-1)},e.prototype.exist=function(e){return-1!==document.cookie.indexOf(";"+e+"=")||0===document.cookie.indexOf(e+"=")},e.prototype.get=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t)){var i=o.substring(t.length,o.length),a=null;try{a=JSON.parse(decodeURIComponent(atob(i)))}catch(t){console.log("Cookie.get.error parsing",e,t)}return a}}return null},e.prototype.set=function(e,t,n){try{var r=[],o=JSON.stringify(t,(function(e,t){if("pool"!==e){if("object"==typeof t&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t}}));r=null,this.setter(e,btoa(encodeURIComponent(o)),n)}catch(n){console.log("CookieSet.error serializing",e,t,n)}},e.prototype.on=function(){var e=0;return function t(){e>3e5||this.get(name)||(e+=1e3,setTimeout(t,1e3))}(),i.of(null)},e.prototype.setter=function(e,t,n){var r;if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()}else r="";document.cookie=e+"="+t+r+"; path=/"},e.prototype.isSupported=function(){return t.isPlatformBrowser(this.platformId)},e.ɵfac=function(t){return new(t||e)(r["ɵɵinject"](r.PLATFORM_ID),r["ɵɵinject"](k))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),_=function(){function e(e,t){this.platformId=e,this.cookieStorageService=t}return e.prototype.tryGet=function(){return this.isSupported()?this:this.cookieStorageService.tryGet()},e.prototype.delete=function(e){window.sessionStorage.removeItem(e)},e.prototype.exist=function(e){return void 0!==window.sessionStorage[e]},e.prototype.get=function(e){var t=null;if(void 0!==window.sessionStorage[e])try{t=JSON.parse(window.sessionStorage[e])}catch(t){console.log("SessionStorage.get.error parsing",e,t)}return t},e.prototype.on=function(){return i.of(null)},e.prototype.set=function(e,t,n){try{var r=[],o=JSON.stringify(t,(function(e,t){if("pool"!==e){if("object"==typeof t&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t}}));r=null,window.sessionStorage.setItem(e,o)}catch(n){console.log("SessionStorage.set.error serializing",e,t,n)}},e.prototype.isSupported=function(){var e=!1;if(t.isPlatformBrowser(this.platformId))try{(e="sessionStorage"in window&&null!==window.sessionStorage)?(window.sessionStorage.setItem("test","1"),window.sessionStorage.removeItem("test")):e=!1}catch(t){e=!1}return e},e.ɵfac=function(t){return new(t||e)(r["ɵɵinject"](r.PLATFORM_ID),r["ɵɵinject"](C))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),T=function(){function e(e,t){this.platformId=e,this.cookieStorageService=t}return e.prototype.tryGet=function(){return this.isSupported()?this:this.cookieStorageService.tryGet()},e.prototype.delete=function(e){window.localStorage.removeItem(e)},e.prototype.exist=function(e){return void 0!==window.localStorage[e]},e.prototype.get=function(e){var t=null;if(void 0!==window.localStorage[e])try{t=JSON.parse(window.localStorage[e])}catch(t){console.log("LocalStorage.get.error parsing",e,t)}return t},e.prototype.on=function(){return i.of(null)},e.prototype.set=function(e,t,n){try{var r=[],o=JSON.stringify(t,(function(e,t){if("pool"!==e){if("object"==typeof t&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t}}));r=null,window.localStorage.setItem(e,o)}catch(n){console.log("LocalStorage.set.error serializing",e,t,n)}},e.prototype.isSupported=function(){var e=!1;if(t.isPlatformBrowser(this.platformId))try{(e="localStorage"in window&&null!==window.localStorage)?(window.localStorage.setItem("test","1"),window.localStorage.removeItem("test")):e=!1}catch(t){e=!1}return e},e.ɵfac=function(t){return new(t||e)(r["ɵɵinject"](r.PLATFORM_ID),r["ɵɵinject"](C))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),x=function(){function e(e,t,n){this.platformId=e,this.injector=t,this.localStorageService=n,this.cachedRequests=[],this.paths=[]}return e.prototype.setToken=function(e){this.localStorageService.set("authToken",e),this.retryFailedRequests()},e.prototype.getToken=function(){return this.localStorageService.get("authToken")},e.prototype.getFakeToken=function(){return new v("fakeToken")},e.prototype.isValid=function(e){return e&&(e.expiresIn>Date.now()||0===e.expiresIn)},e.prototype.isAuthenticated=function(){var e=this.getToken();return this.isValid(e)},e.prototype.collectFailedRequest=function(e){this.cachedRequests.push(e)},e.prototype.retryFailedRequests=function(){},e.ɵfac=function(t){return new(t||e)(r["ɵɵinject"](r.PLATFORM_ID),r["ɵɵinject"](r.Injector),r["ɵɵinject"](T))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),L=new r.InjectionToken("core.bundles"),R=function(){function e(e,t,n,r){this.bundles=e,this.injector=t,this.loader=n,this.container=r}return e.prototype.ngOnInit=function(){var e=this;this.loader.load(this.bundles[this.bundle]).then((function(t){var n=t.create(e.injector);e.moduleRef_=n;var r=n.injector.get("LAZY_ROOT_COMPONENT"),o=n.componentFactoryResolver.resolveComponentFactory(r),i=e.container.createComponent(o);i.instance;e.componentRef_=i}))},e.prototype.ngOnDestroy=function(){this.componentRef_&&this.componentRef_.destroy(),this.moduleRef_&&this.moduleRef_.destroy()},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](L),r["ɵɵdirectiveInject"](r.Injector),r["ɵɵdirectiveInject"](r.NgModuleFactoryLoader),r["ɵɵdirectiveInject"](r.ViewContainerRef))},e.ɵdir=r["ɵɵdefineDirective"]({type:e,selectors:[["","bundle",""]],inputs:{bundle:"bundle",data:"data"}}),e}(),E=function(){function e(e,t,n){this.container=t,this.renderer=n,this.hasContent=!0,this.element=e.nativeElement}return e.prototype.ngAfterContentChecked=function(){var e=!1;console.log("DefaultContentDirective",this.element.childNodes);for(var t=this.element.childNodes.length-1;t>=0;--t){var n=this.element.childNodes[t];if(1===n.nodeType||3===n.nodeType){e=!0;break}}e!==this.hasContent&&(this.hasContent=e,e?this.container.clear():this.container.createEmbeddedView(this.default))},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](r.ElementRef),r["ɵɵdirectiveInject"](r.ViewContainerRef),r["ɵɵdirectiveInject"](r.Renderer2))},e.ɵdir=r["ɵɵdefineDirective"]({type:e,selectors:[["","default",""]],inputs:{default:"default"}}),e}(),D=function(){function e(){this.version="0.0.12"}return e.prototype.ngOnInit=function(){},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r["ɵɵdefineComponent"]({type:e,selectors:[["core-module"]],decls:2,vars:1,consts:[[1,"core-module"]],template:function(e,t){1&e&&(r["ɵɵelementStart"](0,"span",0),r["ɵɵtext"](1),r["ɵɵelementEnd"]()),2&e&&(r["ɵɵadvance"](1),r["ɵɵtextInterpolate1"]("core ",t.version,""))},encapsulation:2}),e}(),M=function(){function e(){this.unsubscribe=new i.Subject}return e.prototype.ngOnDestroy=function(){this.unsubscribe.next(),this.unsubscribe.complete()},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r["ɵɵdefineComponent"]({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),F=function(){function e(){this.unsubscribe=new i.Subject}return e.prototype.ngOnDestroy=function(){this.unsubscribe.next(),this.unsubscribe.complete()},e.ɵfac=function(t){return new(t||e)},e.ɵdir=r["ɵɵdefineDirective"]({type:e,selectors:[["","disposable-directive",""]]}),e}(),V=function(){function e(){}return e.prototype.transform=function(e,t){if(!t)return e;e=this.encodeHTML(e),t=this.encodeHTML(t);var n=new RegExp("&[^;]+;|"+this.escapeRegexChars(t),"gi");return e.replace(n,(function(e){return e.toLowerCase()===t.toLowerCase()?"<strong>"+e+"</strong>":e}))},e.prototype.escapeRegexChars=function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},e.prototype.safeToString=function(e){return null==e?"":e.toString().trim()},e.prototype.encodeHTML=function(e){return this.safeToString(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.ɵfac=function(t){return new(t||e)},e.ɵpipe=r["ɵɵdefinePipe"]({name:"highlight",type:e,pure:!0}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),B=function(){function e(e){this.location=e}return e.prototype.transform=function(e){var t=(e=null!=e?Array.isArray(e)?e:e.split("/"):[]).join("/");return 0!==(t=this.location.normalize(t)).indexOf("/")&&(t="/"+t),e=t.split("/")},e.ɵfac=function(n){return new(n||e)(r["ɵɵdirectiveInject"](t.Location))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"segment",type:e,pure:!0}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),N=function(e){function t(t){var n=e.call(this,t)||this;return n.injector=t,n}return f(t,e),Object.defineProperty(t.prototype,"collection",{get:function(){return"/api/identity"},enumerable:!0,configurable:!0}),t.prototype.getDetailById=function(e){return this.get({id:e})},t.ɵfac=function(e){return new(e||t)(r["ɵɵinject"](r.Injector))},t.ɵprov=r["ɵɵdefineInjectable"]({token:t,factory:t.ɵfac,providedIn:"root"}),t}(P),$=function(e){function n(t){var n=e.call(this,t)||this;return n.injector=t,n.events=new r.EventEmitter,n.language_=new i.BehaviorSubject(void 0),n.languages_=new i.BehaviorSubject([]),n.languages_.next(n.config.languages),n}return f(n,e),Object.defineProperty(n.prototype,"collection",{get:function(){return"/api/translate"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lang",{get:function(){return n.lang_},set:function(e){if(e!==n.lang_){n.lang_=e;var t=this.languages_.getValue();if(t.length){var r=t.find((function(t){return t.lang===e}));this.language_.next(r)}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"language",{get:function(){return this.language_.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"languages",{get:function(){return this.languages_.getValue()},enumerable:!0,configurable:!0}),n.prototype.observe$=function(){var e=this;return this.language_.pipe(a.filter((function(e){return void 0!==e})),a.switchMap((function(t){return e.getTranslation(t.lang)})))},n.prototype.getTranslation=function(e){var t=this;return e&&e.trim()?(n.lang_=e,n.cache[e]?i.of(n.cache[e]):this.get("?lang="+e,{lang:e}).pipe(a.map((function(r){if(r.length&&r[0]){var o=r[0].labels;return n.cache[e]=o,t.events.emit(o),o}return i.of(null)})))):i.of(null)},n.prototype.getTranslate=function(e,t,r){if(e){var o=null,i=n.cache[n.lang_];if(i){for(var a=e.split("."),s=a.shift();a.length>0&&i[s];)i=i[s],s=a.shift();"string"!=typeof(o=i[s])&&(o=null)}return this.parseTranslate(o,e,t,r)}},n.prototype.transform=function(e,t,n){return this.getTranslate(e,t,n)},n.prototype.parseTranslate=function(e,t,n,r){return null==e?n||this.missingTranslate(t):r?this.parseParams(e,r):e},n.prototype.missingTranslate=function(e){return this.missingHandler?"function"==typeof this.missingHandler?this.missingHandler(e):this.missingHandler:e},n.prototype.parseParams=function(e,t){return e.replace(/@([^{}\s]*)/g,(function(e,n){var r=t[n];return void 0!==r?r:e}))},n.prototype.use=function(e){},n.prototype.setDefaultLang=function(e){},n.prototype.addLangs=function(e){},n.prototype.getBrowserLang=function(){return t.isPlatformBrowser(this.platformId)&&this.getFirstBrowserLang()||this.config.defaultLanguage},n.prototype.getFirstBrowserLang=function(){var e=this.getFirstBrowserLocale();if(e)return e.split("-")[0]},n.prototype.getFirstBrowserLocale=function(){var e,t=window.navigator,n=["language","browserLanguage","systemLanguage","userLanguage"];Array.isArray(t.languages)&&(e=t.languages[0]);for(var r=0;!e&&r<n.length;)e=t[n[r]],r++;return e},n.cache={},n.lang_=null,n.ɵfac=function(e){return new(e||n)(r["ɵɵinject"](r.Injector))},n.ɵprov=r["ɵɵdefineInjectable"]({token:n,factory:n.ɵfac,providedIn:"root"}),n}(N),A=function(){function e(e,t,n,r,o,a,s,u){this.platformId=e,this.coreService=t,this.injector=n,this.translateService=r,this.location=o,this.route=a,this.router=s,this.segment=u,this._language=new i.BehaviorSubject({}),this.language=this._language.asObservable(),this._languages=new i.BehaviorSubject([]),this.languages=this._languages.asObservable(),this.pageParams$=new i.BehaviorSubject({}),this.urlStrategy=this.coreService.options.urlStrategy,this._languages.next(this.coreService.options.languages),this.currentMarket=this.coreService.options.defaultMarket,this.setLanguages(),(this.coreService.options.useLang||this.coreService.options.useMarket)&&this.subscribeToRouter()}return Object.defineProperty(e.prototype,"lang",{get:function(){return this._lang},set:function(e){if(e!==this._lang){this._lang=e;var t=this._languages.getValue().find((function(t){return t.lang===e}));if(this._language.next(t),this.translateService.use(e),this.coreService.options.useLang){var n=this._lang,r=this.location.path();0===r.indexOf("/"+n)?r=r.replace("/"+n,"/"+e):0!==r.indexOf("/"+e)&&(r="/"+e+r),this.path=r}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLang",{get:function(){return this._lang},enumerable:!0,configurable:!0}),e.prototype.getPageParams=function(){var e=this;return this.route.queryParams.pipe(a.distinctUntilChanged(),a.switchMap((function(t){var n=e.parseParams(t);return e.pageParams$.next(n),i.of(n)})))},e.prototype.parseParams=function(e){var t=this,n={};return Object.keys(e).forEach((function(r){return n[r]=t.parse(e[r])})),n},e.prototype.serializeParams=function(e){var t=this,n={};return Object.keys(e).forEach((function(r){return n[r]=t.serialize(e[r])})),n},e.prototype.parse=function(e){try{return t.isPlatformBrowser(this.platformId)?JSON.parse(window.atob(e)):JSON.parse(Buffer.from(e,"base64").toString("ascii"))}catch(e){return null}},e.prototype.serialize=function(e){return t.isPlatformBrowser(this.platformId)?window.btoa(JSON.stringify(e)):Buffer.from(JSON.stringify(e),"ascii").toString("base64")},e.prototype.getId=function(){return+this.route.snapshot.paramMap.get("id")},e.prototype.getSlug=function(){return this.route.snapshot.paramMap.get("slug")},e.prototype.toRoute=function(e){var t=this.segment.transform(e);if(this.coreService.options.useMarket){var n=this.currentMarket,r=this.urlStrategy.split("/").indexOf(":market");t.splice(r,0,n)}if(this.coreService.options.useLang){var o=this._lang,i=this.urlStrategy.split("/").indexOf(":lang");t.splice(i,0,o)}return t},e.prototype.toSlug=function(e){var t=this.segment.transform(e),n=t.filter((function(e){return"string"==typeof e})),r=t.filter((function(e){return"string"!=typeof e}));if(this.coreService.options.useMarket){var o=this.urlStrategy.split("/").indexOf(":market");n.length>o&&(n[o]="*")}if(this.coreService.options.useLang){var i=this.urlStrategy.split("/").indexOf(":lang");n.length>i&&(n[i]="*")}return(n=n.join("/").replace(/\/\*/gi,"").split("/")).concat(r)},e.prototype.toParams=function(e){return{data:window.btoa(JSON.stringify(e))}},e.prototype.toData=function(e){if(e&&e.data)return JSON.parse(window.atob(e.data))},e.prototype.setLanguage=function(e,t){this.lang=e,this.coreService.options.useLang&&this.path&&(t?this.location.replaceState(this.path):this.router.navigate([this.path]))},e.prototype.setLanguages=function(){this.translateService.addLangs(this.coreService.options.languages?this.coreService.options.languages.map((function(e){return e.lang})):[]),this.translateService.setDefaultLang(this.coreService.options.defaultLanguage),this.setLanguage(this.coreService.options.defaultLanguage,!0)},e.prototype.subscribeToRouter=function(){var e=this;this.router.events.pipe(a.filter((function(e){return e instanceof u.NavigationStart}))).subscribe((function(t){var n=e.location.normalize(t.url).split("/");if(e.coreService.options.useMarket){var r=n[e.urlStrategy.split("/").indexOf(":market")];r!==e.currentMarket&&(e.currentMarket=r)}if(e.coreService.options.useLang){var o=n[e.urlStrategy.split("/").indexOf(":lang")];if(o!==e._lang){var i=e._languages.getValue().find((function(e){return e.lang===o}));e._language.next(i),e.translateService.use(o)}}}))},e.prototype.detectLanguage=function(){var e=null;if(t.isPlatformServer(this.platformId)){var n=this.injector.get("request");if(n){var r=(e=n.headers["accept-language"]).match(/[a-zA-Z\-]{2,10}/g)||[];e=r.length>0?r[0].split("-")[0]:null}}else t.isPlatformBrowser(this.platformId)&&(e=this.translateService.getBrowserLang());var o=this.coreService.options.defaultLanguage,i=new RegExp("("+(this.coreService.options.languages?this.coreService.options.languages.map((function(e){return e.lang})).join("|"):"")+")","gi"),a=(e||"").match(i);return o=a?a[0]:o},e.prototype.getTime=function(){if(t.isPlatformBrowser(this.platformId))return(performance||Date).now();var e=process.hrtime();return(1e9*e[0]+e[1])/1e6},e.prototype.start=function(){e.startTime=this.getTime()},e.prototype.end=function(){e.endTime=this.getTime(),console.log("RouteService.end",e.endTime-e.startTime)},e.ɵfac=function(n){return new(n||e)(r["ɵɵinject"](r.PLATFORM_ID),r["ɵɵinject"](I),r["ɵɵinject"](r.Injector),r["ɵɵinject"]($),r["ɵɵinject"](t.Location),r["ɵɵinject"](u.ActivatedRoute),r["ɵɵinject"](u.Router),r["ɵɵinject"](B))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),H=function(){function e(){this.statusCode=200,this.redirectUrl=null}return e.prototype.setStatusCode=function(e,t){void 0===t&&(t=null),this.statusCode=e,this.redirectUrl=t},e.prototype.getStatusCode=function(){return 309===this.statusCode?301:this.statusCode},e.prototype.getRedirectUrl=function(){return this.redirectUrl},e.ɵfac=function(t){return new(t||e)},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),q=function(){function t(t,n){this.injector=t,this.statusCodeService=n,this.loggerErrorStrategy_=e.LoggerErrorStrategy.Server,this.loggerErrorStrategy_=this.config.loggerErrorStrategy||e.LoggerErrorStrategy.Server}return Object.defineProperty(t.prototype,"config",{get:function(){return this.config_||(this.config_=this.injector.get(I).options),this.config_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this.logger_||(this.logger_=this.injector.get(w)),this.logger_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"router",{get:function(){return this.router_||(this.router_=this.injector.get(u.Router)),this.router_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"routeService",{get:function(){return this.routeService_||(this.routeService_=this.injector.get(A)),this.routeService},enumerable:!0,configurable:!0}),t.prototype.intercept=function(e,t){var r=this;return t.handle(e).pipe(a.tap((function(e){r.logger.httpError=null,e instanceof n.HttpResponse&&e.status>=r.loggerErrorStrategy_&&r.logger.http(e)})),a.catchError((function(e){return e instanceof n.HttpErrorResponse&&e.status>=r.loggerErrorStrategy_&&r.logger.http(e),i.throwError(e)})))},t.ɵfac=function(e){return new(e||t)(r["ɵɵinject"](r.Injector),r["ɵɵinject"](H))},t.ɵprov=r["ɵɵdefineInjectable"]({token:t,factory:t.ɵfac,providedIn:"root"}),t}(),U=["jsonFormatter"],z=function(){function e(e){this.platformId=e}return e.prototype.ngOnChanges=function(){if(t.isPlatformBrowser(this.platformId)){if(!p.isObject(this.json)&&!p.isArray(this.json))return;this.elementRef&&this.input.nativeElement.removeChild(this.elementRef.nativeElement);var e=new c(this.json).render();this.input.nativeElement.appendChild(e),this.elementRef=new r.ElementRef(e)}},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](r.PLATFORM_ID))},e.ɵcmp=r["ɵɵdefineComponent"]({type:e,selectors:[["json-formatter"]],viewQuery:function(e,t){var n;(1&e&&r["ɵɵstaticViewQuery"](U,!0),2&e)&&(r["ɵɵqueryRefresh"](n=r["ɵɵloadQuery"]())&&(t.input=n.first))},inputs:{json:"json"},features:[r["ɵɵNgOnChangesFeature"]()],decls:2,vars:0,consts:[["jsonFormatter",""]],template:function(e,t){1&e&&r["ɵɵelement"](0,"div",null,0)},styles:[""]}),e}(),J=function(e){function t(t){var n=e.call(this,t)||this;return n.injector=t,n.keys={},n.values$=new i.BehaviorSubject({}),n.emitter$=new r.EventEmitter,n}return f(t,e),Object.defineProperty(t.prototype,"collection",{get:function(){return"/api/label"},enumerable:!0,configurable:!0}),t.prototype.transform=function(e,t,n){var r=this.values$.getValue();return r.hasOwnProperty(e)?this.parseLabel(r[e],n):this.keys.hasOwnProperty(e)?void 0:(r[e]=null,Object.defineProperty(this.keys,e,{value:{id:e,defaultValue:t},enumerable:!0,writable:!1}),this.emitter$.emit(),null)},t.prototype.transform$=function(e,t,n){var r=this,o=this.values$.getValue();return o.hasOwnProperty(e)?i.of(this.parseLabel(o[e],n)):(this.keys.hasOwnProperty(e)||(o[e]=null,Object.defineProperty(this.keys,e,{value:{id:e,defaultValue:t},enumerable:!0,writable:!1}),this.emitter$.emit()),this.values$.pipe(a.map((function(t){return r.parseLabel(t[e],n)}))))},t.prototype.observe$=function(){var e=this;return this.emitter$.pipe(a.debounceTime(1),a.switchMap((function(t){return e.collect$()})),a.filter((function(e){return null!==e})))},t.prototype.collect$=function(){var e=this;if(Object.keys(this.keys).length){var t=Object.keys(this.keys).map((function(t){return e.keys[t]}));return this.keys={},this.statePost(t).pipe(a.map((function(t){return t.reduce((function(t,n){return t[n.id]=e.getLabel(n),t}),{})})),a.tap((function(t){var n=e.values$.getValue();Object.assign(n,t),e.values$.next(n)})),a.catchError((function(n){console.log(n);var r=t.reduce((function(t,n){return t[n.id]=e.getLabel(n),t}),{}),o=e.values$.getValue();return Object.assign(o,r),i.of(null)})))}return i.of(null)},t.prototype.parseLabel=function(e,t){if(e&&t){return e.replace(/@([^{}\s]*)/g,(function(e,n){var r=t[n];return void 0!==r?r:e}))}return e},t.prototype.getLabel=function(e){return e.value||e.defaultValue||this.getMissingLabel(e)},t.prototype.getMissingLabel=function(e){return"function"==typeof this.missingHandler?this.missingHandler(e):e.id},t.ɵfac=function(e){return new(e||t)(r["ɵɵinject"](r.Injector))},t.ɵprov=r["ɵɵdefineInjectable"]({token:t,factory:t.ɵfac,providedIn:"root"}),t}(P),G=function(e){function t(t,n){var r=e.call(this)||this;return r.element=t,r.labelService=n,r}return f(t,e),t.prototype.ngOnInit=function(){var e=this;this.labelService.transform$(this.label,this.element.nativeElement.innerHTML,this.labelParams).pipe(a.takeUntil(this.unsubscribe)).subscribe((function(t){e.element.nativeElement.innerHTML=t}))},t.ɵfac=function(e){return new(e||t)(r["ɵɵdirectiveInject"](r.ElementRef),r["ɵɵdirectiveInject"](J))},t.ɵdir=r["ɵɵdefineDirective"]({type:t,selectors:[["","label",""]],inputs:{label:"label",labelParams:"labelParams"},features:[r["ɵɵInheritDefinitionFeature"]]}),t}(F),K=function(){function e(e){this.labelService=e}return e.prototype.transform=function(e,t,n){return this.labelService.transform(e,t,n)},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](J))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"label",type:e,pure:!1}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}();function Q(e,t){if(1&e&&(r["ɵɵelementStart"](0,"div",1),r["ɵɵelementStart"](1,"span"),r["ɵɵtext"](2),r["ɵɵelementEnd"](),r["ɵɵtext"](3,"  "),r["ɵɵelementStart"](4,"span",2),r["ɵɵtext"](5),r["ɵɵelementEnd"](),r["ɵɵtext"](6,"  "),r["ɵɵelementStart"](7,"span",3),r["ɵɵtext"](8),r["ɵɵelementEnd"](),r["ɵɵtext"](9,"  "),r["ɵɵelementStart"](10,"span",4),r["ɵɵtext"](11),r["ɵɵelementEnd"](),r["ɵɵelementEnd"]()),2&e){var n=r["ɵɵnextContext"]();r["ɵɵproperty"]("ngClass","http--"+n.logger.httpError.statusType),r["ɵɵadvance"](2),r["ɵɵtextInterpolate"](n.logger.httpError.statusType),r["ɵɵadvance"](3),r["ɵɵtextInterpolate"](n.logger.httpError.status),r["ɵɵadvance"](3),r["ɵɵtextInterpolate"](n.logger.httpError.url),r["ɵɵadvance"](3),r["ɵɵtextInterpolate"](null==n.logger.httpError.body?null:n.logger.httpError.body.error)}}var W=function(){function e(e){this.logger=e}return e.prototype.ngOnInit=function(){},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](w))},e.ɵcmp=r["ɵɵdefineComponent"]({type:e,selectors:[["core-logger"]],decls:1,vars:1,consts:[["class","error-http",3,"ngClass",4,"ngIf"],[1,"error-http",3,"ngClass"],[1,"status"],[1,"url"],[1,"message"]],template:function(e,t){1&e&&r["ɵɵtemplate"](0,Q,12,5,"div",0),2&e&&r["ɵɵproperty"]("ngIf",t.logger.httpError)},directives:[t.NgIf,t.NgClass],styles:[".error-http[_ngcontent-%COMP%]{padding:15px;max-width:1140px;margin:0 auto 10px;background:#faebd7;font-size:13px;font-family:monospace;color:#d2691e}"]}),e}(),Z=new r.InjectionToken("core.outlets"),Y=function(){},X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.ɵfac=function(e){return ee(e||t)},t.ɵcmp=r["ɵɵdefineComponent"]({type:t,selectors:[["outlet-content-component"]],inputs:{outlet:"outlet"},features:[r["ɵɵInheritDefinitionFeature"]],decls:2,vars:0,consts:[[1,"outlet"]],template:function(e,t){1&e&&(r["ɵɵelementStart"](0,"div",0),r["ɵɵtext"](1,"Outlet not found!"),r["ɵɵelementEnd"]())},encapsulation:2}),t}(M),ee=r["ɵɵgetInheritedFactory"](X),te=function(){function e(e){e=e||{}}return e.prototype.resolve=function(e){return e&&this.outlets[e.component]||X},e.ɵfac=function(t){return new(t||e)(r["ɵɵinject"](Z))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),ne=["outlet"],re=function(e){function t(t,n){var r=e.call(this)||this;return r.componentFactoryResolver=t,r.outletResolverService=n,r}return f(t,e),t.prototype.ngOnInit=function(){var e=this.outletResolverService.resolve(this.outlet),t=this.componentFactoryResolver.resolveComponentFactory(e);this.viewContainerRef.clear();var n=this.viewContainerRef.createComponent(t),r=n.instance;r.outlet=this.outlet,"function"==typeof r.OutletInit&&r.OutletInit(),this.componentRef=n},t.prototype.ngOnDestroy=function(){this.componentRef.destroy()},t.ɵfac=function(e){return new(e||t)(r["ɵɵdirectiveInject"](r.ComponentFactoryResolver),r["ɵɵdirectiveInject"](te))},t.ɵcmp=r["ɵɵdefineComponent"]({type:t,selectors:[["outlet-component"]],viewQuery:function(e,t){var n;(1&e&&r["ɵɵviewQuery"](ne,!0,r.ViewContainerRef),2&e)&&(r["ɵɵqueryRefresh"](n=r["ɵɵloadQuery"]())&&(t.viewContainerRef=n.first))},inputs:{outlet:"outlet"},features:[r["ɵɵInheritDefinitionFeature"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t}(M);function oe(e,t){if(1&e&&(r["ɵɵelementContainerStart"](0),r["ɵɵelement"](1,"outlet-component",1),r["ɵɵelementContainerEnd"]()),2&e){var n=t.$implicit;r["ɵɵadvance"](1),r["ɵɵproperty"]("outlet",n)}}var ie,ae=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return f(n,e),n.ɵfac=function(e){return se(e||n)},n.ɵcmp=r["ɵɵdefineComponent"]({type:n,selectors:[["outlet-repeater-component"]],inputs:{outlets:"outlets"},features:[r["ɵɵInheritDefinitionFeature"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"outlet"]],template:function(e,t){1&e&&r["ɵɵtemplate"](0,oe,2,1,"ng-container",0),2&e&&r["ɵɵproperty"]("ngForOf",t.outlets)},directives:[t.NgForOf,re],encapsulation:2}),n}(M),se=r["ɵɵgetInheritedFactory"](ae),ue=function(){function e(e,t){this.coreService=e,this.segment=t}return e.prototype.transform=function(e){if("string"!=typeof e||0!==e.indexOf("http")&&0!==e.indexOf("/media/")){var t=this.segment.transform(e);return t.unshift(this.coreService.options.assets),t.join("/")}return e},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](I),r["ɵɵdirectiveInject"](B))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"asset",type:e,pure:!0}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),ce=function(){function e(e){this.changeDetector=e,this.subject=null,this.subscription=null,this.value=null,this.cachedValue=null}return e.prototype.transform=function(e){return this.observableToValue(e)},e.prototype.observableToValue=function(e){var t=this;return e!==this.subject&&(this.subject&&this.dispose(),e)?(this.subject=e,this.subscription=this.subject.subscribe((function(e){t.value=e,t.changeDetector.markForCheck()})),this.cachedValue=this.value,this.value):this.cachedValue!==this.value?(this.cachedValue=this.value,r.WrappedValue.wrap(this.value)):this.cachedValue},e.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe(),this.value=null,this.cachedValue=null,this.subscription=null,this.subject=null},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype._observableToValue=function(e){var t=this;return this.subject?e!==this.subject?(this.dispose(),this.transform(e)):this.value===this.cachedValue?this.cachedValue:(this.cachedValue=this.value,r.WrappedValue.wrap(this.value)):(e&&(this.subject=e,this.subscription=this.subject.subscribe((function(e){t.value=e,t.changeDetector.markForCheck()}))),this.cachedValue=this.value,this.value)},e.ɵfac=function(t){return new(t||e)(r["ɵɵinjectPipeChangeDetectorRef"]())},e.ɵpipe=r["ɵɵdefinePipe"]({name:"customAsync",type:e,pure:!1}),e}();(ie=e.ImageType||(e.ImageType={}))[ie.Default=1]="Default",ie[ie.Gallery=2]="Gallery",ie[ie.Share=3]="Share";var pe=function(){},le=function(){function t(){}return t.prototype.transform=function(t,n,r){n=n||"Default",r=r?"?"+r:"";var o=e.ImageType[n]||e.ImageType.Default,i=null;return t&&t.length&&(i=t.find((function(e){return e.type===o}))||t[0]),i?(i.url+r).replace(/ /g,"%20"):null},t.ɵfac=function(e){return new(e||t)},t.ɵpipe=r["ɵɵdefinePipe"]({name:"imageUrl",type:t,pure:!0}),t.ɵprov=r["ɵɵdefineInjectable"]({token:t,factory:t.ɵfac,providedIn:"root"}),t}(),fe=function(){function t(){}return t.prototype.transform=function(t,n,r){n=n||"Default";var o=e.ImageType[n]||e.ImageType.Default;return t&&t.length&&t.find((function(e){return e.type===o}))||null},t.prototype.transform__=function(t,n,r){n=n||"Default",r=r?"?"+r:"";var o=e.ImageType[n]||e.ImageType.Default,i=null;return t&&t.length&&((i=t.find((function(e){return e.type===o})))||o===e.ImageType.Default||(i=t.find((function(t){return t.type===e.ImageType.Default})))),i?(i.url+r).replace(/ /g,"%20"):null},t.ɵfac=function(e){return new(e||t)},t.ɵpipe=r["ɵɵdefinePipe"]({name:"image",type:t,pure:!0}),t.ɵprov=r["ɵɵdefineInjectable"]({token:t,factory:t.ɵfac,providedIn:"root"}),t}(),he=function(){function e(e,t){this.coreService=e,this.segment=t}return e.prototype.transform=function(e){var t=this.segment.transform(e);return t.unshift(this.coreService.options.public),t.join("/")},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](I),r["ɵɵdirectiveInject"](B))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"public",type:e,pure:!0}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),ge=function(){function e(e){this.routeService=e}return e.prototype.transform=function(e){return this.routeService.toRoute(e)},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](A))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"route",type:e,pure:!1}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),Object.defineProperty(t.prototype,"collection",{get:function(){return"/api/entity"},enumerable:!0,configurable:!0}),t.prototype.getDetailByName=function(e){return e.trim()?this.get({name:e}):i.of([])},t.ɵfac=function(e){return ye(e||t)},t.ɵprov=r["ɵɵdefineInjectable"]({token:t,factory:t.ɵfac,providedIn:"root"}),t}(N),ye=r["ɵɵgetInheritedFactory"](de),ve=function(e){function t(t){var n=e.call(this,t)||this;return n.injector=t,n.keys={},n.values$=new i.BehaviorSubject({}),n.emitter$=new r.EventEmitter,n}return f(t,e),Object.defineProperty(t.prototype,"collection",{get:function(){return"/api/slug"},enumerable:!0,configurable:!0}),t.prototype.transform=function(e){var t=this.values$.getValue();return t.hasOwnProperty(e)?t[e]:this.keys.hasOwnProperty(e)?void 0:(t[e]=null,Object.defineProperty(this.keys,e,{value:{mnemonic:e},enumerable:!0,writable:!1}),this.emitter$.emit(),null)},t.prototype.transform$=function(e){var t=this.values$.getValue();return t.hasOwnProperty(e)?i.of(t[e]):(this.keys.hasOwnProperty(e)||(Object.defineProperty(this.keys,e,{value:{mnemonic:e},enumerable:!0,writable:!1}),this.emitter$.emit()),this.values$.pipe(a.map((function(t){return t[e]}))))},t.prototype.observe$=function(){var e=this;return this.emitter$.pipe(a.debounceTime(1),a.switchMap((function(t){return e.collect$()})),a.filter((function(e){return null!==e})),a.first())},t.prototype.collect$=function(){var e=this;if(Object.keys(this.keys).length){var t=Object.keys(this.keys).map((function(t){return e.keys[t]}));return this.keys={},this.statePost(t).pipe(a.map((function(e){return e.reduce((function(e,t){return e[t.mnemonic]=[t.slug],e}),{})})),a.tap((function(t){var n=e.values$.getValue();Object.assign(n,t),e.values$.next(n)})),a.catchError((function(n){console.log(n);var r=t.reduce((function(e,t){return e[t.mnemonic]=null,e}),{}),o=e.values$.getValue();return Object.assign(o,r),i.of(null)})))}return i.of(null)},t.ɵfac=function(e){return new(e||t)(r["ɵɵinject"](r.Injector))},t.ɵprov=r["ɵɵdefineInjectable"]({token:t,factory:t.ɵfac,providedIn:"root"}),t}(de),me=function(){function e(e,t){this.slugService=e,this.routePipe=t}return e.prototype.transform=function(e,t){var n=this.slugService.transform(e);if(n){var r=this.routePipe.transform(n);return r&&t&&(r=r.concat(t)),r}return[]},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](ve),r["ɵɵdirectiveInject"](ge))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"slug",type:e,pure:!1}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),be=function(e){function t(t,n){var r=e.call(this)||this;return r.element=t,r.translateService=n,r}return f(t,e),t.prototype.ngOnInit=function(){var e=this;this.translateService.getTranslate(this.translate,this.element.nativeElement.innerHTML,this.translateParams).pipe(a.takeUntil(this.unsubscribe)).subscribe((function(t){e.element.nativeElement.innerHTML=t}))},t.ɵfac=function(e){return new(e||t)(r["ɵɵdirectiveInject"](r.ElementRef),r["ɵɵdirectiveInject"]($))},t.ɵdir=r["ɵɵdefineDirective"]({type:t,selectors:[["","translate",""]],inputs:{translate:"translate",translateParams:"translateParams"},features:[r["ɵɵInheritDefinitionFeature"]]}),t}(F),je=function(){function e(e,t){var n=this;this.ref=e,this.translateService=t,this.translateService.events.subscribe((function(e){return n.ref.markForCheck()}))}return e.prototype.transform=function(e,t,n){return this.translateService.getTranslate(e,t,n)},e.ɵfac=function(t){return new(t||e)(r["ɵɵinjectPipeChangeDetectorRef"](),r["ɵɵdirectiveInject"]($))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"translate",type:e,pure:!1}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),Se=function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e){return this.sanitizer.bypassSecurityTrustStyle(e)},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](o.DomSanitizer))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"safeStyle",type:e,pure:!0}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),Ie=function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](o.DomSanitizer))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"safeUrl",type:e,pure:!0}),e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),we=function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e){return this.sanitizer.bypassSecurityTrustHtml(e)},e.ɵfac=function(t){return new(t||e)(r["ɵɵdirectiveInject"](o.DomSanitizer))},e.ɵpipe=r["ɵɵdefinePipe"]({name:"safeHtml",type:e,pure:!0}),e}(),Oe=[],Pe=function(){function e(e){}return e.forRoot=function(t,n){return{ngModule:e,providers:[{provide:S,useValue:n},{provide:L,useValue:t||{}}]}},e.ɵmod=r["ɵɵdefineNgModule"]({type:e}),e.ɵinj=r["ɵɵdefineInjector"]({factory:function(t){return new(t||e)(r["ɵɵinject"](e,12))},providers:d([{provide:n.HTTP_INTERCEPTORS,useClass:q,multi:!0},{provide:r.NgModuleFactoryLoader,useClass:r.SystemJsNgModuleLoader}],Oe),imports:[[t.CommonModule,n.HttpClientModule,s.FormsModule,s.ReactiveFormsModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&r["ɵɵsetNgModuleScope"](Pe,{declarations:[D,M,F,z,W,re,X,ae,R,E,G,be,ue,ce,V,fe,le,K,he,ge,Se,Ie,B,me,je,we],imports:[t.CommonModule,n.HttpClientModule,s.FormsModule,s.ReactiveFormsModule],exports:[D,M,F,z,W,re,X,ae,R,E,G,be,ue,ce,V,fe,le,K,he,ge,Se,Ie,B,me,je,we]});var ke=function(){},Ce=function(){},_e=function(){},Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),Object.defineProperty(t.prototype,"collection",{get:function(){return"/api/document"},enumerable:!0,configurable:!0}),t.prototype.getDetailBySlug=function(e){return e.trim()?this.get({slug:e}).pipe(a.switchMap((function(e){return i.of(e[0])}))):i.of()},t.ɵfac=function(e){return xe(e||t)},t.ɵprov=r["ɵɵdefineInjectable"]({token:t,factory:t.ɵfac,providedIn:"root"}),t}(de),xe=r["ɵɵgetInheritedFactory"](Te),Le=function(){},Re=function(){function e(){this.emitter=new r.EventEmitter}return e.prototype.emit=function(e){return this.emitter.emit(e)},e.prototype.observe=function(){return this.emitter.pipe(a.tap((function(e){return console.log("EventDispatcherService",e)})))},e.ɵfac=function(t){return new(t||e)},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),Ee=function(){this.readmore=!1},De=function(){},Me=function e(t){t&&(Object.assign(this,t),t.items&&(this.items=t.items.map((function(t){return new e(t)}))))},Fe=function(e){function t(t){var n=e.call(this,t)||this;return n.injector=t,n}return f(t,e),Object.defineProperty(t.prototype,"collection",{get:function(){return"/api/menu"},enumerable:!0,configurable:!0}),t.ɵfac=function(e){return new(e||t)(r["ɵɵinject"](r.Injector))},t.ɵprov=r["ɵɵdefineInjectable"]({token:t,factory:t.ɵfac,providedIn:"root"}),t}(de),Ve=function(){},Be=function(){function e(e,t){this.platformId=e,this.zone=t,this.uid=0,this.paths=[]}return e.prototype.script=function(e,n){if(t.isPlatformBrowser(this.platformId)){if(-1===this.paths.indexOf(e)){var r;this.paths.push(e),!0===n?(r="OnceCallback"+ ++this.uid,e=e.split("{{callback}}").join(r)):r=n;var o=void 0,s=document.createElement("script");s.type="text/javascript",n?o=i.from(new Promise((function(e,t){window[r]=function(t){e(t)}}))):(s.async=!0,o=i.fromEvent(s,"load").pipe(a.map((function(e){return e}))));var u=document.getElementsByTagName("script");if(u.length){var c=u[u.length-1];c.parentNode.insertBefore(s,c.nextSibling)}return s.src=e,o}return i.of(new Event("loaded!"))}return i.of(null)},e.ɵfac=function(t){return new(t||e)(r["ɵɵinject"](r.PLATFORM_ID),r["ɵɵinject"](r.NgZone))},e.ɵprov=r["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),Ne=function(){};e.ApiRequestOptions=O,e.ApiService=P,e.AssetPipe=ue,e.AuthService=x,e.AuthToken=v,e.BUNDLES=L,e.BundleDirective=R,e.CORE_CONFIG=S,e.CookieStorageService=C,e.CoreConfig=j,e.CoreModule=Pe,e.CoreModuleComponent=D,e.CoreService=I,e.CustomAsyncPipe=ce,e.DefaultContentDirective=E,e.DisposableComponent=M,e.DisposableDirective=F,e.Document=Ce,e.DocumentIndex=_e,e.DocumentService=Te,e.Entity=Le,e.EntityService=de,e.EventDispatcherService=Re,e.Feature=Ee,e.HighlightPipe=V,e.HttpResponseInterceptor=q,e.HttpStatusCodeService=H,e.Identity=De,e.IdentityService=N,e.Image=pe,e.ImagePipe=fe,e.ImageUrlPipe=le,e.JsonFormatterComponent=z,e.Label=ke,e.LabelDirective=G,e.LabelPipe=K,e.LabelService=J,e.LocalStorageService=T,e.Logger=w,e.LoggerComponent=W,e.MenuItem=Me,e.MenuService=Fe,e.OUTLETS=Z,e.OnceService=Be,e.Outlet=Y,e.OutletComponent=re,e.OutletDefaultComponent=X,e.OutletRepeaterComponent=ae,e.PublicPipe=he,e.RoutePipe=ge,e.RouteService=A,e.SafeStylePipe=Se,e.SafeUrlPipe=Ie,e.SegmentPipe=B,e.SessionStorageService=_,e.SlugPipe=me,e.SlugService=ve,e.StorageService=k,e.Taxonomy=Ve,e.Translate=Ne,e.TranslateDirective=be,e.TranslatePipe=je,e.TranslateService=$,e.TrustPipe=we,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=designr-core.umd.min.js.map