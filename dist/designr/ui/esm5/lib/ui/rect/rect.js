var Point = /** @class */ (function () {
    function Point() {
        this.top = 0;
        this.left = 0;
        this.x = 0;
        this.y = 0;
    }
    return Point;
}());
export { Point };
var Rect = /** @class */ (function () {
    function Rect(rect) {
        this.top = 0;
        this.left = 0;
        this.width = 0;
        this.height = 0;
        this.right = 0;
        this.bottom = 0;
        this.center = new Point();
        this.set(rect);
    }
    Rect.contains = function (rect, left, top) {
        return rect.top <= top && top <= rect.bottom && rect.left <= left && left <= rect.right;
    };
    Rect.intersectRect = function (r1, r2) {
        return !(r2.left > r1.right ||
            r2.right < r1.left ||
            r2.top > r1.bottom ||
            r2.bottom < r1.top);
    };
    Rect.fromNode = function (node) {
        if (!node.getClientRects().length) {
            return new Rect();
        }
        var rect = node.getBoundingClientRect();
        // const defaultView = node.ownerDocument.defaultView;
        return new Rect({
            // top: rect.top + defaultView.pageYOffset,
            // left: rect.left + defaultView.pageXOffset,
            top: rect.top,
            left: rect.left,
            width: rect.width,
            height: rect.height,
        });
    };
    Rect.prototype.set = function (rect) {
        if (rect) {
            Object.assign(this, rect);
            this.right = this.left + this.width;
            this.bottom = this.top + this.height;
        }
        var y = this.top + this.height / 2;
        var x = this.left + this.width / 2;
        this.center = {
            left: x,
            top: y,
            x: x,
            y: y,
        };
    };
    Rect.prototype.contains = function (left, top) {
        return Rect.contains(this, left, top);
    };
    Rect.prototype.intersect = function (rect) {
        return Rect.intersectRect(this, rect);
    };
    Rect.prototype.intersection = function (rect) {
        var center = {
            x: (this.center.x - rect.center.x) / (rect.width / 2),
            y: (this.center.y - rect.center.y) / (rect.height / 2),
        };
        if (this.intersect(rect)) {
            var dx = this.left > rect.left ? 0 : Math.abs(rect.left - this.left);
            var dy = this.top > rect.top ? 0 : Math.abs(rect.top - this.top);
            var x = dx ? (1 - dx / this.width) : ((rect.left + rect.width) - this.left) / this.width;
            var y = dy ? (1 - dy / this.height) : ((rect.top + rect.height) - this.top) / this.height;
            x = Math.min(1, x);
            y = Math.min(1, y);
            return {
                x: x,
                y: y,
                center: center
            };
        }
        else {
            return { x: 0, y: 0, center: center };
        }
    };
    return Rect;
}());
export default Rect;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVjdC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BkZXNpZ25yL3VpLyIsInNvdXJjZXMiOlsibGliL3VpL3JlY3QvcmVjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtJQUFBO1FBQ0MsUUFBRyxHQUFXLENBQUMsQ0FBQztRQUNoQixTQUFJLEdBQVcsQ0FBQyxDQUFDO1FBQ2pCLE1BQUMsR0FBVyxDQUFDLENBQUM7UUFDZCxNQUFDLEdBQVcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQztJQUFELFlBQUM7QUFBRCxDQUFDLEFBTEQsSUFLQzs7QUFTRDtJQVVDLGNBQVksSUFBWTtRQVJ4QixRQUFHLEdBQVcsQ0FBQyxDQUFDO1FBQ2hCLFNBQUksR0FBVyxDQUFDLENBQUM7UUFDakIsVUFBSyxHQUFXLENBQUMsQ0FBQztRQUNsQixXQUFNLEdBQVcsQ0FBQyxDQUFDO1FBQ25CLFVBQUssR0FBWSxDQUFDLENBQUM7UUFDbkIsV0FBTSxHQUFZLENBQUMsQ0FBQztRQUNwQixXQUFNLEdBQVcsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUc1QixJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hCLENBQUM7SUFFTSxhQUFRLEdBQWYsVUFBZ0IsSUFBVSxFQUFFLElBQVksRUFBRSxHQUFXO1FBQ3BELE9BQU8sSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDekYsQ0FBQztJQUVNLGtCQUFhLEdBQXBCLFVBQXFCLEVBQVEsRUFBRSxFQUFRO1FBQ3RDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLEtBQUs7WUFDMUIsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsSUFBSTtZQUNsQixFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFN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LENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUN6RixJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUMxRixDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbkIsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ25CLE9BQU87Z0JBQ04sQ0FBQyxFQUFFLENBQUM7Z0JBQ0osQ0FBQyxFQUFFLENBQUM7Z0JBQ0osTUFBTSxFQUFFLE1BQU07YUFDZCxDQUFDO1NBQ0Y7YUFBTTtZQUNOLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDO1NBQ3RDO0lBQ0YsQ0FBQztJQUVGLFdBQUM7QUFBRCxDQUFDLEFBdkZELElBdUZDIiwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgY2xhc3MgUG9pbnQge1xuXHR0b3A6IG51bWJlciA9IDA7XG5cdGxlZnQ6IG51bWJlciA9IDA7XG5cdHg6IG51bWJlciA9IDA7XG5cdHk6IG51bWJlciA9IDA7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlY3Qge1xuXHR0b3A6IG51bWJlcjtcblx0bGVmdDogbnVtYmVyO1xuXHR3aWR0aDogbnVtYmVyO1xuXHRoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVjdCB7XG5cblx0dG9wOiBudW1iZXIgPSAwO1xuXHRsZWZ0OiBudW1iZXIgPSAwO1xuXHR3aWR0aDogbnVtYmVyID0gMDtcblx0aGVpZ2h0OiBudW1iZXIgPSAwO1xuXHRyaWdodD86IG51bWJlciA9IDA7XG5cdGJvdHRvbT86IG51bWJlciA9IDA7XG5cdGNlbnRlcj86IFBvaW50ID0gbmV3IFBvaW50KCk7XG5cblx0Y29uc3RydWN0b3IocmVjdD86IElSZWN0KSB7XG5cdFx0dGhpcy5zZXQocmVjdCk7XG5cdH1cblxuXHRzdGF0aWMgY29udGFpbnMocmVjdDogUmVjdCwgbGVmdDogbnVtYmVyLCB0b3A6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdHJldHVybiByZWN0LnRvcCA8PSB0b3AgJiYgdG9wIDw9IHJlY3QuYm90dG9tICYmIHJlY3QubGVmdCA8PSBsZWZ0ICYmIGxlZnQgPD0gcmVjdC5yaWdodDtcblx0fVxuXG5cdHN0YXRpYyBpbnRlcnNlY3RSZWN0KHIxOiBSZWN0LCByMjogUmVjdCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAhKHIyLmxlZnQgPiByMS5yaWdodCB8fFxuXHRcdFx0cjIucmlnaHQgPCByMS5sZWZ0IHx8XG5cdFx0XHRyMi50b3AgPiByMS5ib3R0b20gfHxcblx0XHRcdHIyLmJvdHRvbSA8IHIxLnRvcCk7XG5cdH1cblxuXHRzdGF0aWMgZnJvbU5vZGUobm9kZTogSFRNTEVsZW1lbnQpOiBSZWN0IHtcblx0XHRpZiAoIW5vZGUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpIHtcblx0XHRcdHJldHVybiBuZXcgUmVjdCgpO1xuXHRcdH1cblx0XHRjb25zdCByZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHQvLyBjb25zdCBkZWZhdWx0VmlldyA9IG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldztcblx0XHRyZXR1cm4gbmV3IFJlY3Qoe1xuXHRcdFx0Ly8gdG9wOiByZWN0LnRvcCArIGRlZmF1bHRWaWV3LnBhZ2VZT2Zmc2V0LFxuXHRcdFx0Ly8gbGVmdDogcmVjdC5sZWZ0ICsgZGVmYXVsdFZpZXcucGFnZVhPZmZzZXQsXG5cdFx0XHR0b3A6IHJlY3QudG9wLFxuXHRcdFx0bGVmdDogcmVjdC5sZWZ0LFxuXHRcdFx0d2lkdGg6IHJlY3Qud2lkdGgsXG5cdFx0XHRoZWlnaHQ6IHJlY3QuaGVpZ2h0LFxuXHRcdH0pO1xuXHR9XG5cblx0c2V0KHJlY3Q6IElSZWN0KSB7XG5cdFx0aWYgKHJlY3QpIHtcblx0XHRcdE9iamVjdC5hc3NpZ24odGhpcywgcmVjdCk7XG5cdFx0XHR0aGlzLnJpZ2h0ID0gdGhpcy5sZWZ0ICsgdGhpcy53aWR0aDtcblx0XHRcdHRoaXMuYm90dG9tID0gdGhpcy50b3AgKyB0aGlzLmhlaWdodDtcblx0XHR9XG5cdFx0Y29uc3QgeSA9IHRoaXMudG9wICsgdGhpcy5oZWlnaHQgLyAyO1xuXHRcdGNvbnN0IHggPSB0aGlzLmxlZnQgKyB0aGlzLndpZHRoIC8gMjtcblx0XHR0aGlzLmNlbnRlciA9IHtcblx0XHRcdGxlZnQ6IHgsXG5cdFx0XHR0b3A6IHksXG5cdFx0XHR4LFxuXHRcdFx0eSxcblx0XHR9O1xuXHR9XG5cblx0Y29udGFpbnMobGVmdDogbnVtYmVyLCB0b3A6IG51bWJlcikge1xuXHRcdHJldHVybiBSZWN0LmNvbnRhaW5zKHRoaXMsIGxlZnQsIHRvcCk7XG5cdH1cblxuXHRpbnRlcnNlY3QocmVjdDogUmVjdCkge1xuXHRcdHJldHVybiBSZWN0LmludGVyc2VjdFJlY3QodGhpcywgcmVjdCk7XG5cdH1cblxuXHRpbnRlcnNlY3Rpb24ocmVjdDogUmVjdCkge1xuXHRcdGNvbnN0IGNlbnRlciA9IHtcblx0XHRcdHg6ICh0aGlzLmNlbnRlci54IC0gcmVjdC5jZW50ZXIueCkgLyAocmVjdC53aWR0aCAvIDIpLFxuXHRcdFx0eTogKHRoaXMuY2VudGVyLnkgLSByZWN0LmNlbnRlci55KSAvIChyZWN0LmhlaWdodCAvIDIpLFxuXHRcdH07XG5cdFx0aWYgKHRoaXMuaW50ZXJzZWN0KHJlY3QpKSB7XG5cdFx0XHRjb25zdCBkeCA9IHRoaXMubGVmdCA+IHJlY3QubGVmdCA/IDAgOiBNYXRoLmFicyhyZWN0LmxlZnQgLSB0aGlzLmxlZnQpO1xuXHRcdFx0Y29uc3QgZHkgPSB0aGlzLnRvcCA+IHJlY3QudG9wID8gMCA6IE1hdGguYWJzKHJlY3QudG9wIC0gdGhpcy50b3ApO1xuXHRcdFx0bGV0IHggPSBkeCA/ICgxIC0gZHggLyB0aGlzLndpZHRoKSA6ICgocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCkgLSB0aGlzLmxlZnQpIC8gdGhpcy53aWR0aDtcblx0XHRcdGxldCB5ID0gZHkgPyAoMSAtIGR5IC8gdGhpcy5oZWlnaHQpIDogKChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0KSAtIHRoaXMudG9wKSAvIHRoaXMuaGVpZ2h0O1xuXHRcdFx0eCA9IE1hdGgubWluKDEsIHgpO1xuXHRcdFx0eSA9IE1hdGgubWluKDEsIHkpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0eDogeCxcblx0XHRcdFx0eTogeSxcblx0XHRcdFx0Y2VudGVyOiBjZW50ZXJcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB7IHg6IDAsIHk6IDAsIGNlbnRlcjogY2VudGVyIH07XG5cdFx0fVxuXHR9XG5cbn1cbiJdfQ==