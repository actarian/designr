!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@designr/core"),require("@angular/platform-browser"),require("rxjs/operators"),require("rxjs"),require("rxjs/internal/scheduler/animationFrame")):"function"==typeof define&&define.amd?define("@designr/ui",["exports","@angular/core","@angular/common","@designr/core","@angular/platform-browser","rxjs/operators","rxjs","rxjs/internal/scheduler/animationFrame"],t):t(((e=e||self).designr=e.designr||{},e.designr.ui={}),e.ng.core,e.ng.common,e.core$1,e.ng.platformBrowser,e.rxjs.operators,e.rxjs,e.rxjs["internal/scheduler/animationFrame"])}(this,(function(e,t,n,r,o,i,s,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function l(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}var d,f=function(e){e&&Object.assign(this,e)},m=new t.InjectionToken("ui.config"),h=function(){function e(e){e=e||{},this.options=new f(e)}return e.ɵfac=function(n){return new(n||e)(t["ɵɵinject"](m))},e.ɵprov=t["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),v=function(){function e(){this.version="0.0.12"}return e.prototype.ngOnInit=function(){},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=t["ɵɵdefineComponent"]({type:e,selectors:[["ui-module"]],decls:2,vars:1,consts:[[1,"ui-module"]],template:function(e,n){1&e&&(t["ɵɵelementStart"](0,"span",0),t["ɵɵtext"](1),t["ɵɵelementEnd"]()),2&e&&(t["ɵɵadvance"](1),t["ɵɵtextInterpolate1"]("ui ",n.version,""))},encapsulation:2}),e}(),g=function(){function e(e,n){this.eventManager=e,this.element=n,this.initialFocus=!1,this.clickOutside=new t.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.eventManager.getZone().runOutsideAngular((function(){e.removeClick=e.eventManager.addGlobalEventListener("document","click",(function(t){e.onClick(t)}))}))},e.prototype.ngOnDestroy=function(){this.removeClick()},e.prototype.onClick=function(e){var t=this,n=e.target;this.element.nativeElement.contains(n)||!document.contains(n)?this.initialFocus=!0:this.initialFocus&&(this.initialFocus=!1,this.eventManager.getZone().run((function(){t.clickOutside.emit(null)})))},e.ɵfac=function(n){return new(n||e)(t["ɵɵdirectiveInject"](o.EventManager),t["ɵɵdirectiveInject"](t.ElementRef))},e.ɵdir=t["ɵɵdefineDirective"]({type:e,selectors:[["","clickOutside",""]],inputs:{initialFocus:"initialFocus"},outputs:{clickOutside:"clickOutside"}}),e}(),I=function(){function e(e,t,n,r){this.platformId=e,this.renderer=n,this.zone=r,this.nativeElement=t.nativeElement}return e.prototype.ngOnInit=function(){var e=this;n.isPlatformBrowser(this.platformId)&&this.zone.runOutsideAngular((function(){require("intersection-observer"),e.onRegister()}))},e.prototype.ngOnDestroy=function(){this.observer&&this.observer.disconnect()},e.prototype.onRegister=function(){var e=this;this.newIntersectionObserver();new MutationObserver((function(t){return e.onChange(t)})).observe(this.nativeElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),this.onChange()},e.prototype.onChange=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Array.from(this.nativeElement.querySelectorAll("img[data-src], [data-srcset], [data-background-src]"));r.forEach((function(t){return e.observer.observe(t)}))},e.prototype.newIntersectionObserver=function(){var e=this,t=this.lazyImages instanceof Object?this.lazyImages:void 0;return this.observer=new IntersectionObserver((function(t){return t.forEach((function(t){t.isIntersecting&&e.onAppearsInViewport(t.target)}))}),t),this.observer},e.prototype.onAppearsInViewport=function(e){var t=this;if(e.dataset.srcset)this.renderer.setAttribute(e,"srcset",e.dataset.srcset),this.renderer.removeAttribute(e,"data-srcset"),e.dataset.src&&(this.renderer.setAttribute(e,"src",e.dataset.src),this.renderer.removeAttribute(e,"data-src"));else if(e.dataset.src){var n=e.dataset.src;this.onImagePreload(n,(function(n){t.renderer.setAttribute(e,"src",n),t.renderer.removeAttribute(e,"data-src"),t.zone.runOutsideAngular((function(){setTimeout((function(){t.renderer.addClass(e,"ready")}),1)}))}))}e.dataset.backgroundSrc&&(this.renderer.setStyle(e,"background-image","url("+e.dataset.backgroundSrc+")"),this.renderer.removeAttribute(e,"data-background-src")),this.observer&&this.observer.unobserve(e)},e.prototype.onImagePreload=function(e,t){var n=new Image;n.onload=function(){"function"==typeof t&&t(n.src)},n.onerror=function(e){n.onerror=null,n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAC/CAMAAAA1kLK0AAAATlBMVEX////MzMyZmZn39/fHx8fPz8+Ojo7FxcXDw8Pn5+fS0tLq6url5eX8/PyUlJTi4uLX19fv7++JiYm9vb3d3d2FhYWtra2qqqqAgICdnZ2sCR5lAAAJUElEQVR4nO2d6YKzKgyGa7VaN1zqdL7e/42eigERkGobrM7J+2umM3V5DEkICKeQxHUKT6SnCASIQIAIBIhAgAgEiECACASIQIAIBIhAgAgEiECACASIQIAIBIhAgAgEiECACASIQIAIBIhAgAgEiECACASIQIAIBIhAgAgE6NsgynFcvvzqhXwNRBk2RVdnQRBEXM8fsrormm/x+AqIsqnqAO5+Iv5ZXTVfgLE9iLDoIegIpjiCutj8srYFUaaZG8III0s3tYtNQTT1MgqCRd1sd20bgkiDZDmFQUmQbnV1m4Go5owhimTYsP612ub6NgKRWm60v/lL1nVF+lQfSi+BjUcUbWIVm4BogshkUKdmlCybtL4YNKJgA1+xAYiwjjQKQZc78qYw7/T4GtX+r9I7CK1VPCm8zpfKppsakf/24RtEmUWT+8nyhdlBmU9jbZT5TSs8g2jUm4lWWnhYT7/t1VP4BVFdlRtJ1jf0sEsUFFefkdQriFrJoK7v+btQPUZSY1+hciJ/IErF30XR26cJlfYRBd4chT8QoWLUyUdGXSlG8T7QF/IGIlSf44fnCFXb8nW9nkAoHJLuY3suu8Q3CU8gVA45xgFz3zbhB0Sp+Aek4yvNI/LhMf2AUJwbij30Ki8jXaxjKvIC4qIGDDQS42GjC9oxpXyA6Cb9pSseCdlviTq0Ywp5AJFqFTkfJBL0zig+iMaoTCKSkK0jwe6BoYMoFUcp/QTa81PSduTQgQ5ClqOiskjwScgEJULugGGDaFTbTT2QkCdALk8ggyind17IegReFB3pojYOZBAicgrDHUngeUzR+HBjKC6IUDwtmQWPfgKNhMzfE9RLRwWRiZse22+FT6IRZpYhHbAXKgiRQkw8ugcSonFgJhOoIKRnnLgxfD8xdm5xjtcLE4Q0CC1WpmPsQIqiInIgmgQmiMvcczJINGnuUPr6ksTx8LqhiCCkQZgNQCdR/cQOtffF58IzCUQQtcOX6ySK+OxQ/NqXiH4oWqKNB0LkEPbUN9VyTCcJ9tokRA0TLZfAA1FFzmarZ1ZOEgtMAhwS2oQaPBCBPWRIGSTaj0wiFSEU6fLRQMh6zGxXSM+sUgeJ9qUTFN07LHeJBgK6W66ekG4T+c/w+PtIwTQSr01iwQnXCAuEeECW0Zfq9tTQGrQcM29Zy36vWV1n19/nj2rjuE1lugJZosHpjWOBEJd1MS8raBlj7dAa9HzipnjFJmBKY2ETtRZXcJlF/9YNIIGAmGFz4hceH+wkNNVsJpbElljkOOUbwgKRzYf1AQSExFf9juvUg8Zs8B42ECJxwemMI4EIHcEMQJxjfuc2EmpzStnoKtj5kha3dgaEDNg4d4ADonG4cAHizHQS3EbK2/33936TE9CbhyTx4J9l8QwIETdQAigSiAKuyZYRShBAQqny83/vemf6jKD3Yvj/5gwkYsD6y+wgIM2OCow7QAIBNSNr5j+CMEkMNjL4Bdbeh6/n8AUGR8tmQICTwBnhQAIhQpn1b0okGDymkllxEpBZnSHInmrwmHBpdWwHcXL3btYJB4RIp6wOXAUBUVTJrCYkzv8GM7+z0bvy3+wgRK0YI6XCARG60t0JCCOfuPJbz8EGHj/c8zX8V/bg36/nnKX0lii3gAJCBA1rajAFYWZWnEQqQwt/vDc2hM+6aa6z4VP0QFHCBg4IuCJ7T1ADcW75GedIxNzPCAsR3TE7COjxoszcxwFROYKGAWIweINEMYkVj+l37CBE2MBIsnFAQGNNrF5LA8Gu8HmqeUwgEfPsNGELQJSJwzWtFA6I2hE9DR8hn1+a2Eiw3/7nql0A4oRYwf0CiP6EIaeh5xODn+BtIzwmCBHQrX/UQMT9Z+mPlmNCPsEjBA8r8RIQrvRlpbYHwfrPungmx2xFF2OJj/gTIMzMSpD4v4GYyazy+P8CgvsI3sGcyTEH93FMH7E+aii9Kp1EdeCosT6P+B1IDDZgqd4dNI9YlVkm/YcBpJEaiasgcT1mZrm+rxGKctzQz0h0Egfta6zrfXIfGU1q2zoJzUUcpve5ph5xZrf+01LYvp1EvsRH7K8esaJCdRZD3c3PQ7UQo3rXvgaxvwrV8polN4lhqLv4B7//OKt3DhD7q1kurmJzPdoh3uVi/FsnIXLMVyD2V8VeOq4h72so24d3QNEOmVUyJZEyN4g9jmssG+kaG8cZ/Ftx76uSjLXcu+SzJA4z0rVo7FMl8ZBDnfUw9snbea5XapgLxB7HPpeMhk9JMGuo1at3srZ9lNHwBfMjdLVX819NEuAxDzM/4vWMGVMxs3k5g0Q7B2KfM2bC+VA2B+JpFExdaisfZoxZSVhAlPucQ+WYVTcPoh//VmfVDTmm4jF5POgHQi0gdjqrzjHt0QWCwxjnWQ6ZVa5lVo11WsBO51k6Zt5e9MmkDg2ZlUKCt5aGmSB2O/N2fi524Hw5Q9O/IbPSs21znuVu52LPz87PL9kKDRZlkDDw7nd2vnxfA2dNGaNmNZV4M3qH72vICi5OgqNHUU2iB77DN3iw37NykpAv8Ozxna75t/zek4uE+Msu3/IbTQL57U6TRIpuEH7eBMZaKCrXqndCpSSEc55e/t8N/0R6ZgXa/bvhttUCPpOVxP5XC7CsH/Gp9MzqdIz1I4wVRT6X6SeOsKKIvsYMhoyK7iHWmPGxKNB07SLZy933qkPqOlRoB1bHO6SD2Ps6VGPjQFyodyShLAe495XJFNvFy39HjyltY/dr1SnPD6kf2ksncYTVC5X1LL2ROMZ6ln6WIh2j6HFWOFXWvI0s74q/KWUd5MOseassFPXx4uBCoWIQx1kFebJOOnIN81DrYtNK6cqBae18cWTaTQFE+2tITXdLeetEYX1Vj4F9hcqJfILQ9uDpVp8qrP/GHjy0K9MofZ+uevk+Xdlf2qfrRDu3Kaew7uU3++/lX93L72Tf3fEyt7ujudflX9ndsdf8fp+12O+z+x/s99mLdoCVoj2BpWiXaCnaN1w5I+0kL1U2FY+SBg7+WV29zrjw9RUQvcqw6bfIDkTYeP7Qh9LGsWuyV30NBKgMpb5EAPRtELsRgQARCBCBABEIEIEAEQgQgQARCBCBABEIEIEAEQgQgQARCBCBABEIEIEAEQgQgQARCBCBABEIEIEAEQgQgQARCBCBABEIEIEAPUGQuP4DT2RwhyUkgc4AAAAASUVORK5CYII="},n.src=e},e.ɵfac=function(n){return new(n||e)(t["ɵɵdirectiveInject"](t.PLATFORM_ID),t["ɵɵdirectiveInject"](t.ElementRef),t["ɵɵdirectiveInject"](t.Renderer2),t["ɵɵdirectiveInject"](t.NgZone))},e.ɵdir=t["ɵɵdefineDirective"]({type:e,selectors:[["","lazy-images",""]],inputs:{lazyImages:"lazyImages"}}),e}();(d=e.ModalEventType||(e.ModalEventType={}))[d.Complete=0]="Complete",d[d.Close=1]="Close";var y=function(t){this.type=e.ModalEventType.Complete,t&&Object.assign(this,t)},C=function(t){this.type=e.ModalEventType.Close,t&&Object.assign(this,t)},b=function(){function e(e){this.providers=[],this.emitter=new t.EventEmitter,e&&Object.assign(this,e)}return e.ɵfac=function(n){return new(n||e)(t["ɵɵinject"](e))},e.ɵprov=t["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),A=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.ɵfac=function(e){return E(e||n)},n.ɵprov=t["ɵɵdefineInjectable"]({token:n,factory:n.ɵfac,providedIn:"root"}),n}(Object),E=t["ɵɵgetInheritedFactory"](A),w=function(){function e(e){this.platformId=e,this.modals$=new s.BehaviorSubject([])}return e.prototype.getInfos=function(){return this.modals$.pipe(i.map((function(e){return e.length?e[e.length-1]:null})))},e.prototype.addClass=function(e){n.isPlatformBrowser(this.platformId)&&document.querySelector("body").classList.add(e)},e.prototype.removeClass=function(e){n.isPlatformBrowser(this.platformId)&&document.querySelector("body").classList.remove(e)},e.prototype.open=function(e){this.addClass("modal-active"),e=new b(e);var t=this.modals$.getValue();return t.push(e),this.modals$.next(t),e.emitter},e.prototype.complete=function(e,t){(e=e?this.remove(e):this.pop())&&e.emitter.emit(new y({modal:e,data:t}))},e.prototype.close=function(e,t){(e=this.removeAll())&&e.emitter.emit(new C({modal:e,data:t}))},e.prototype.prev=function(e,t){(e=e?this.remove(e):this.pop())&&e.emitter.emit(new C({modal:e,data:t}))},e.prototype.pop=function(){var e=this.modals$.getValue();if(e.length){var t=e.pop();return e.length||this.removeClass("modal-active"),this.modals$.next(e),t}return null},e.prototype.remove=function(e){var t=this.modals$.getValue();return t.length&&t[t.length-1]===e?(t.pop(),t.length||this.removeClass("modal-active"),this.modals$.next(t),e):null},e.prototype.removeAll=function(){var e=this.modals$.getValue();if(e.length){var t=e.pop();return this.removeClass("modal-active"),this.modals$.next([]),t}return null},e.ɵfac=function(n){return new(n||e)(t["ɵɵinject"](t.PLATFORM_ID))},e.ɵprov=t["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),j=["modalContainer"],M=function(e){function n(t){var n=e.call(this)||this;return n.resolver=t,n}return l(n,e),n.prototype.ngOnInit=function(){this.setModal(this.modal)},n.prototype.ngOnDestroy=function(){this.component&&(this.component.destroy(),this.component=null)},n.prototype.setModal=function(e){if(this.component&&this.component.destroy(),e){var n=Object.keys(e.providers).map((function(t){return{provide:t,useValue:e.providers[t]}}));n.push({provide:A,useValue:e.data},{provide:b,useValue:e});var r=t.Injector.create({providers:n}),o=this.resolver.resolveComponentFactory(e.component).create(r);this.modalContainer.insert(o.hostView),this.component=o}else this.component=null},n.ɵfac=function(e){return new(e||n)(t["ɵɵdirectiveInject"](t.ComponentFactoryResolver))},n.ɵcmp=t["ɵɵdefineComponent"]({type:n,selectors:[["core-modal-view-component"]],viewQuery:function(e,n){var r;(1&e&&t["ɵɵstaticViewQuery"](j,!0,t.ViewContainerRef),2&e)&&(t["ɵɵqueryRefresh"](r=t["ɵɵloadQuery"]())&&(n.modalContainer=r.first))},inputs:{modal:"modal"},features:[t["ɵɵInheritDefinitionFeature"]],decls:2,vars:0,consts:[["modalContainer",""]],template:function(e,n){1&e&&t["ɵɵelementContainer"](0,null,0)},encapsulation:2}),n}(r.DisposableComponent);function Q(e,n){if(1&e){var r=t["ɵɵgetCurrentView"]();t["ɵɵelementStart"](0,"button",9),t["ɵɵlistener"]("click",(function(e){return t["ɵɵrestoreView"](r),t["ɵɵnextContext"]().doPrev()})),t["ɵɵpipe"](1,"label"),t["ɵɵnamespaceSVG"](),t["ɵɵelementStart"](2,"svg"),t["ɵɵelement"](3,"use",10),t["ɵɵelementEnd"](),t["ɵɵnamespaceHTML"](),t["ɵɵelementStart"](4,"span"),t["ɵɵtext"](5),t["ɵɵpipe"](6,"label"),t["ɵɵelementEnd"](),t["ɵɵelementEnd"]()}2&e&&(t["ɵɵproperty"]("title",t["ɵɵpipeBind2"](1,2,"modal.back","back")),t["ɵɵadvance"](5),t["ɵɵtextInterpolate"](t["ɵɵpipeBind2"](6,5,"modal.back","back")))}function O(e,n){if(1&e&&(t["ɵɵelementContainerStart"](0),t["ɵɵelement"](1,"core-modal-view-component",11),t["ɵɵelementContainerEnd"]()),2&e){var r=n.$implicit,o=n.last;t["ɵɵadvance"](1),t["ɵɵproperty"]("modal",r)("hidden",!o)}}var S=function(e){return{active:e}},k=function(e){function o(t){var n=e.call(this)||this;return n.modalService=t,n.modalCount=0,n}return l(o,e),o.prototype.ngOnInit=function(){var e=this;this.modalService.modals$.pipe(i.takeUntil(this.unsubscribe),i.map((function(t){return e.modalCount=t.length,t.length?t[t.length-1]:null}))).subscribe((function(t){e.className=t?t.className:null}))},o.prototype.doClose=function(){this.modalService.close()},o.prototype.doPrev=function(){this.modalService.prev()},o.ɵfac=function(e){return new(e||o)(t["ɵɵdirectiveInject"](w))},o.ɵcmp=t["ɵɵdefineComponent"]({type:o,selectors:[["core-modal-container-component"]],features:[t["ɵɵInheritDefinitionFeature"]],decls:14,vars:12,consts:[[1,"modal",3,"ngClass"],[1,"modal__background",3,"click"],[1,"modal__page",3,"ngClass"],[1,"modal__header"],["type","button","class","btn btn--prev",3,"title","click",4,"ngIf"],["type","button","title","'modal.close' | label : 'close'",1,"btn","btn--close",3,"click"],[0,"xlink","href","#close"],[1,"modal__content"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn--prev",3,"title","click"],[0,"xlink","href","#prev"],[3,"modal","hidden"]],template:function(e,n){1&e&&(t["ɵɵelementStart"](0,"div",0),t["ɵɵelementStart"](1,"div",1),t["ɵɵlistener"]("click",(function(e){return n.doClose()})),t["ɵɵelementEnd"](),t["ɵɵelementStart"](2,"div",2),t["ɵɵelementStart"](3,"div",3),t["ɵɵtemplate"](4,Q,7,8,"button",4),t["ɵɵelementStart"](5,"button",5),t["ɵɵlistener"]("click",(function(e){return n.doClose()})),t["ɵɵnamespaceSVG"](),t["ɵɵelementStart"](6,"svg"),t["ɵɵelement"](7,"use",6),t["ɵɵelementEnd"](),t["ɵɵnamespaceHTML"](),t["ɵɵelementStart"](8,"span"),t["ɵɵtext"](9),t["ɵɵpipe"](10,"label"),t["ɵɵelementEnd"](),t["ɵɵelementEnd"](),t["ɵɵelementEnd"](),t["ɵɵelementStart"](11,"div",7),t["ɵɵtemplate"](12,O,2,2,"ng-container",8),t["ɵɵpipe"](13,"async"),t["ɵɵelementEnd"](),t["ɵɵelementEnd"](),t["ɵɵelementEnd"]()),2&e&&(t["ɵɵproperty"]("ngClass",t["ɵɵpureFunction1"](10,S,n.modalCount>0)),t["ɵɵadvance"](2),t["ɵɵproperty"]("ngClass",n.className),t["ɵɵadvance"](2),t["ɵɵproperty"]("ngIf",n.modalCount>1),t["ɵɵadvance"](5),t["ɵɵtextInterpolate"](t["ɵɵpipeBind2"](10,5,"modal.close","close")),t["ɵɵadvance"](3),t["ɵɵproperty"]("ngForOf",t["ɵɵpipeBind1"](13,8,n.modalService.modals$)))},directives:[n.NgClass,n.NgIf,n.NgForOf,M],pipes:[r.LabelPipe,n.AsyncPipe],encapsulation:2}),o}(r.DisposableComponent),B=function(){function e(e,t){this.platformId=e,this.zone=t}return e.prototype.raf$=function(){var e=this;return this.zone.runOutsideAngular((function(){return n.isPlatformBrowser(e.platformId)?s.range(0,Number.POSITIVE_INFINITY,a.animationFrame).pipe(i.shareReplay()):s.of(null)}))},e.ɵfac=function(n){return new(n||e)(t["ɵɵinject"](t.PLATFORM_ID),t["ɵɵinject"](t.NgZone))},e.ɵprov=t["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),x=function(){this.top=0,this.left=0,this.x=0,this.y=0},R=function(){function e(e){this.top=0,this.left=0,this.width=0,this.height=0,this.right=0,this.bottom=0,this.center=new x,this.set(e)}return e.contains=function(e,t,n){return e.top<=n&&n<=e.bottom&&e.left<=t&&t<=e.right},e.intersectRect=function(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},e.fromNode=function(t){if(!t.getClientRects().length)return new e;var n=t.getBoundingClientRect();return new e({top:n.top,left:n.left,width:n.width,height:n.height})},e.prototype.set=function(e){e&&(Object.assign(this,e),this.right=this.left+this.width,this.bottom=this.top+this.height);var t=this.top+this.height/2,n=this.left+this.width/2;this.center={left:n,top:t,x:n,y:t}},e.prototype.contains=function(t,n){return e.contains(this,t,n)},e.prototype.intersect=function(t){return e.intersectRect(this,t)},e.prototype.intersection=function(e){var t={x:(this.center.x-e.center.x)/(e.width/2),y:(this.center.y-e.center.y)/(e.height/2)};if(this.intersect(e)){var n=this.left>e.left?0:Math.abs(e.left-this.left),r=this.top>e.top?0:Math.abs(e.top-this.top),o=n?1-n/this.width:(e.left+e.width-this.left)/this.width,i=r?1-r/this.height:(e.top+e.height-this.top)/this.height;return{x:o=Math.min(1,o),y:i=Math.min(1,i),center:t}}return{x:0,y:0,center:t}},e}(),F=function(e){function r(t,n,r,o){var i=e.call(this)||this;return i.platformId=t,i.zone=n,i.elementRef=r,i.rafService=o,i}return l(r,e),r.prototype.ngAfterViewInit=function(){var e=this;n.isPlatformBrowser(this.platformId)&&this.zone.runOutsideAngular((function(){var t=e.elementRef.nativeElement.querySelector("img");e.parallax$().pipe(i.takeUntil(e.unsubscribe)).subscribe((function(e){t.setAttribute("style","height: "+100*e.s+"%; top: 50%; left: 50%; transform: translateX(-50%) translateY("+e.p+"%);")}))}))},r.prototype.parallax$=function(){var e=this;return this.rafService.raf$().pipe(i.map((function(t){var n=new R({top:0,left:0,width:window.innerWidth,height:window.innerHeight}),r=e.elementRef.nativeElement,o=2*(e.parallax||5),i=R.fromNode(r),s=(i=new R({top:i.top,left:i.left,width:i.width,height:i.height})).intersection(n);return s.y>0?{s:(100+2*o)/100,p:Math.min(1,Math.max(-1,s.center.y))*o*1-50}:null})),i.filter((function(e){return null!==e})))},r.prototype.scrollTop$=function(){return this.rafService.raf$().pipe(i.map((function(e){return window.pageYOffset})),i.distinctUntilChanged(),i.tap((function(e){return console.log(e)})))},r.ɵfac=function(e){return new(e||r)(t["ɵɵdirectiveInject"](t.PLATFORM_ID),t["ɵɵdirectiveInject"](t.NgZone),t["ɵɵdirectiveInject"](t.ElementRef),t["ɵɵdirectiveInject"](B))},r.ɵdir=t["ɵɵdefineDirective"]({type:r,selectors:[["","parallax",""]],inputs:{parallax:"parallax"},features:[t["ɵɵInheritDefinitionFeature"]]}),r}(r.DisposableDirective),T=function(e){function r(n,r,o){var a=e.call(this)||this;return a.platformId=n,a.zone=r,a.elementRef=o,a.scroll=new t.EventEmitter,a.scrollEvent=new s.Observable((function(e){return a.zone.runOutsideAngular((function(){return s.fromEvent(a.elementRef.nativeElement,"scroll").pipe(i.takeUntil(a.unsubscribe)).subscribe(e)}))})),a.scrollDocumentEvent=new s.Observable((function(e){return a.zone.runOutsideAngular((function(){return s.fromEvent(window.document,"scroll").pipe(i.takeUntil(a.unsubscribe)).subscribe(e)}))})),a}return l(r,e),r.prototype.ngOnInit=function(){var e=this;n.isPlatformBrowser(this.platformId)&&this.scrollDocumentEvent.subscribe((function(t){var n={scrollHeight:document.scrollingElement.scrollHeight,scrollLeft:document.scrollingElement.scrollLeft,scrollTop:document.scrollingElement.scrollTop,scrollWidth:document.scrollingElement.scrollWidth,originalEvent:t};e.scroll.emit(n)}))},r.ɵfac=function(e){return new(e||r)(t["ɵɵdirectiveInject"](t.PLATFORM_ID),t["ɵɵdirectiveInject"](t.NgZone),t["ɵɵdirectiveInject"](t.ElementRef))},r.ɵdir=t["ɵɵdefineDirective"]({type:r,selectors:[["","scroll",""]],outputs:{scroll:"scroll"},features:[t["ɵɵInheritDefinitionFeature"]]}),r}(r.DisposableDirective),D=["sprite",""];function V(e,n){if(1&e&&(t["ɵɵelementContainerStart"](0),t["ɵɵnamespaceSVG"](),t["ɵɵelementStart"](1,"svg",1),t["ɵɵelement"](2,"use"),t["ɵɵelementEnd"](),t["ɵɵelementContainerEnd"]()),2&e){var r=t["ɵɵnextContext"]();t["ɵɵadvance"](2),t["ɵɵattributeInterpolate1"]("href","#",r.sprite,"",null,"xlink")}}var P=function(){function e(){}return e.ɵfac=function(t){return new(t||e)},e.ɵcmp=t["ɵɵdefineComponent"]({type:e,selectors:[["","sprite",""]],inputs:{sprite:"sprite"},attrs:D,decls:1,vars:1,consts:[[4,"ngIf"],[1,"sprite"]],template:function(e,n){1&e&&t["ɵɵtemplate"](0,V,3,1,"ng-container",0),2&e&&t["ɵɵproperty"]("ngIf",n.sprite)},directives:[n.NgIf],encapsulation:2}),e}(),N=[h,w,B],U=function(){function e(e){if(e)throw new Error("UIModule is already loaded. Import it in the AppModule only")}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:m,useValue:t}]}},e.ɵmod=t["ɵɵdefineNgModule"]({type:e}),e.ɵinj=t["ɵɵdefineInjector"]({factory:function(n){return new(n||e)(t["ɵɵinject"](e,12))},providers:p(N),imports:[[n.CommonModule,r.CoreModule],r.CoreModule]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t["ɵɵsetNgModuleScope"](U,{declarations:[v,k,M,P,g,I,F,T],imports:[n.CommonModule,r.CoreModule],exports:[r.CoreModule,v,k,M,P,g,I,F,T]}),e.ClickOutsideDirective=g,e.LazyImagesDirective=I,e.Modal=b,e.ModalCloseEvent=C,e.ModalCompleteEvent=y,e.ModalContainerComponent=k,e.ModalData=A,e.ModalService=w,e.ModalViewComponent=M,e.ParallaxDirective=F,e.RafService=B,e.ScrollDirective=T,e.SpriteComponent=P,e.UIConfig=f,e.UIModule=U,e.UIModuleComponent=v,e.UIService=h,e.UI_CONFIG=m,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=designr-ui.umd.min.js.map